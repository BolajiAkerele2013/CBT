function Kf(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const a=Object.getOwnPropertyDescriptor(s,n);a&&Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();var it=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Jf(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,n.get?n:{enumerable:!0,get:function(){return e[s]}})}),r}var Hu={exports:{}},Wi={},Qu={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sn=Symbol.for("react.element"),Yf=Symbol.for("react.portal"),Xf=Symbol.for("react.fragment"),Zf=Symbol.for("react.strict_mode"),em=Symbol.for("react.profiler"),tm=Symbol.for("react.provider"),rm=Symbol.for("react.context"),sm=Symbol.for("react.forward_ref"),nm=Symbol.for("react.suspense"),im=Symbol.for("react.memo"),am=Symbol.for("react.lazy"),ac=Symbol.iterator;function lm(e){return e===null||typeof e!="object"?null:(e=ac&&e[ac]||e["@@iterator"],typeof e=="function"?e:null)}var Ku={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gu=Object.assign,Ju={};function gs(e,t,r){this.props=e,this.context=t,this.refs=Ju,this.updater=r||Ku}gs.prototype.isReactComponent={};gs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Yu(){}Yu.prototype=gs.prototype;function eo(e,t,r){this.props=e,this.context=t,this.refs=Ju,this.updater=r||Ku}var to=eo.prototype=new Yu;to.constructor=eo;Gu(to,gs.prototype);to.isPureReactComponent=!0;var lc=Array.isArray,Xu=Object.prototype.hasOwnProperty,ro={current:null},Zu={key:!0,ref:!0,__self:!0,__source:!0};function ed(e,t,r){var s,n={},a=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)Xu.call(t,s)&&!Zu.hasOwnProperty(s)&&(n[s]=t[s]);var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){for(var o=Array(c),u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}if(e&&e.defaultProps)for(s in c=e.defaultProps,c)n[s]===void 0&&(n[s]=c[s]);return{$$typeof:Sn,type:e,key:a,ref:l,props:n,_owner:ro.current}}function om(e,t){return{$$typeof:Sn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function so(e){return typeof e=="object"&&e!==null&&e.$$typeof===Sn}function cm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var oc=/\/+/g;function xa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cm(""+e.key):t.toString(36)}function si(e,t,r,s,n){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Sn:case Yf:l=!0}}if(l)return l=e,n=n(l),e=s===""?"."+xa(l,0):s,lc(n)?(r="",e!=null&&(r=e.replace(oc,"$&/")+"/"),si(n,t,r,"",function(u){return u})):n!=null&&(so(n)&&(n=om(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(oc,"$&/")+"/")+e)),t.push(n)),1;if(l=0,s=s===""?".":s+":",lc(e))for(var c=0;c<e.length;c++){a=e[c];var o=s+xa(a,c);l+=si(a,t,r,o,n)}else if(o=lm(e),typeof o=="function")for(e=o.call(e),c=0;!(a=e.next()).done;)a=a.value,o=s+xa(a,c++),l+=si(a,t,r,o,n);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ln(e,t,r){if(e==null)return e;var s=[],n=0;return si(e,s,"","",function(a){return t.call(r,a,n++)}),s}function um(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var De={current:null},ni={transition:null},dm={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:ni,ReactCurrentOwner:ro};function td(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:Ln,forEach:function(e,t,r){Ln(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ln(e,function(){t++}),t},toArray:function(e){return Ln(e,function(t){return t})||[]},only:function(e){if(!so(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Q.Component=gs;Q.Fragment=Xf;Q.Profiler=em;Q.PureComponent=eo;Q.StrictMode=Zf;Q.Suspense=nm;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dm;Q.act=td;Q.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Gu({},e.props),n=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=ro.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(o in t)Xu.call(t,o)&&!Zu.hasOwnProperty(o)&&(s[o]=t[o]===void 0&&c!==void 0?c[o]:t[o])}var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){c=Array(o);for(var u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}return{$$typeof:Sn,type:e.type,key:n,ref:a,props:s,_owner:l}};Q.createContext=function(e){return e={$$typeof:rm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:tm,_context:e},e.Consumer=e};Q.createElement=ed;Q.createFactory=function(e){var t=ed.bind(null,e);return t.type=e,t};Q.createRef=function(){return{current:null}};Q.forwardRef=function(e){return{$$typeof:sm,render:e}};Q.isValidElement=so;Q.lazy=function(e){return{$$typeof:am,_payload:{_status:-1,_result:e},_init:um}};Q.memo=function(e,t){return{$$typeof:im,type:e,compare:t===void 0?null:t}};Q.startTransition=function(e){var t=ni.transition;ni.transition={};try{e()}finally{ni.transition=t}};Q.unstable_act=td;Q.useCallback=function(e,t){return De.current.useCallback(e,t)};Q.useContext=function(e){return De.current.useContext(e)};Q.useDebugValue=function(){};Q.useDeferredValue=function(e){return De.current.useDeferredValue(e)};Q.useEffect=function(e,t){return De.current.useEffect(e,t)};Q.useId=function(){return De.current.useId()};Q.useImperativeHandle=function(e,t,r){return De.current.useImperativeHandle(e,t,r)};Q.useInsertionEffect=function(e,t){return De.current.useInsertionEffect(e,t)};Q.useLayoutEffect=function(e,t){return De.current.useLayoutEffect(e,t)};Q.useMemo=function(e,t){return De.current.useMemo(e,t)};Q.useReducer=function(e,t,r){return De.current.useReducer(e,t,r)};Q.useRef=function(e){return De.current.useRef(e)};Q.useState=function(e){return De.current.useState(e)};Q.useSyncExternalStore=function(e,t,r){return De.current.useSyncExternalStore(e,t,r)};Q.useTransition=function(){return De.current.useTransition()};Q.version="18.3.1";Qu.exports=Q;var j=Qu.exports;const rd=Gf(j),hm=Kf({__proto__:null,default:rd},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm=j,mm=Symbol.for("react.element"),pm=Symbol.for("react.fragment"),xm=Object.prototype.hasOwnProperty,ym=fm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gm={key:!0,ref:!0,__self:!0,__source:!0};function sd(e,t,r){var s,n={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)xm.call(t,s)&&!gm.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)n[s]===void 0&&(n[s]=t[s]);return{$$typeof:mm,type:e,key:a,ref:l,props:n,_owner:ym.current}}Wi.Fragment=pm;Wi.jsx=sd;Wi.jsxs=sd;Hu.exports=Wi;var i=Hu.exports,Ga={},nd={exports:{}},Ze={},id={exports:{}},ad={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,M){var $=C.length;C.push(M);e:for(;0<$;){var z=$-1>>>1,X=C[z];if(0<n(X,M))C[z]=M,C[$]=X,$=z;else break e}}function r(C){return C.length===0?null:C[0]}function s(C){if(C.length===0)return null;var M=C[0],$=C.pop();if($!==M){C[0]=$;e:for(var z=0,X=C.length,Le=X>>>1;z<Le;){var Ke=2*(z+1)-1,kt=C[Ke],Fe=Ke+1,te=C[Fe];if(0>n(kt,$))Fe<X&&0>n(te,kt)?(C[z]=te,C[Fe]=$,z=Fe):(C[z]=kt,C[Ke]=$,z=Ke);else if(Fe<X&&0>n(te,$))C[z]=te,C[Fe]=$,z=Fe;else break e}}return M}function n(C,M){var $=C.sortIndex-M.sortIndex;return $!==0?$:C.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var o=[],u=[],d=1,h=null,f=3,y=!1,g=!1,w=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(C){for(var M=r(u);M!==null;){if(M.callback===null)s(u);else if(M.startTime<=C)s(u),M.sortIndex=M.expirationTime,t(o,M);else break;M=r(u)}}function _(C){if(w=!1,p(C),!g)if(r(o)!==null)g=!0,K(N);else{var M=r(u);M!==null&&ye(_,M.startTime-C)}}function N(C,M){g=!1,w&&(w=!1,x(O),O=-1),y=!0;var $=f;try{for(p(M),h=r(o);h!==null&&(!(h.expirationTime>M)||C&&!W());){var z=h.callback;if(typeof z=="function"){h.callback=null,f=h.priorityLevel;var X=z(h.expirationTime<=M);M=e.unstable_now(),typeof X=="function"?h.callback=X:h===r(o)&&s(o),p(M)}else s(o);h=r(o)}if(h!==null)var Le=!0;else{var Ke=r(u);Ke!==null&&ye(_,Ke.startTime-M),Le=!1}return Le}finally{h=null,f=$,y=!1}}var E=!1,b=null,O=-1,k=5,S=-1;function W(){return!(e.unstable_now()-S<k)}function F(){if(b!==null){var C=e.unstable_now();S=C;var M=!0;try{M=b(!0,C)}finally{M?G():(E=!1,b=null)}}else E=!1}var G;if(typeof m=="function")G=function(){m(F)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Y=Ae.port2;Ae.port1.onmessage=F,G=function(){Y.postMessage(null)}}else G=function(){v(F,0)};function K(C){b=C,E||(E=!0,G())}function ye(C,M){O=v(function(){C(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){g||y||(g=!0,K(N))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(C){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var $=f;f=M;try{return C()}finally{f=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,M){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var $=f;f=C;try{return M()}finally{f=$}},e.unstable_scheduleCallback=function(C,M,$){var z=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?z+$:z):$=z,C){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=$+X,C={id:d++,callback:M,priorityLevel:C,startTime:$,expirationTime:X,sortIndex:-1},$>z?(C.sortIndex=$,t(u,C),r(o)===null&&C===r(u)&&(w?(x(O),O=-1):w=!0,ye(_,$-z))):(C.sortIndex=X,t(o,C),g||y||(g=!0,K(N))),C},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(C){var M=f;return function(){var $=f;f=M;try{return C.apply(this,arguments)}finally{f=$}}}})(ad);id.exports=ad;var vm=id.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm=j,Xe=vm;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ld=new Set,rn={};function Rr(e,t){os(e,t),os(e+"Capture",t)}function os(e,t){for(rn[e]=t,e=0;e<t.length;e++)ld.add(t[e])}var $t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ja=Object.prototype.hasOwnProperty,jm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cc={},uc={};function _m(e){return Ja.call(uc,e)?!0:Ja.call(cc,e)?!1:jm.test(e)?uc[e]=!0:(cc[e]=!0,!1)}function Nm(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bm(e,t,r,s){if(t===null||typeof t>"u"||Nm(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Me(e,t,r,s,n,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var Se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Se[e]=new Me(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Se[t]=new Me(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Se[e]=new Me(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Se[e]=new Me(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Se[e]=new Me(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Se[e]=new Me(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Se[e]=new Me(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Se[e]=new Me(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Se[e]=new Me(e,5,!1,e.toLowerCase(),null,!1,!1)});var no=/[\-:]([a-z])/g;function io(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(no,io);Se[t]=new Me(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(no,io);Se[t]=new Me(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(no,io);Se[t]=new Me(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Se[e]=new Me(e,1,!1,e.toLowerCase(),null,!1,!1)});Se.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Se[e]=new Me(e,1,!1,e.toLowerCase(),null,!0,!0)});function ao(e,t,r,s){var n=Se.hasOwnProperty(t)?Se[t]:null;(n!==null?n.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bm(t,r,n,s)&&(r=null),s||n===null?_m(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,s=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Mt=wm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$n=Symbol.for("react.element"),qr=Symbol.for("react.portal"),Vr=Symbol.for("react.fragment"),lo=Symbol.for("react.strict_mode"),Ya=Symbol.for("react.profiler"),od=Symbol.for("react.provider"),cd=Symbol.for("react.context"),oo=Symbol.for("react.forward_ref"),Xa=Symbol.for("react.suspense"),Za=Symbol.for("react.suspense_list"),co=Symbol.for("react.memo"),qt=Symbol.for("react.lazy"),ud=Symbol.for("react.offscreen"),dc=Symbol.iterator;function Es(e){return e===null||typeof e!="object"?null:(e=dc&&e[dc]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Object.assign,ya;function Us(e){if(ya===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ya=t&&t[1]||""}return`
`+ya+e}var ga=!1;function va(e,t){if(!e||ga)return"";ga=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),a=s.stack.split(`
`),l=n.length-1,c=a.length-1;1<=l&&0<=c&&n[l]!==a[c];)c--;for(;1<=l&&0<=c;l--,c--)if(n[l]!==a[c]){if(l!==1||c!==1)do if(l--,c--,0>c||n[l]!==a[c]){var o=`
`+n[l].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=l&&0<=c);break}}}finally{ga=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Us(e):""}function km(e){switch(e.tag){case 5:return Us(e.type);case 16:return Us("Lazy");case 13:return Us("Suspense");case 19:return Us("SuspenseList");case 0:case 2:case 15:return e=va(e.type,!1),e;case 11:return e=va(e.type.render,!1),e;case 1:return e=va(e.type,!0),e;default:return""}}function el(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vr:return"Fragment";case qr:return"Portal";case Ya:return"Profiler";case lo:return"StrictMode";case Xa:return"Suspense";case Za:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cd:return(e.displayName||"Context")+".Consumer";case od:return(e._context.displayName||"Context")+".Provider";case oo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case co:return t=e.displayName||null,t!==null?t:el(e.type)||"Memo";case qt:t=e._payload,e=e._init;try{return el(e(t))}catch{}}return null}function Sm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return el(t);case 8:return t===lo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function lr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Em(e){var t=dd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(l){s=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function In(e){e._valueTracker||(e._valueTracker=Em(e))}function hd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=dd(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function pi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function tl(e,t){var r=t.checked;return ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function hc(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=lr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fd(e,t){t=t.checked,t!=null&&ao(e,"checked",t,!1)}function rl(e,t){fd(e,t);var r=lr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sl(e,t.type,r):t.hasOwnProperty("defaultValue")&&sl(e,t.type,lr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function sl(e,t,r){(t!=="number"||pi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ds=Array.isArray;function ts(e,t,r,s){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&s&&(e[r].defaultSelected=!0)}else{for(r=""+lr(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function nl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(A(92));if(Ds(r)){if(1<r.length)throw Error(A(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:lr(r)}}function md(e,t){var r=lr(t.value),s=lr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function pc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function pd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function il(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?pd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Un,xd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Un=Un||document.createElement("div"),Un.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Un.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cm=["Webkit","ms","Moz","O"];Object.keys(qs).forEach(function(e){Cm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qs[t]=qs[e]})});function yd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||qs.hasOwnProperty(e)&&qs[e]?(""+t).trim():t+"px"}function gd(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,n=yd(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,n):e[r]=n}}var Pm=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function al(e,t){if(t){if(Pm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function ll(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ol=null;function uo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cl=null,rs=null,ss=null;function xc(e){if(e=Pn(e)){if(typeof cl!="function")throw Error(A(280));var t=e.stateNode;t&&(t=Ji(t),cl(e.stateNode,e.type,t))}}function vd(e){rs?ss?ss.push(e):ss=[e]:rs=e}function wd(){if(rs){var e=rs,t=ss;if(ss=rs=null,xc(e),t)for(e=0;e<t.length;e++)xc(t[e])}}function jd(e,t){return e(t)}function _d(){}var wa=!1;function Nd(e,t,r){if(wa)return e(t,r);wa=!0;try{return jd(e,t,r)}finally{wa=!1,(rs!==null||ss!==null)&&(_d(),wd())}}function nn(e,t){var r=e.stateNode;if(r===null)return null;var s=Ji(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(A(231,t,typeof r));return r}var ul=!1;if($t)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){ul=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{ul=!1}function Tm(e,t,r,s,n,a,l,c,o){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Vs=!1,xi=null,yi=!1,dl=null,Rm={onError:function(e){Vs=!0,xi=e}};function Om(e,t,r,s,n,a,l,c,o){Vs=!1,xi=null,Tm.apply(Rm,arguments)}function Am(e,t,r,s,n,a,l,c,o){if(Om.apply(this,arguments),Vs){if(Vs){var u=xi;Vs=!1,xi=null}else throw Error(A(198));yi||(yi=!0,dl=u)}}function Or(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function bd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yc(e){if(Or(e)!==e)throw Error(A(188))}function Lm(e){var t=e.alternate;if(!t){if(t=Or(e),t===null)throw Error(A(188));return t!==e?null:e}for(var r=e,s=t;;){var n=r.return;if(n===null)break;var a=n.alternate;if(a===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===a.child){for(a=n.child;a;){if(a===r)return yc(n),e;if(a===s)return yc(n),t;a=a.sibling}throw Error(A(188))}if(r.return!==s.return)r=n,s=a;else{for(var l=!1,c=n.child;c;){if(c===r){l=!0,r=n,s=a;break}if(c===s){l=!0,s=n,r=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===r){l=!0,r=a,s=n;break}if(c===s){l=!0,s=a,r=n;break}c=c.sibling}if(!l)throw Error(A(189))}}if(r.alternate!==s)throw Error(A(190))}if(r.tag!==3)throw Error(A(188));return r.stateNode.current===r?e:t}function kd(e){return e=Lm(e),e!==null?Sd(e):null}function Sd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Sd(e);if(t!==null)return t;e=e.sibling}return null}var Ed=Xe.unstable_scheduleCallback,gc=Xe.unstable_cancelCallback,$m=Xe.unstable_shouldYield,Im=Xe.unstable_requestPaint,he=Xe.unstable_now,Um=Xe.unstable_getCurrentPriorityLevel,ho=Xe.unstable_ImmediatePriority,Cd=Xe.unstable_UserBlockingPriority,gi=Xe.unstable_NormalPriority,Dm=Xe.unstable_LowPriority,Pd=Xe.unstable_IdlePriority,Hi=null,_t=null;function Mm(e){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Hi,e,void 0,(e.current.flags&128)===128)}catch{}}var mt=Math.clz32?Math.clz32:Bm,Fm=Math.log,zm=Math.LN2;function Bm(e){return e>>>=0,e===0?32:31-(Fm(e)/zm|0)|0}var Dn=64,Mn=4194304;function Ms(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vi(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,n=e.suspendedLanes,a=e.pingedLanes,l=r&268435455;if(l!==0){var c=l&~n;c!==0?s=Ms(c):(a&=l,a!==0&&(s=Ms(a)))}else l=r&~n,l!==0?s=Ms(l):a!==0&&(s=Ms(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&n)&&(n=s&-s,a=t&-t,n>=a||n===16&&(a&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-mt(t),n=1<<r,s|=e[r],t&=~n;return s}function qm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vm(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-mt(a),c=1<<l,o=n[l];o===-1?(!(c&r)||c&s)&&(n[l]=qm(c,t)):o<=t&&(e.expiredLanes|=c),a&=~c}}function hl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Td(){var e=Dn;return Dn<<=1,!(Dn&4194240)&&(Dn=64),e}function ja(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function En(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-mt(t),e[t]=r}function Wm(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-mt(r),a=1<<n;t[n]=0,s[n]=-1,e[n]=-1,r&=~a}}function fo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-mt(r),n=1<<s;n&t|e[s]&t&&(e[s]|=t),r&=~n}}var Z=0;function Rd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Od,mo,Ad,Ld,$d,fl=!1,Fn=[],Xt=null,Zt=null,er=null,an=new Map,ln=new Map,Ht=[],Hm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vc(e,t){switch(e){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":an.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ln.delete(t.pointerId)}}function Ps(e,t,r,s,n,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[n]},t!==null&&(t=Pn(t),t!==null&&mo(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Qm(e,t,r,s,n){switch(t){case"focusin":return Xt=Ps(Xt,e,t,r,s,n),!0;case"dragenter":return Zt=Ps(Zt,e,t,r,s,n),!0;case"mouseover":return er=Ps(er,e,t,r,s,n),!0;case"pointerover":var a=n.pointerId;return an.set(a,Ps(an.get(a)||null,e,t,r,s,n)),!0;case"gotpointercapture":return a=n.pointerId,ln.set(a,Ps(ln.get(a)||null,e,t,r,s,n)),!0}return!1}function Id(e){var t=vr(e.target);if(t!==null){var r=Or(t);if(r!==null){if(t=r.tag,t===13){if(t=bd(r),t!==null){e.blockedOn=t,$d(e.priority,function(){Ad(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ii(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ml(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);ol=s,r.target.dispatchEvent(s),ol=null}else return t=Pn(r),t!==null&&mo(t),e.blockedOn=r,!1;t.shift()}return!0}function wc(e,t,r){ii(e)&&r.delete(t)}function Km(){fl=!1,Xt!==null&&ii(Xt)&&(Xt=null),Zt!==null&&ii(Zt)&&(Zt=null),er!==null&&ii(er)&&(er=null),an.forEach(wc),ln.forEach(wc)}function Ts(e,t){e.blockedOn===t&&(e.blockedOn=null,fl||(fl=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,Km)))}function on(e){function t(n){return Ts(n,e)}if(0<Fn.length){Ts(Fn[0],e);for(var r=1;r<Fn.length;r++){var s=Fn[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Xt!==null&&Ts(Xt,e),Zt!==null&&Ts(Zt,e),er!==null&&Ts(er,e),an.forEach(t),ln.forEach(t),r=0;r<Ht.length;r++)s=Ht[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ht.length&&(r=Ht[0],r.blockedOn===null);)Id(r),r.blockedOn===null&&Ht.shift()}var ns=Mt.ReactCurrentBatchConfig,wi=!0;function Gm(e,t,r,s){var n=Z,a=ns.transition;ns.transition=null;try{Z=1,po(e,t,r,s)}finally{Z=n,ns.transition=a}}function Jm(e,t,r,s){var n=Z,a=ns.transition;ns.transition=null;try{Z=4,po(e,t,r,s)}finally{Z=n,ns.transition=a}}function po(e,t,r,s){if(wi){var n=ml(e,t,r,s);if(n===null)Ra(e,t,s,ji,r),vc(e,s);else if(Qm(n,e,t,r,s))s.stopPropagation();else if(vc(e,s),t&4&&-1<Hm.indexOf(e)){for(;n!==null;){var a=Pn(n);if(a!==null&&Od(a),a=ml(e,t,r,s),a===null&&Ra(e,t,s,ji,r),a===n)break;n=a}n!==null&&s.stopPropagation()}else Ra(e,t,s,null,r)}}var ji=null;function ml(e,t,r,s){if(ji=null,e=uo(s),e=vr(e),e!==null)if(t=Or(e),t===null)e=null;else if(r=t.tag,r===13){if(e=bd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ji=e,null}function Ud(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Um()){case ho:return 1;case Cd:return 4;case gi:case Dm:return 16;case Pd:return 536870912;default:return 16}default:return 16}}var Gt=null,xo=null,ai=null;function Dd(){if(ai)return ai;var e,t=xo,r=t.length,s,n="value"in Gt?Gt.value:Gt.textContent,a=n.length;for(e=0;e<r&&t[e]===n[e];e++);var l=r-e;for(s=1;s<=l&&t[r-s]===n[a-s];s++);return ai=n.slice(e,1<s?1-s:void 0)}function li(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zn(){return!0}function jc(){return!1}function et(e){function t(r,s,n,a,l){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?zn:jc,this.isPropagationStopped=jc,this}return ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zn)},persist:function(){},isPersistent:zn}),t}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yo=et(vs),Cn=ue({},vs,{view:0,detail:0}),Ym=et(Cn),_a,Na,Rs,Qi=ue({},Cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:go,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rs&&(Rs&&e.type==="mousemove"?(_a=e.screenX-Rs.screenX,Na=e.screenY-Rs.screenY):Na=_a=0,Rs=e),_a)},movementY:function(e){return"movementY"in e?e.movementY:Na}}),_c=et(Qi),Xm=ue({},Qi,{dataTransfer:0}),Zm=et(Xm),ep=ue({},Cn,{relatedTarget:0}),ba=et(ep),tp=ue({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),rp=et(tp),sp=ue({},vs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),np=et(sp),ip=ue({},vs,{data:0}),Nc=et(ip),ap={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},op={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=op[e])?!!t[e]:!1}function go(){return cp}var up=ue({},Cn,{key:function(e){if(e.key){var t=ap[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=li(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:go,charCode:function(e){return e.type==="keypress"?li(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?li(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dp=et(up),hp=ue({},Qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bc=et(hp),fp=ue({},Cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:go}),mp=et(fp),pp=ue({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),xp=et(pp),yp=ue({},Qi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gp=et(yp),vp=[9,13,27,32],vo=$t&&"CompositionEvent"in window,Ws=null;$t&&"documentMode"in document&&(Ws=document.documentMode);var wp=$t&&"TextEvent"in window&&!Ws,Md=$t&&(!vo||Ws&&8<Ws&&11>=Ws),kc=" ",Sc=!1;function Fd(e,t){switch(e){case"keyup":return vp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wr=!1;function jp(e,t){switch(e){case"compositionend":return zd(t);case"keypress":return t.which!==32?null:(Sc=!0,kc);case"textInput":return e=t.data,e===kc&&Sc?null:e;default:return null}}function _p(e,t){if(Wr)return e==="compositionend"||!vo&&Fd(e,t)?(e=Dd(),ai=xo=Gt=null,Wr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Md&&t.locale!=="ko"?null:t.data;default:return null}}var Np={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ec(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Np[e.type]:t==="textarea"}function Bd(e,t,r,s){vd(s),t=_i(t,"onChange"),0<t.length&&(r=new yo("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Hs=null,cn=null;function bp(e){Zd(e,0)}function Ki(e){var t=Kr(e);if(hd(t))return e}function kp(e,t){if(e==="change")return t}var qd=!1;if($t){var ka;if($t){var Sa="oninput"in document;if(!Sa){var Cc=document.createElement("div");Cc.setAttribute("oninput","return;"),Sa=typeof Cc.oninput=="function"}ka=Sa}else ka=!1;qd=ka&&(!document.documentMode||9<document.documentMode)}function Pc(){Hs&&(Hs.detachEvent("onpropertychange",Vd),cn=Hs=null)}function Vd(e){if(e.propertyName==="value"&&Ki(cn)){var t=[];Bd(t,cn,e,uo(e)),Nd(bp,t)}}function Sp(e,t,r){e==="focusin"?(Pc(),Hs=t,cn=r,Hs.attachEvent("onpropertychange",Vd)):e==="focusout"&&Pc()}function Ep(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ki(cn)}function Cp(e,t){if(e==="click")return Ki(t)}function Pp(e,t){if(e==="input"||e==="change")return Ki(t)}function Tp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xt=typeof Object.is=="function"?Object.is:Tp;function un(e,t){if(xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!Ja.call(t,n)||!xt(e[n],t[n]))return!1}return!0}function Tc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rc(e,t){var r=Tc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Tc(r)}}function Wd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hd(){for(var e=window,t=pi();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=pi(e.document)}return t}function wo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Rp(e){var t=Hd(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Wd(r.ownerDocument.documentElement,r)){if(s!==null&&wo(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,a=Math.min(s.start,n);s=s.end===void 0?a:Math.min(s.end,n),!e.extend&&a>s&&(n=s,s=a,a=n),n=Rc(r,a);var l=Rc(r,s);n&&l&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Op=$t&&"documentMode"in document&&11>=document.documentMode,Hr=null,pl=null,Qs=null,xl=!1;function Oc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;xl||Hr==null||Hr!==pi(s)||(s=Hr,"selectionStart"in s&&wo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Qs&&un(Qs,s)||(Qs=s,s=_i(pl,"onSelect"),0<s.length&&(t=new yo("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Hr)))}function Bn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Qr={animationend:Bn("Animation","AnimationEnd"),animationiteration:Bn("Animation","AnimationIteration"),animationstart:Bn("Animation","AnimationStart"),transitionend:Bn("Transition","TransitionEnd")},Ea={},Qd={};$t&&(Qd=document.createElement("div").style,"AnimationEvent"in window||(delete Qr.animationend.animation,delete Qr.animationiteration.animation,delete Qr.animationstart.animation),"TransitionEvent"in window||delete Qr.transitionend.transition);function Gi(e){if(Ea[e])return Ea[e];if(!Qr[e])return e;var t=Qr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Qd)return Ea[e]=t[r];return e}var Kd=Gi("animationend"),Gd=Gi("animationiteration"),Jd=Gi("animationstart"),Yd=Gi("transitionend"),Xd=new Map,Ac="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(e,t){Xd.set(e,t),Rr(t,[e])}for(var Ca=0;Ca<Ac.length;Ca++){var Pa=Ac[Ca],Ap=Pa.toLowerCase(),Lp=Pa[0].toUpperCase()+Pa.slice(1);cr(Ap,"on"+Lp)}cr(Kd,"onAnimationEnd");cr(Gd,"onAnimationIteration");cr(Jd,"onAnimationStart");cr("dblclick","onDoubleClick");cr("focusin","onFocus");cr("focusout","onBlur");cr(Yd,"onTransitionEnd");os("onMouseEnter",["mouseout","mouseover"]);os("onMouseLeave",["mouseout","mouseover"]);os("onPointerEnter",["pointerout","pointerover"]);os("onPointerLeave",["pointerout","pointerover"]);Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$p=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fs));function Lc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Am(s,t,void 0,e),e.currentTarget=null}function Zd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],n=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var l=s.length-1;0<=l;l--){var c=s[l],o=c.instance,u=c.currentTarget;if(c=c.listener,o!==a&&n.isPropagationStopped())break e;Lc(n,c,u),a=o}else for(l=0;l<s.length;l++){if(c=s[l],o=c.instance,u=c.currentTarget,c=c.listener,o!==a&&n.isPropagationStopped())break e;Lc(n,c,u),a=o}}}if(yi)throw e=dl,yi=!1,dl=null,e}function ne(e,t){var r=t[jl];r===void 0&&(r=t[jl]=new Set);var s=e+"__bubble";r.has(s)||(eh(t,e,2,!1),r.add(s))}function Ta(e,t,r){var s=0;t&&(s|=4),eh(r,e,s,t)}var qn="_reactListening"+Math.random().toString(36).slice(2);function dn(e){if(!e[qn]){e[qn]=!0,ld.forEach(function(r){r!=="selectionchange"&&($p.has(r)||Ta(r,!1,e),Ta(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qn]||(t[qn]=!0,Ta("selectionchange",!1,t))}}function eh(e,t,r,s){switch(Ud(t)){case 1:var n=Gm;break;case 4:n=Jm;break;default:n=po}r=n.bind(null,t,r,e),n=void 0,!ul||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Ra(e,t,r,s,n){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var c=s.stateNode.containerInfo;if(c===n||c.nodeType===8&&c.parentNode===n)break;if(l===4)for(l=s.return;l!==null;){var o=l.tag;if((o===3||o===4)&&(o=l.stateNode.containerInfo,o===n||o.nodeType===8&&o.parentNode===n))return;l=l.return}for(;c!==null;){if(l=vr(c),l===null)return;if(o=l.tag,o===5||o===6){s=a=l;continue e}c=c.parentNode}}s=s.return}Nd(function(){var u=a,d=uo(r),h=[];e:{var f=Xd.get(e);if(f!==void 0){var y=yo,g=e;switch(e){case"keypress":if(li(r)===0)break e;case"keydown":case"keyup":y=dp;break;case"focusin":g="focus",y=ba;break;case"focusout":g="blur",y=ba;break;case"beforeblur":case"afterblur":y=ba;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=_c;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Zm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=mp;break;case Kd:case Gd:case Jd:y=rp;break;case Yd:y=xp;break;case"scroll":y=Ym;break;case"wheel":y=gp;break;case"copy":case"cut":case"paste":y=np;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=bc}var w=(t&4)!==0,v=!w&&e==="scroll",x=w?f!==null?f+"Capture":null:f;w=[];for(var m=u,p;m!==null;){p=m;var _=p.stateNode;if(p.tag===5&&_!==null&&(p=_,x!==null&&(_=nn(m,x),_!=null&&w.push(hn(m,_,p)))),v)break;m=m.return}0<w.length&&(f=new y(f,g,null,r,d),h.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",f&&r!==ol&&(g=r.relatedTarget||r.fromElement)&&(vr(g)||g[It]))break e;if((y||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,y?(g=r.relatedTarget||r.toElement,y=u,g=g?vr(g):null,g!==null&&(v=Or(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=u),y!==g)){if(w=_c,_="onMouseLeave",x="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(w=bc,_="onPointerLeave",x="onPointerEnter",m="pointer"),v=y==null?f:Kr(y),p=g==null?f:Kr(g),f=new w(_,m+"leave",y,r,d),f.target=v,f.relatedTarget=p,_=null,vr(d)===u&&(w=new w(x,m+"enter",g,r,d),w.target=p,w.relatedTarget=v,_=w),v=_,y&&g)t:{for(w=y,x=g,m=0,p=w;p;p=Ur(p))m++;for(p=0,_=x;_;_=Ur(_))p++;for(;0<m-p;)w=Ur(w),m--;for(;0<p-m;)x=Ur(x),p--;for(;m--;){if(w===x||x!==null&&w===x.alternate)break t;w=Ur(w),x=Ur(x)}w=null}else w=null;y!==null&&$c(h,f,y,w,!1),g!==null&&v!==null&&$c(h,v,g,w,!0)}}e:{if(f=u?Kr(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var N=kp;else if(Ec(f))if(qd)N=Pp;else{N=Ep;var E=Sp}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=Cp);if(N&&(N=N(e,u))){Bd(h,N,r,d);break e}E&&E(e,f,u),e==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&sl(f,"number",f.value)}switch(E=u?Kr(u):window,e){case"focusin":(Ec(E)||E.contentEditable==="true")&&(Hr=E,pl=u,Qs=null);break;case"focusout":Qs=pl=Hr=null;break;case"mousedown":xl=!0;break;case"contextmenu":case"mouseup":case"dragend":xl=!1,Oc(h,r,d);break;case"selectionchange":if(Op)break;case"keydown":case"keyup":Oc(h,r,d)}var b;if(vo)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Wr?Fd(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(Md&&r.locale!=="ko"&&(Wr||O!=="onCompositionStart"?O==="onCompositionEnd"&&Wr&&(b=Dd()):(Gt=d,xo="value"in Gt?Gt.value:Gt.textContent,Wr=!0)),E=_i(u,O),0<E.length&&(O=new Nc(O,e,null,r,d),h.push({event:O,listeners:E}),b?O.data=b:(b=zd(r),b!==null&&(O.data=b)))),(b=wp?jp(e,r):_p(e,r))&&(u=_i(u,"onBeforeInput"),0<u.length&&(d=new Nc("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=b))}Zd(h,t)})}function hn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function _i(e,t){for(var r=t+"Capture",s=[];e!==null;){var n=e,a=n.stateNode;n.tag===5&&a!==null&&(n=a,a=nn(e,r),a!=null&&s.unshift(hn(e,a,n)),a=nn(e,t),a!=null&&s.push(hn(e,a,n))),e=e.return}return s}function Ur(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $c(e,t,r,s,n){for(var a=t._reactName,l=[];r!==null&&r!==s;){var c=r,o=c.alternate,u=c.stateNode;if(o!==null&&o===s)break;c.tag===5&&u!==null&&(c=u,n?(o=nn(r,a),o!=null&&l.unshift(hn(r,o,c))):n||(o=nn(r,a),o!=null&&l.push(hn(r,o,c)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var Ip=/\r\n?/g,Up=/\u0000|\uFFFD/g;function Ic(e){return(typeof e=="string"?e:""+e).replace(Ip,`
`).replace(Up,"")}function Vn(e,t,r){if(t=Ic(t),Ic(e)!==t&&r)throw Error(A(425))}function Ni(){}var yl=null,gl=null;function vl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wl=typeof setTimeout=="function"?setTimeout:void 0,Dp=typeof clearTimeout=="function"?clearTimeout:void 0,Uc=typeof Promise=="function"?Promise:void 0,Mp=typeof queueMicrotask=="function"?queueMicrotask:typeof Uc<"u"?function(e){return Uc.resolve(null).then(e).catch(Fp)}:wl;function Fp(e){setTimeout(function(){throw e})}function Oa(e,t){var r=t,s=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){e.removeChild(n),on(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=n}while(r);on(t)}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ws=Math.random().toString(36).slice(2),jt="__reactFiber$"+ws,fn="__reactProps$"+ws,It="__reactContainer$"+ws,jl="__reactEvents$"+ws,zp="__reactListeners$"+ws,Bp="__reactHandles$"+ws;function vr(e){var t=e[jt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[It]||r[jt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Dc(e);e!==null;){if(r=e[jt])return r;e=Dc(e)}return t}e=r,r=e.parentNode}return null}function Pn(e){return e=e[jt]||e[It],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function Ji(e){return e[fn]||null}var _l=[],Gr=-1;function ur(e){return{current:e}}function ie(e){0>Gr||(e.current=_l[Gr],_l[Gr]=null,Gr--)}function se(e,t){Gr++,_l[Gr]=e.current,e.current=t}var or={},Oe=ur(or),We=ur(!1),kr=or;function cs(e,t){var r=e.type.contextTypes;if(!r)return or;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n={},a;for(a in r)n[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function He(e){return e=e.childContextTypes,e!=null}function bi(){ie(We),ie(Oe)}function Mc(e,t,r){if(Oe.current!==or)throw Error(A(168));se(Oe,t),se(We,r)}function th(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var n in s)if(!(n in t))throw Error(A(108,Sm(e)||"Unknown",n));return ue({},r,s)}function ki(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||or,kr=Oe.current,se(Oe,e),se(We,We.current),!0}function Fc(e,t,r){var s=e.stateNode;if(!s)throw Error(A(169));r?(e=th(e,t,kr),s.__reactInternalMemoizedMergedChildContext=e,ie(We),ie(Oe),se(Oe,e)):ie(We),se(We,r)}var Pt=null,Yi=!1,Aa=!1;function rh(e){Pt===null?Pt=[e]:Pt.push(e)}function qp(e){Yi=!0,rh(e)}function dr(){if(!Aa&&Pt!==null){Aa=!0;var e=0,t=Z;try{var r=Pt;for(Z=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Pt=null,Yi=!1}catch(n){throw Pt!==null&&(Pt=Pt.slice(e+1)),Ed(ho,dr),n}finally{Z=t,Aa=!1}}return null}var Jr=[],Yr=0,Si=null,Ei=0,tt=[],rt=0,Sr=null,Tt=1,Rt="";function pr(e,t){Jr[Yr++]=Ei,Jr[Yr++]=Si,Si=e,Ei=t}function sh(e,t,r){tt[rt++]=Tt,tt[rt++]=Rt,tt[rt++]=Sr,Sr=e;var s=Tt;e=Rt;var n=32-mt(s)-1;s&=~(1<<n),r+=1;var a=32-mt(t)+n;if(30<a){var l=n-n%5;a=(s&(1<<l)-1).toString(32),s>>=l,n-=l,Tt=1<<32-mt(t)+n|r<<n|s,Rt=a+e}else Tt=1<<a|r<<n|s,Rt=e}function jo(e){e.return!==null&&(pr(e,1),sh(e,1,0))}function _o(e){for(;e===Si;)Si=Jr[--Yr],Jr[Yr]=null,Ei=Jr[--Yr],Jr[Yr]=null;for(;e===Sr;)Sr=tt[--rt],tt[rt]=null,Rt=tt[--rt],tt[rt]=null,Tt=tt[--rt],tt[rt]=null}var Ye=null,Je=null,ae=!1,ft=null;function nh(e,t){var r=st(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function zc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ye=e,Je=tr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ye=e,Je=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Sr!==null?{id:Tt,overflow:Rt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=st(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ye=e,Je=null,!0):!1;default:return!1}}function Nl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function bl(e){if(ae){var t=Je;if(t){var r=t;if(!zc(e,t)){if(Nl(e))throw Error(A(418));t=tr(r.nextSibling);var s=Ye;t&&zc(e,t)?nh(s,r):(e.flags=e.flags&-4097|2,ae=!1,Ye=e)}}else{if(Nl(e))throw Error(A(418));e.flags=e.flags&-4097|2,ae=!1,Ye=e}}}function Bc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ye=e}function Wn(e){if(e!==Ye)return!1;if(!ae)return Bc(e),ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vl(e.type,e.memoizedProps)),t&&(t=Je)){if(Nl(e))throw ih(),Error(A(418));for(;t;)nh(e,t),t=tr(t.nextSibling)}if(Bc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Je=tr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Je=null}}else Je=Ye?tr(e.stateNode.nextSibling):null;return!0}function ih(){for(var e=Je;e;)e=tr(e.nextSibling)}function us(){Je=Ye=null,ae=!1}function No(e){ft===null?ft=[e]:ft.push(e)}var Vp=Mt.ReactCurrentBatchConfig;function Os(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(A(309));var s=r.stateNode}if(!s)throw Error(A(147,e));var n=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var c=n.refs;l===null?delete c[a]:c[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(A(284));if(!r._owner)throw Error(A(290,e))}return e}function Hn(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qc(e){var t=e._init;return t(e._payload)}function ah(e){function t(x,m){if(e){var p=x.deletions;p===null?(x.deletions=[m],x.flags|=16):p.push(m)}}function r(x,m){if(!e)return null;for(;m!==null;)t(x,m),m=m.sibling;return null}function s(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function n(x,m){return x=ir(x,m),x.index=0,x.sibling=null,x}function a(x,m,p){return x.index=p,e?(p=x.alternate,p!==null?(p=p.index,p<m?(x.flags|=2,m):p):(x.flags|=2,m)):(x.flags|=1048576,m)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function c(x,m,p,_){return m===null||m.tag!==6?(m=Fa(p,x.mode,_),m.return=x,m):(m=n(m,p),m.return=x,m)}function o(x,m,p,_){var N=p.type;return N===Vr?d(x,m,p.props.children,_,p.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===qt&&qc(N)===m.type)?(_=n(m,p.props),_.ref=Os(x,m,p),_.return=x,_):(_=mi(p.type,p.key,p.props,null,x.mode,_),_.ref=Os(x,m,p),_.return=x,_)}function u(x,m,p,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=za(p,x.mode,_),m.return=x,m):(m=n(m,p.children||[]),m.return=x,m)}function d(x,m,p,_,N){return m===null||m.tag!==7?(m=Nr(p,x.mode,_,N),m.return=x,m):(m=n(m,p),m.return=x,m)}function h(x,m,p){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Fa(""+m,x.mode,p),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case $n:return p=mi(m.type,m.key,m.props,null,x.mode,p),p.ref=Os(x,null,m),p.return=x,p;case qr:return m=za(m,x.mode,p),m.return=x,m;case qt:var _=m._init;return h(x,_(m._payload),p)}if(Ds(m)||Es(m))return m=Nr(m,x.mode,p,null),m.return=x,m;Hn(x,m)}return null}function f(x,m,p,_){var N=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return N!==null?null:c(x,m,""+p,_);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case $n:return p.key===N?o(x,m,p,_):null;case qr:return p.key===N?u(x,m,p,_):null;case qt:return N=p._init,f(x,m,N(p._payload),_)}if(Ds(p)||Es(p))return N!==null?null:d(x,m,p,_,null);Hn(x,p)}return null}function y(x,m,p,_,N){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(p)||null,c(m,x,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $n:return x=x.get(_.key===null?p:_.key)||null,o(m,x,_,N);case qr:return x=x.get(_.key===null?p:_.key)||null,u(m,x,_,N);case qt:var E=_._init;return y(x,m,p,E(_._payload),N)}if(Ds(_)||Es(_))return x=x.get(p)||null,d(m,x,_,N,null);Hn(m,_)}return null}function g(x,m,p,_){for(var N=null,E=null,b=m,O=m=0,k=null;b!==null&&O<p.length;O++){b.index>O?(k=b,b=null):k=b.sibling;var S=f(x,b,p[O],_);if(S===null){b===null&&(b=k);break}e&&b&&S.alternate===null&&t(x,b),m=a(S,m,O),E===null?N=S:E.sibling=S,E=S,b=k}if(O===p.length)return r(x,b),ae&&pr(x,O),N;if(b===null){for(;O<p.length;O++)b=h(x,p[O],_),b!==null&&(m=a(b,m,O),E===null?N=b:E.sibling=b,E=b);return ae&&pr(x,O),N}for(b=s(x,b);O<p.length;O++)k=y(b,x,O,p[O],_),k!==null&&(e&&k.alternate!==null&&b.delete(k.key===null?O:k.key),m=a(k,m,O),E===null?N=k:E.sibling=k,E=k);return e&&b.forEach(function(W){return t(x,W)}),ae&&pr(x,O),N}function w(x,m,p,_){var N=Es(p);if(typeof N!="function")throw Error(A(150));if(p=N.call(p),p==null)throw Error(A(151));for(var E=N=null,b=m,O=m=0,k=null,S=p.next();b!==null&&!S.done;O++,S=p.next()){b.index>O?(k=b,b=null):k=b.sibling;var W=f(x,b,S.value,_);if(W===null){b===null&&(b=k);break}e&&b&&W.alternate===null&&t(x,b),m=a(W,m,O),E===null?N=W:E.sibling=W,E=W,b=k}if(S.done)return r(x,b),ae&&pr(x,O),N;if(b===null){for(;!S.done;O++,S=p.next())S=h(x,S.value,_),S!==null&&(m=a(S,m,O),E===null?N=S:E.sibling=S,E=S);return ae&&pr(x,O),N}for(b=s(x,b);!S.done;O++,S=p.next())S=y(b,x,O,S.value,_),S!==null&&(e&&S.alternate!==null&&b.delete(S.key===null?O:S.key),m=a(S,m,O),E===null?N=S:E.sibling=S,E=S);return e&&b.forEach(function(F){return t(x,F)}),ae&&pr(x,O),N}function v(x,m,p,_){if(typeof p=="object"&&p!==null&&p.type===Vr&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case $n:e:{for(var N=p.key,E=m;E!==null;){if(E.key===N){if(N=p.type,N===Vr){if(E.tag===7){r(x,E.sibling),m=n(E,p.props.children),m.return=x,x=m;break e}}else if(E.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===qt&&qc(N)===E.type){r(x,E.sibling),m=n(E,p.props),m.ref=Os(x,E,p),m.return=x,x=m;break e}r(x,E);break}else t(x,E);E=E.sibling}p.type===Vr?(m=Nr(p.props.children,x.mode,_,p.key),m.return=x,x=m):(_=mi(p.type,p.key,p.props,null,x.mode,_),_.ref=Os(x,m,p),_.return=x,x=_)}return l(x);case qr:e:{for(E=p.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){r(x,m.sibling),m=n(m,p.children||[]),m.return=x,x=m;break e}else{r(x,m);break}else t(x,m);m=m.sibling}m=za(p,x.mode,_),m.return=x,x=m}return l(x);case qt:return E=p._init,v(x,m,E(p._payload),_)}if(Ds(p))return g(x,m,p,_);if(Es(p))return w(x,m,p,_);Hn(x,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,m!==null&&m.tag===6?(r(x,m.sibling),m=n(m,p),m.return=x,x=m):(r(x,m),m=Fa(p,x.mode,_),m.return=x,x=m),l(x)):r(x,m)}return v}var ds=ah(!0),lh=ah(!1),Ci=ur(null),Pi=null,Xr=null,bo=null;function ko(){bo=Xr=Pi=null}function So(e){var t=Ci.current;ie(Ci),e._currentValue=t}function kl(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function is(e,t){Pi=e,bo=Xr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ve=!0),e.firstContext=null)}function at(e){var t=e._currentValue;if(bo!==e)if(e={context:e,memoizedValue:t,next:null},Xr===null){if(Pi===null)throw Error(A(308));Xr=e,Pi.dependencies={lanes:0,firstContext:e}}else Xr=Xr.next=e;return t}var wr=null;function Eo(e){wr===null?wr=[e]:wr.push(e)}function oh(e,t,r,s){var n=t.interleaved;return n===null?(r.next=r,Eo(t)):(r.next=n.next,n.next=r),t.interleaved=r,Ut(e,s)}function Ut(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Vt=!1;function Co(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ch(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function At(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,J&2){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,Ut(e,r)}return n=s.interleaved,n===null?(t.next=t,Eo(s)):(t.next=n.next,n.next=t),s.interleaved=t,Ut(e,r)}function oi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,fo(e,r)}}function Vc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?n=a=l:a=a.next=l,r=r.next}while(r!==null);a===null?n=a=t:a=a.next=t}else n=a=t;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ti(e,t,r,s){var n=e.updateQueue;Vt=!1;var a=n.firstBaseUpdate,l=n.lastBaseUpdate,c=n.shared.pending;if(c!==null){n.shared.pending=null;var o=c,u=o.next;o.next=null,l===null?a=u:l.next=u,l=o;var d=e.alternate;d!==null&&(d=d.updateQueue,c=d.lastBaseUpdate,c!==l&&(c===null?d.firstBaseUpdate=u:c.next=u,d.lastBaseUpdate=o))}if(a!==null){var h=n.baseState;l=0,d=u=o=null,c=a;do{var f=c.lane,y=c.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:y,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var g=e,w=c;switch(f=t,y=r,w.tag){case 1:if(g=w.payload,typeof g=="function"){h=g.call(y,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,f=typeof g=="function"?g.call(y,h,f):g,f==null)break e;h=ue({},h,f);break e;case 2:Vt=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,f=n.effects,f===null?n.effects=[c]:f.push(c))}else y={eventTime:y,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},d===null?(u=d=y,o=h):d=d.next=y,l|=f;if(c=c.next,c===null){if(c=n.shared.pending,c===null)break;f=c,c=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(!0);if(d===null&&(o=h),n.baseState=o,n.firstBaseUpdate=u,n.lastBaseUpdate=d,t=n.shared.interleaved,t!==null){n=t;do l|=n.lane,n=n.next;while(n!==t)}else a===null&&(n.shared.lanes=0);Cr|=l,e.lanes=l,e.memoizedState=h}}function Wc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(n!==null){if(s.callback=null,s=r,typeof n!="function")throw Error(A(191,n));n.call(s)}}}var Tn={},Nt=ur(Tn),mn=ur(Tn),pn=ur(Tn);function jr(e){if(e===Tn)throw Error(A(174));return e}function Po(e,t){switch(se(pn,t),se(mn,e),se(Nt,Tn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:il(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=il(t,e)}ie(Nt),se(Nt,t)}function hs(){ie(Nt),ie(mn),ie(pn)}function uh(e){jr(pn.current);var t=jr(Nt.current),r=il(t,e.type);t!==r&&(se(mn,e),se(Nt,r))}function To(e){mn.current===e&&(ie(Nt),ie(mn))}var oe=ur(0);function Ri(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var La=[];function Ro(){for(var e=0;e<La.length;e++)La[e]._workInProgressVersionPrimary=null;La.length=0}var ci=Mt.ReactCurrentDispatcher,$a=Mt.ReactCurrentBatchConfig,Er=0,ce=null,pe=null,ve=null,Oi=!1,Ks=!1,xn=0,Wp=0;function Ce(){throw Error(A(321))}function Oo(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!xt(e[r],t[r]))return!1;return!0}function Ao(e,t,r,s,n,a){if(Er=a,ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ci.current=e===null||e.memoizedState===null?Gp:Jp,e=r(s,n),Ks){a=0;do{if(Ks=!1,xn=0,25<=a)throw Error(A(301));a+=1,ve=pe=null,t.updateQueue=null,ci.current=Yp,e=r(s,n)}while(Ks)}if(ci.current=Ai,t=pe!==null&&pe.next!==null,Er=0,ve=pe=ce=null,Oi=!1,t)throw Error(A(300));return e}function Lo(){var e=xn!==0;return xn=0,e}function vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?ce.memoizedState=ve=e:ve=ve.next=e,ve}function lt(){if(pe===null){var e=ce.alternate;e=e!==null?e.memoizedState:null}else e=pe.next;var t=ve===null?ce.memoizedState:ve.next;if(t!==null)ve=t,pe=e;else{if(e===null)throw Error(A(310));pe=e,e={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},ve===null?ce.memoizedState=ve=e:ve=ve.next=e}return ve}function yn(e,t){return typeof t=="function"?t(e):t}function Ia(e){var t=lt(),r=t.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var s=pe,n=s.baseQueue,a=r.pending;if(a!==null){if(n!==null){var l=n.next;n.next=a.next,a.next=l}s.baseQueue=n=a,r.pending=null}if(n!==null){a=n.next,s=s.baseState;var c=l=null,o=null,u=a;do{var d=u.lane;if((Er&d)===d)o!==null&&(o=o.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};o===null?(c=o=h,l=s):o=o.next=h,ce.lanes|=d,Cr|=d}u=u.next}while(u!==null&&u!==a);o===null?l=s:o.next=c,xt(s,t.memoizedState)||(Ve=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=o,r.lastRenderedState=s}if(e=r.interleaved,e!==null){n=e;do a=n.lane,ce.lanes|=a,Cr|=a,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ua(e){var t=lt(),r=t.queue;if(r===null)throw Error(A(311));r.lastRenderedReducer=e;var s=r.dispatch,n=r.pending,a=t.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do a=e(a,l.action),l=l.next;while(l!==n);xt(a,t.memoizedState)||(Ve=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,s]}function dh(){}function hh(e,t){var r=ce,s=lt(),n=t(),a=!xt(s.memoizedState,n);if(a&&(s.memoizedState=n,Ve=!0),s=s.queue,$o(ph.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||ve!==null&&ve.memoizedState.tag&1){if(r.flags|=2048,gn(9,mh.bind(null,r,s,n,t),void 0,null),we===null)throw Error(A(349));Er&30||fh(r,t,n)}return n}function fh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ce.updateQueue,t===null?(t={lastEffect:null,stores:null},ce.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function mh(e,t,r,s){t.value=r,t.getSnapshot=s,xh(t)&&yh(e)}function ph(e,t,r){return r(function(){xh(t)&&yh(e)})}function xh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!xt(e,r)}catch{return!0}}function yh(e){var t=Ut(e,1);t!==null&&pt(t,e,1,-1)}function Hc(e){var t=vt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:e},t.queue=e,e=e.dispatch=Kp.bind(null,ce,e),[t.memoizedState,e]}function gn(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=ce.updateQueue,t===null?(t={lastEffect:null,stores:null},ce.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function gh(){return lt().memoizedState}function ui(e,t,r,s){var n=vt();ce.flags|=e,n.memoizedState=gn(1|t,r,void 0,s===void 0?null:s)}function Xi(e,t,r,s){var n=lt();s=s===void 0?null:s;var a=void 0;if(pe!==null){var l=pe.memoizedState;if(a=l.destroy,s!==null&&Oo(s,l.deps)){n.memoizedState=gn(t,r,a,s);return}}ce.flags|=e,n.memoizedState=gn(1|t,r,a,s)}function Qc(e,t){return ui(8390656,8,e,t)}function $o(e,t){return Xi(2048,8,e,t)}function vh(e,t){return Xi(4,2,e,t)}function wh(e,t){return Xi(4,4,e,t)}function jh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _h(e,t,r){return r=r!=null?r.concat([e]):null,Xi(4,4,jh.bind(null,t,e),r)}function Io(){}function Nh(e,t){var r=lt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Oo(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function bh(e,t){var r=lt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Oo(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function kh(e,t,r){return Er&21?(xt(r,t)||(r=Td(),ce.lanes|=r,Cr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ve=!0),e.memoizedState=r)}function Hp(e,t){var r=Z;Z=r!==0&&4>r?r:4,e(!0);var s=$a.transition;$a.transition={};try{e(!1),t()}finally{Z=r,$a.transition=s}}function Sh(){return lt().memoizedState}function Qp(e,t,r){var s=nr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Eh(e))Ch(t,r);else if(r=oh(e,t,r,s),r!==null){var n=Ue();pt(r,e,s,n),Ph(r,t,s)}}function Kp(e,t,r){var s=nr(e),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Eh(e))Ch(t,n);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,c=a(l,r);if(n.hasEagerState=!0,n.eagerState=c,xt(c,l)){var o=t.interleaved;o===null?(n.next=n,Eo(t)):(n.next=o.next,o.next=n),t.interleaved=n;return}}catch{}finally{}r=oh(e,t,n,s),r!==null&&(n=Ue(),pt(r,e,s,n),Ph(r,t,s))}}function Eh(e){var t=e.alternate;return e===ce||t!==null&&t===ce}function Ch(e,t){Ks=Oi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ph(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,fo(e,r)}}var Ai={readContext:at,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},Gp={readContext:at,useCallback:function(e,t){return vt().memoizedState=[e,t===void 0?null:t],e},useContext:at,useEffect:Qc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ui(4194308,4,jh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ui(4194308,4,e,t)},useInsertionEffect:function(e,t){return ui(4,2,e,t)},useMemo:function(e,t){var r=vt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=vt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Qp.bind(null,ce,e),[s.memoizedState,e]},useRef:function(e){var t=vt();return e={current:e},t.memoizedState=e},useState:Hc,useDebugValue:Io,useDeferredValue:function(e){return vt().memoizedState=e},useTransition:function(){var e=Hc(!1),t=e[0];return e=Hp.bind(null,e[1]),vt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=ce,n=vt();if(ae){if(r===void 0)throw Error(A(407));r=r()}else{if(r=t(),we===null)throw Error(A(349));Er&30||fh(s,t,r)}n.memoizedState=r;var a={value:r,getSnapshot:t};return n.queue=a,Qc(ph.bind(null,s,a,e),[e]),s.flags|=2048,gn(9,mh.bind(null,s,a,r,t),void 0,null),r},useId:function(){var e=vt(),t=we.identifierPrefix;if(ae){var r=Rt,s=Tt;r=(s&~(1<<32-mt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=xn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Wp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jp={readContext:at,useCallback:Nh,useContext:at,useEffect:$o,useImperativeHandle:_h,useInsertionEffect:vh,useLayoutEffect:wh,useMemo:bh,useReducer:Ia,useRef:gh,useState:function(){return Ia(yn)},useDebugValue:Io,useDeferredValue:function(e){var t=lt();return kh(t,pe.memoizedState,e)},useTransition:function(){var e=Ia(yn)[0],t=lt().memoizedState;return[e,t]},useMutableSource:dh,useSyncExternalStore:hh,useId:Sh,unstable_isNewReconciler:!1},Yp={readContext:at,useCallback:Nh,useContext:at,useEffect:$o,useImperativeHandle:_h,useInsertionEffect:vh,useLayoutEffect:wh,useMemo:bh,useReducer:Ua,useRef:gh,useState:function(){return Ua(yn)},useDebugValue:Io,useDeferredValue:function(e){var t=lt();return pe===null?t.memoizedState=e:kh(t,pe.memoizedState,e)},useTransition:function(){var e=Ua(yn)[0],t=lt().memoizedState;return[e,t]},useMutableSource:dh,useSyncExternalStore:hh,useId:Sh,unstable_isNewReconciler:!1};function ut(e,t){if(e&&e.defaultProps){t=ue({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Sl(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:ue({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Zi={isMounted:function(e){return(e=e._reactInternals)?Or(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Ue(),n=nr(e),a=At(s,n);a.payload=t,r!=null&&(a.callback=r),t=rr(e,a,n),t!==null&&(pt(t,e,n,s),oi(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Ue(),n=nr(e),a=At(s,n);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=rr(e,a,n),t!==null&&(pt(t,e,n,s),oi(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ue(),s=nr(e),n=At(r,s);n.tag=2,t!=null&&(n.callback=t),t=rr(e,n,s),t!==null&&(pt(t,e,s,r),oi(t,e,s))}};function Kc(e,t,r,s,n,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,l):t.prototype&&t.prototype.isPureReactComponent?!un(r,s)||!un(n,a):!0}function Th(e,t,r){var s=!1,n=or,a=t.contextType;return typeof a=="object"&&a!==null?a=at(a):(n=He(t)?kr:Oe.current,s=t.contextTypes,a=(s=s!=null)?cs(e,n):or),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zi,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),t}function Gc(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Zi.enqueueReplaceState(t,t.state,null)}function El(e,t,r,s){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Co(e);var a=t.contextType;typeof a=="object"&&a!==null?n.context=at(a):(a=He(t)?kr:Oe.current,n.context=cs(e,a)),n.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Sl(e,t,a,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Zi.enqueueReplaceState(n,n.state,null),Ti(e,r,n,s),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function fs(e,t){try{var r="",s=t;do r+=km(s),s=s.return;while(s);var n=r}catch(a){n=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:n,digest:null}}function Da(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Cl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Xp=typeof WeakMap=="function"?WeakMap:Map;function Rh(e,t,r){r=At(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){$i||($i=!0,Dl=s),Cl(e,t)},r}function Oh(e,t,r){r=At(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var n=t.value;r.payload=function(){return s(n)},r.callback=function(){Cl(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Cl(e,t),typeof s!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function Jc(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Xp;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(r)||(n.add(r),e=hx.bind(null,e,t,r),t.then(e,e))}function Yc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xc(e,t,r,s,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=At(-1,1),t.tag=2,rr(r,t,1))),r.lanes|=1),e)}var Zp=Mt.ReactCurrentOwner,Ve=!1;function $e(e,t,r,s){t.child=e===null?lh(t,null,r,s):ds(t,e.child,r,s)}function Zc(e,t,r,s,n){r=r.render;var a=t.ref;return is(t,n),s=Ao(e,t,r,s,a,n),r=Lo(),e!==null&&!Ve?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Dt(e,t,n)):(ae&&r&&jo(t),t.flags|=1,$e(e,t,s,n),t.child)}function eu(e,t,r,s,n){if(e===null){var a=r.type;return typeof a=="function"&&!Vo(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Ah(e,t,a,s,n)):(e=mi(r.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&n)){var l=a.memoizedProps;if(r=r.compare,r=r!==null?r:un,r(l,s)&&e.ref===t.ref)return Dt(e,t,n)}return t.flags|=1,e=ir(a,s),e.ref=t.ref,e.return=t,t.child=e}function Ah(e,t,r,s,n){if(e!==null){var a=e.memoizedProps;if(un(a,s)&&e.ref===t.ref)if(Ve=!1,t.pendingProps=s=a,(e.lanes&n)!==0)e.flags&131072&&(Ve=!0);else return t.lanes=e.lanes,Dt(e,t,n)}return Pl(e,t,r,s,n)}function Lh(e,t,r){var s=t.pendingProps,n=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(es,Ge),Ge|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,se(es,Ge),Ge|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,se(es,Ge),Ge|=s}else a!==null?(s=a.baseLanes|r,t.memoizedState=null):s=r,se(es,Ge),Ge|=s;return $e(e,t,n,r),t.child}function $h(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Pl(e,t,r,s,n){var a=He(r)?kr:Oe.current;return a=cs(t,a),is(t,n),r=Ao(e,t,r,s,a,n),s=Lo(),e!==null&&!Ve?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Dt(e,t,n)):(ae&&s&&jo(t),t.flags|=1,$e(e,t,r,n),t.child)}function tu(e,t,r,s,n){if(He(r)){var a=!0;ki(t)}else a=!1;if(is(t,n),t.stateNode===null)di(e,t),Th(t,r,s),El(t,r,s,n),s=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var o=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=at(u):(u=He(r)?kr:Oe.current,u=cs(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==s||o!==u)&&Gc(t,l,s,u),Vt=!1;var f=t.memoizedState;l.state=f,Ti(t,s,l,n),o=t.memoizedState,c!==s||f!==o||We.current||Vt?(typeof d=="function"&&(Sl(t,r,d,s),o=t.memoizedState),(c=Vt||Kc(t,r,c,s,f,o,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=o),l.props=s,l.state=o,l.context=u,s=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,ch(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:ut(t.type,c),l.props=u,h=t.pendingProps,f=l.context,o=r.contextType,typeof o=="object"&&o!==null?o=at(o):(o=He(r)?kr:Oe.current,o=cs(t,o));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==h||f!==o)&&Gc(t,l,s,o),Vt=!1,f=t.memoizedState,l.state=f,Ti(t,s,l,n);var g=t.memoizedState;c!==h||f!==g||We.current||Vt?(typeof y=="function"&&(Sl(t,r,y,s),g=t.memoizedState),(u=Vt||Kc(t,r,u,s,f,g,o)||!1)?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,g,o),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,g,o)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),l.props=s,l.state=g,l.context=o,s=u):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return Tl(e,t,r,s,a,n)}function Tl(e,t,r,s,n,a){$h(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return n&&Fc(t,r,!1),Dt(e,t,a);s=t.stateNode,Zp.current=t;var c=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=ds(t,e.child,null,a),t.child=ds(t,null,c,a)):$e(e,t,c,a),t.memoizedState=s.state,n&&Fc(t,r,!0),t.child}function Ih(e){var t=e.stateNode;t.pendingContext?Mc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mc(e,t.context,!1),Po(e,t.containerInfo)}function ru(e,t,r,s,n){return us(),No(n),t.flags|=256,$e(e,t,r,s),t.child}var Rl={dehydrated:null,treeContext:null,retryLane:0};function Ol(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uh(e,t,r){var s=t.pendingProps,n=oe.current,a=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(n&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),se(oe,n&1),e===null)return bl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=ra(l,s,0,null),e=Nr(e,s,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ol(r),t.memoizedState=Rl,e):Uo(t,l));if(n=e.memoizedState,n!==null&&(c=n.dehydrated,c!==null))return ex(e,t,l,s,c,n,r);if(a){a=s.fallback,l=t.mode,n=e.child,c=n.sibling;var o={mode:"hidden",children:s.children};return!(l&1)&&t.child!==n?(s=t.child,s.childLanes=0,s.pendingProps=o,t.deletions=null):(s=ir(n,o),s.subtreeFlags=n.subtreeFlags&14680064),c!==null?a=ir(c,a):(a=Nr(a,l,r,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=e.child.memoizedState,l=l===null?Ol(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=Rl,s}return a=e.child,e=a.sibling,s=ir(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Uo(e,t){return t=ra({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qn(e,t,r,s){return s!==null&&No(s),ds(t,e.child,null,r),e=Uo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ex(e,t,r,s,n,a,l){if(r)return t.flags&256?(t.flags&=-257,s=Da(Error(A(422))),Qn(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,n=t.mode,s=ra({mode:"visible",children:s.children},n,0,null),a=Nr(a,n,l,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&ds(t,e.child,null,l),t.child.memoizedState=Ol(l),t.memoizedState=Rl,a);if(!(t.mode&1))return Qn(e,t,l,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var c=s.dgst;return s=c,a=Error(A(419)),s=Da(a,s,void 0),Qn(e,t,l,s)}if(c=(l&e.childLanes)!==0,Ve||c){if(s=we,s!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|l)?0:n,n!==0&&n!==a.retryLane&&(a.retryLane=n,Ut(e,n),pt(s,e,n,-1))}return qo(),s=Da(Error(A(421))),Qn(e,t,l,s)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=fx.bind(null,e),n._reactRetry=t,null):(e=a.treeContext,Je=tr(n.nextSibling),Ye=t,ae=!0,ft=null,e!==null&&(tt[rt++]=Tt,tt[rt++]=Rt,tt[rt++]=Sr,Tt=e.id,Rt=e.overflow,Sr=t),t=Uo(t,s.children),t.flags|=4096,t)}function su(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),kl(e.return,t,r)}function Ma(e,t,r,s,n){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=n)}function Dh(e,t,r){var s=t.pendingProps,n=s.revealOrder,a=s.tail;if($e(e,t,s.children,r),s=oe.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&su(e,r,t);else if(e.tag===19)su(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(se(oe,s),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Ri(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Ma(t,!1,n,r,a);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Ri(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Ma(t,!0,r,null,a);break;case"together":Ma(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function di(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Dt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Cr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,r=ir(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ir(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function tx(e,t,r){switch(t.tag){case 3:Ih(t),us();break;case 5:uh(t);break;case 1:He(t.type)&&ki(t);break;case 4:Po(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;se(Ci,s._currentValue),s._currentValue=n;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(se(oe,oe.current&1),t.flags|=128,null):r&t.child.childLanes?Uh(e,t,r):(se(oe,oe.current&1),e=Dt(e,t,r),e!==null?e.sibling:null);se(oe,oe.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return Dh(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),se(oe,oe.current),s)break;return null;case 22:case 23:return t.lanes=0,Lh(e,t,r)}return Dt(e,t,r)}var Mh,Al,Fh,zh;Mh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Al=function(){};Fh=function(e,t,r,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,jr(Nt.current);var a=null;switch(r){case"input":n=tl(e,n),s=tl(e,s),a=[];break;case"select":n=ue({},n,{value:void 0}),s=ue({},s,{value:void 0}),a=[];break;case"textarea":n=nl(e,n),s=nl(e,s),a=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ni)}al(r,s);var l;r=null;for(u in n)if(!s.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var c=n[u];for(l in c)c.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(rn.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in s){var o=s[u];if(c=n!=null?n[u]:void 0,s.hasOwnProperty(u)&&o!==c&&(o!=null||c!=null))if(u==="style")if(c){for(l in c)!c.hasOwnProperty(l)||o&&o.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in o)o.hasOwnProperty(l)&&c[l]!==o[l]&&(r||(r={}),r[l]=o[l])}else r||(a||(a=[]),a.push(u,r)),r=o;else u==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,c=c?c.__html:void 0,o!=null&&c!==o&&(a=a||[]).push(u,o)):u==="children"?typeof o!="string"&&typeof o!="number"||(a=a||[]).push(u,""+o):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(rn.hasOwnProperty(u)?(o!=null&&u==="onScroll"&&ne("scroll",e),a||c===o||(a=[])):(a=a||[]).push(u,o))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};zh=function(e,t,r,s){r!==s&&(t.flags|=4)};function As(e,t){if(!ae)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Pe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function rx(e,t,r){var s=t.pendingProps;switch(_o(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(t),null;case 1:return He(t.type)&&bi(),Pe(t),null;case 3:return s=t.stateNode,hs(),ie(We),ie(Oe),Ro(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Wn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ft!==null&&(zl(ft),ft=null))),Al(e,t),Pe(t),null;case 5:To(t);var n=jr(pn.current);if(r=t.type,e!==null&&t.stateNode!=null)Fh(e,t,r,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(A(166));return Pe(t),null}if(e=jr(Nt.current),Wn(t)){s=t.stateNode,r=t.type;var a=t.memoizedProps;switch(s[jt]=t,s[fn]=a,e=(t.mode&1)!==0,r){case"dialog":ne("cancel",s),ne("close",s);break;case"iframe":case"object":case"embed":ne("load",s);break;case"video":case"audio":for(n=0;n<Fs.length;n++)ne(Fs[n],s);break;case"source":ne("error",s);break;case"img":case"image":case"link":ne("error",s),ne("load",s);break;case"details":ne("toggle",s);break;case"input":hc(s,a),ne("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},ne("invalid",s);break;case"textarea":mc(s,a),ne("invalid",s)}al(r,a),n=null;for(var l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="children"?typeof c=="string"?s.textContent!==c&&(a.suppressHydrationWarning!==!0&&Vn(s.textContent,c,e),n=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&Vn(s.textContent,c,e),n=["children",""+c]):rn.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&ne("scroll",s)}switch(r){case"input":In(s),fc(s,a,!0);break;case"textarea":In(s),pc(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Ni)}s=n,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pd(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(r,{is:s.is}):(e=l.createElement(r),r==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,r),e[jt]=t,e[fn]=s,Mh(e,t,!1,!1),t.stateNode=e;e:{switch(l=ll(r,s),r){case"dialog":ne("cancel",e),ne("close",e),n=s;break;case"iframe":case"object":case"embed":ne("load",e),n=s;break;case"video":case"audio":for(n=0;n<Fs.length;n++)ne(Fs[n],e);n=s;break;case"source":ne("error",e),n=s;break;case"img":case"image":case"link":ne("error",e),ne("load",e),n=s;break;case"details":ne("toggle",e),n=s;break;case"input":hc(e,s),n=tl(e,s),ne("invalid",e);break;case"option":n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=ue({},s,{value:void 0}),ne("invalid",e);break;case"textarea":mc(e,s),n=nl(e,s),ne("invalid",e);break;default:n=s}al(r,n),c=n;for(a in c)if(c.hasOwnProperty(a)){var o=c[a];a==="style"?gd(e,o):a==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&xd(e,o)):a==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&sn(e,o):typeof o=="number"&&sn(e,""+o):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(rn.hasOwnProperty(a)?o!=null&&a==="onScroll"&&ne("scroll",e):o!=null&&ao(e,a,o,l))}switch(r){case"input":In(e),fc(e,s,!1);break;case"textarea":In(e),pc(e);break;case"option":s.value!=null&&e.setAttribute("value",""+lr(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?ts(e,!!s.multiple,a,!1):s.defaultValue!=null&&ts(e,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Ni)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Pe(t),null;case 6:if(e&&t.stateNode!=null)zh(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(A(166));if(r=jr(pn.current),jr(Nt.current),Wn(t)){if(s=t.stateNode,r=t.memoizedProps,s[jt]=t,(a=s.nodeValue!==r)&&(e=Ye,e!==null))switch(e.tag){case 3:Vn(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Vn(s.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[jt]=t,t.stateNode=s}return Pe(t),null;case 13:if(ie(oe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ae&&Je!==null&&t.mode&1&&!(t.flags&128))ih(),us(),t.flags|=98560,a=!1;else if(a=Wn(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(A(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(A(317));a[jt]=t}else us(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Pe(t),a=!1}else ft!==null&&(zl(ft),ft=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||oe.current&1?xe===0&&(xe=3):qo())),t.updateQueue!==null&&(t.flags|=4),Pe(t),null);case 4:return hs(),Al(e,t),e===null&&dn(t.stateNode.containerInfo),Pe(t),null;case 10:return So(t.type._context),Pe(t),null;case 17:return He(t.type)&&bi(),Pe(t),null;case 19:if(ie(oe),a=t.memoizedState,a===null)return Pe(t),null;if(s=(t.flags&128)!==0,l=a.rendering,l===null)if(s)As(a,!1);else{if(xe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ri(e),l!==null){for(t.flags|=128,As(a,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)a=r,e=s,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return se(oe,oe.current&1|2),t.child}e=e.sibling}a.tail!==null&&he()>ms&&(t.flags|=128,s=!0,As(a,!1),t.lanes=4194304)}else{if(!s)if(e=Ri(l),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),As(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!ae)return Pe(t),null}else 2*he()-a.renderingStartTime>ms&&r!==1073741824&&(t.flags|=128,s=!0,As(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(r=a.last,r!==null?r.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=he(),t.sibling=null,r=oe.current,se(oe,s?r&1|2:r&1),t):(Pe(t),null);case 22:case 23:return Bo(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Ge&1073741824&&(Pe(t),t.subtreeFlags&6&&(t.flags|=8192)):Pe(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function sx(e,t){switch(_o(t),t.tag){case 1:return He(t.type)&&bi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hs(),ie(We),ie(Oe),Ro(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return To(t),null;case 13:if(ie(oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));us()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ie(oe),null;case 4:return hs(),null;case 10:return So(t.type._context),null;case 22:case 23:return Bo(),null;case 24:return null;default:return null}}var Kn=!1,Re=!1,nx=typeof WeakSet=="function"?WeakSet:Set,L=null;function Zr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){de(e,t,s)}else r.current=null}function Ll(e,t,r){try{r()}catch(s){de(e,t,s)}}var nu=!1;function ix(e,t){if(yl=wi,e=Hd(),wo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var l=0,c=-1,o=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var y;h!==r||n!==0&&h.nodeType!==3||(c=l+n),h!==a||s!==0&&h.nodeType!==3||(o=l+s),h.nodeType===3&&(l+=h.nodeValue.length),(y=h.firstChild)!==null;)f=h,h=y;for(;;){if(h===e)break t;if(f===r&&++u===n&&(c=l),f===a&&++d===s&&(o=l),(y=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=y}r=c===-1||o===-1?null:{start:c,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(gl={focusedElem:e,selectionRange:r},wi=!1,L=t;L!==null;)if(t=L,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,L=e;else for(;L!==null;){t=L;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,v=g.memoizedState,x=t.stateNode,m=x.getSnapshotBeforeUpdate(t.elementType===t.type?w:ut(t.type,w),v);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(_){de(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,L=e;break}L=t.return}return g=nu,nu=!1,g}function Gs(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&e)===e){var a=n.destroy;n.destroy=void 0,a!==void 0&&Ll(t,r,a)}n=n.next}while(n!==s)}}function ea(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function $l(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Bh(e){var t=e.alternate;t!==null&&(e.alternate=null,Bh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jt],delete t[fn],delete t[jl],delete t[zp],delete t[Bp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qh(e){return e.tag===5||e.tag===3||e.tag===4}function iu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Il(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ni));else if(s!==4&&(e=e.child,e!==null))for(Il(e,t,r),e=e.sibling;e!==null;)Il(e,t,r),e=e.sibling}function Ul(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Ul(e,t,r),e=e.sibling;e!==null;)Ul(e,t,r),e=e.sibling}var Ne=null,dt=!1;function zt(e,t,r){for(r=r.child;r!==null;)Vh(e,t,r),r=r.sibling}function Vh(e,t,r){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Hi,r)}catch{}switch(r.tag){case 5:Re||Zr(r,t);case 6:var s=Ne,n=dt;Ne=null,zt(e,t,r),Ne=s,dt=n,Ne!==null&&(dt?(e=Ne,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ne.removeChild(r.stateNode));break;case 18:Ne!==null&&(dt?(e=Ne,r=r.stateNode,e.nodeType===8?Oa(e.parentNode,r):e.nodeType===1&&Oa(e,r),on(e)):Oa(Ne,r.stateNode));break;case 4:s=Ne,n=dt,Ne=r.stateNode.containerInfo,dt=!0,zt(e,t,r),Ne=s,dt=n;break;case 0:case 11:case 14:case 15:if(!Re&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var a=n,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Ll(r,t,l),n=n.next}while(n!==s)}zt(e,t,r);break;case 1:if(!Re&&(Zr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(c){de(r,t,c)}zt(e,t,r);break;case 21:zt(e,t,r);break;case 22:r.mode&1?(Re=(s=Re)||r.memoizedState!==null,zt(e,t,r),Re=s):zt(e,t,r);break;default:zt(e,t,r)}}function au(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new nx),t.forEach(function(s){var n=mx.bind(null,e,s);r.has(s)||(r.add(s),s.then(n,n))})}}function ot(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s];try{var a=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:Ne=c.stateNode,dt=!1;break e;case 3:Ne=c.stateNode.containerInfo,dt=!0;break e;case 4:Ne=c.stateNode.containerInfo,dt=!0;break e}c=c.return}if(Ne===null)throw Error(A(160));Vh(a,l,n),Ne=null,dt=!1;var o=n.alternate;o!==null&&(o.return=null),n.return=null}catch(u){de(n,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wh(t,e),t=t.sibling}function Wh(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ot(t,e),gt(e),s&4){try{Gs(3,e,e.return),ea(3,e)}catch(w){de(e,e.return,w)}try{Gs(5,e,e.return)}catch(w){de(e,e.return,w)}}break;case 1:ot(t,e),gt(e),s&512&&r!==null&&Zr(r,r.return);break;case 5:if(ot(t,e),gt(e),s&512&&r!==null&&Zr(r,r.return),e.flags&32){var n=e.stateNode;try{sn(n,"")}catch(w){de(e,e.return,w)}}if(s&4&&(n=e.stateNode,n!=null)){var a=e.memoizedProps,l=r!==null?r.memoizedProps:a,c=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&fd(n,a),ll(c,l);var u=ll(c,a);for(l=0;l<o.length;l+=2){var d=o[l],h=o[l+1];d==="style"?gd(n,h):d==="dangerouslySetInnerHTML"?xd(n,h):d==="children"?sn(n,h):ao(n,d,h,u)}switch(c){case"input":rl(n,a);break;case"textarea":md(n,a);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?ts(n,!!a.multiple,y,!1):f!==!!a.multiple&&(a.defaultValue!=null?ts(n,!!a.multiple,a.defaultValue,!0):ts(n,!!a.multiple,a.multiple?[]:"",!1))}n[fn]=a}catch(w){de(e,e.return,w)}}break;case 6:if(ot(t,e),gt(e),s&4){if(e.stateNode===null)throw Error(A(162));n=e.stateNode,a=e.memoizedProps;try{n.nodeValue=a}catch(w){de(e,e.return,w)}}break;case 3:if(ot(t,e),gt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{on(t.containerInfo)}catch(w){de(e,e.return,w)}break;case 4:ot(t,e),gt(e);break;case 13:ot(t,e),gt(e),n=e.child,n.flags&8192&&(a=n.memoizedState!==null,n.stateNode.isHidden=a,!a||n.alternate!==null&&n.alternate.memoizedState!==null||(Fo=he())),s&4&&au(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Re=(u=Re)||d,ot(t,e),Re=u):ot(t,e),gt(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(L=e,d=e.child;d!==null;){for(h=L=d;L!==null;){switch(f=L,y=f.child,f.tag){case 0:case 11:case 14:case 15:Gs(4,f,f.return);break;case 1:Zr(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){s=f,r=f.return;try{t=s,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(w){de(s,r,w)}}break;case 5:Zr(f,f.return);break;case 22:if(f.memoizedState!==null){ou(h);continue}}y!==null?(y.return=f,L=y):ou(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{n=h.stateNode,u?(a=n.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=h.stateNode,o=h.memoizedProps.style,l=o!=null&&o.hasOwnProperty("display")?o.display:null,c.style.display=yd("display",l))}catch(w){de(e,e.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){de(e,e.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ot(t,e),gt(e),s&4&&au(e);break;case 21:break;default:ot(t,e),gt(e)}}function gt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(qh(r)){var s=r;break e}r=r.return}throw Error(A(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(sn(n,""),s.flags&=-33);var a=iu(e);Ul(e,a,n);break;case 3:case 4:var l=s.stateNode.containerInfo,c=iu(e);Il(e,c,l);break;default:throw Error(A(161))}}catch(o){de(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ax(e,t,r){L=e,Hh(e)}function Hh(e,t,r){for(var s=(e.mode&1)!==0;L!==null;){var n=L,a=n.child;if(n.tag===22&&s){var l=n.memoizedState!==null||Kn;if(!l){var c=n.alternate,o=c!==null&&c.memoizedState!==null||Re;c=Kn;var u=Re;if(Kn=l,(Re=o)&&!u)for(L=n;L!==null;)l=L,o=l.child,l.tag===22&&l.memoizedState!==null?cu(n):o!==null?(o.return=l,L=o):cu(n);for(;a!==null;)L=a,Hh(a),a=a.sibling;L=n,Kn=c,Re=u}lu(e)}else n.subtreeFlags&8772&&a!==null?(a.return=n,L=a):lu(e)}}function lu(e){for(;L!==null;){var t=L;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Re||ea(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Re)if(r===null)s.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:ut(t.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Wc(t,a,s);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Wc(t,l,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&on(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}Re||t.flags&512&&$l(t)}catch(f){de(t,t.return,f)}}if(t===e){L=null;break}if(r=t.sibling,r!==null){r.return=t.return,L=r;break}L=t.return}}function ou(e){for(;L!==null;){var t=L;if(t===e){L=null;break}var r=t.sibling;if(r!==null){r.return=t.return,L=r;break}L=t.return}}function cu(e){for(;L!==null;){var t=L;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ea(4,t)}catch(o){de(t,r,o)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var n=t.return;try{s.componentDidMount()}catch(o){de(t,n,o)}}var a=t.return;try{$l(t)}catch(o){de(t,a,o)}break;case 5:var l=t.return;try{$l(t)}catch(o){de(t,l,o)}}}catch(o){de(t,t.return,o)}if(t===e){L=null;break}var c=t.sibling;if(c!==null){c.return=t.return,L=c;break}L=t.return}}var lx=Math.ceil,Li=Mt.ReactCurrentDispatcher,Do=Mt.ReactCurrentOwner,nt=Mt.ReactCurrentBatchConfig,J=0,we=null,me=null,be=0,Ge=0,es=ur(0),xe=0,vn=null,Cr=0,ta=0,Mo=0,Js=null,Be=null,Fo=0,ms=1/0,Et=null,$i=!1,Dl=null,sr=null,Gn=!1,Jt=null,Ii=0,Ys=0,Ml=null,hi=-1,fi=0;function Ue(){return J&6?he():hi!==-1?hi:hi=he()}function nr(e){return e.mode&1?J&2&&be!==0?be&-be:Vp.transition!==null?(fi===0&&(fi=Td()),fi):(e=Z,e!==0||(e=window.event,e=e===void 0?16:Ud(e.type)),e):1}function pt(e,t,r,s){if(50<Ys)throw Ys=0,Ml=null,Error(A(185));En(e,r,s),(!(J&2)||e!==we)&&(e===we&&(!(J&2)&&(ta|=r),xe===4&&Qt(e,be)),Qe(e,s),r===1&&J===0&&!(t.mode&1)&&(ms=he()+500,Yi&&dr()))}function Qe(e,t){var r=e.callbackNode;Vm(e,t);var s=vi(e,e===we?be:0);if(s===0)r!==null&&gc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&gc(r),t===1)e.tag===0?qp(uu.bind(null,e)):rh(uu.bind(null,e)),Mp(function(){!(J&6)&&dr()}),r=null;else{switch(Rd(s)){case 1:r=ho;break;case 4:r=Cd;break;case 16:r=gi;break;case 536870912:r=Pd;break;default:r=gi}r=ef(r,Qh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Qh(e,t){if(hi=-1,fi=0,J&6)throw Error(A(327));var r=e.callbackNode;if(as()&&e.callbackNode!==r)return null;var s=vi(e,e===we?be:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Ui(e,s);else{t=s;var n=J;J|=2;var a=Gh();(we!==e||be!==t)&&(Et=null,ms=he()+500,_r(e,t));do try{ux();break}catch(c){Kh(e,c)}while(!0);ko(),Li.current=a,J=n,me!==null?t=0:(we=null,be=0,t=xe)}if(t!==0){if(t===2&&(n=hl(e),n!==0&&(s=n,t=Fl(e,n))),t===1)throw r=vn,_r(e,0),Qt(e,s),Qe(e,he()),r;if(t===6)Qt(e,s);else{if(n=e.current.alternate,!(s&30)&&!ox(n)&&(t=Ui(e,s),t===2&&(a=hl(e),a!==0&&(s=a,t=Fl(e,a))),t===1))throw r=vn,_r(e,0),Qt(e,s),Qe(e,he()),r;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(A(345));case 2:xr(e,Be,Et);break;case 3:if(Qt(e,s),(s&130023424)===s&&(t=Fo+500-he(),10<t)){if(vi(e,0)!==0)break;if(n=e.suspendedLanes,(n&s)!==s){Ue(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=wl(xr.bind(null,e,Be,Et),t);break}xr(e,Be,Et);break;case 4:if(Qt(e,s),(s&4194240)===s)break;for(t=e.eventTimes,n=-1;0<s;){var l=31-mt(s);a=1<<l,l=t[l],l>n&&(n=l),s&=~a}if(s=n,s=he()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*lx(s/1960))-s,10<s){e.timeoutHandle=wl(xr.bind(null,e,Be,Et),s);break}xr(e,Be,Et);break;case 5:xr(e,Be,Et);break;default:throw Error(A(329))}}}return Qe(e,he()),e.callbackNode===r?Qh.bind(null,e):null}function Fl(e,t){var r=Js;return e.current.memoizedState.isDehydrated&&(_r(e,t).flags|=256),e=Ui(e,t),e!==2&&(t=Be,Be=r,t!==null&&zl(t)),e}function zl(e){Be===null?Be=e:Be.push.apply(Be,e)}function ox(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var n=r[s],a=n.getSnapshot;n=n.value;try{if(!xt(a(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qt(e,t){for(t&=~Mo,t&=~ta,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-mt(t),s=1<<r;e[r]=-1,t&=~s}}function uu(e){if(J&6)throw Error(A(327));as();var t=vi(e,0);if(!(t&1))return Qe(e,he()),null;var r=Ui(e,t);if(e.tag!==0&&r===2){var s=hl(e);s!==0&&(t=s,r=Fl(e,s))}if(r===1)throw r=vn,_r(e,0),Qt(e,t),Qe(e,he()),r;if(r===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xr(e,Be,Et),Qe(e,he()),null}function zo(e,t){var r=J;J|=1;try{return e(t)}finally{J=r,J===0&&(ms=he()+500,Yi&&dr())}}function Pr(e){Jt!==null&&Jt.tag===0&&!(J&6)&&as();var t=J;J|=1;var r=nt.transition,s=Z;try{if(nt.transition=null,Z=1,e)return e()}finally{Z=s,nt.transition=r,J=t,!(J&6)&&dr()}}function Bo(){Ge=es.current,ie(es)}function _r(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Dp(r)),me!==null)for(r=me.return;r!==null;){var s=r;switch(_o(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&bi();break;case 3:hs(),ie(We),ie(Oe),Ro();break;case 5:To(s);break;case 4:hs();break;case 13:ie(oe);break;case 19:ie(oe);break;case 10:So(s.type._context);break;case 22:case 23:Bo()}r=r.return}if(we=e,me=e=ir(e.current,null),be=Ge=t,xe=0,vn=null,Mo=ta=Cr=0,Be=Js=null,wr!==null){for(t=0;t<wr.length;t++)if(r=wr[t],s=r.interleaved,s!==null){r.interleaved=null;var n=s.next,a=r.pending;if(a!==null){var l=a.next;a.next=n,s.next=l}r.pending=s}wr=null}return e}function Kh(e,t){do{var r=me;try{if(ko(),ci.current=Ai,Oi){for(var s=ce.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}Oi=!1}if(Er=0,ve=pe=ce=null,Ks=!1,xn=0,Do.current=null,r===null||r.return===null){xe=1,vn=t,me=null;break}e:{var a=e,l=r.return,c=r,o=t;if(t=be,c.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var u=o,d=c,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Yc(l);if(y!==null){y.flags&=-257,Xc(y,l,c,a,t),y.mode&1&&Jc(a,u,t),t=y,o=u;var g=t.updateQueue;if(g===null){var w=new Set;w.add(o),t.updateQueue=w}else g.add(o);break e}else{if(!(t&1)){Jc(a,u,t),qo();break e}o=Error(A(426))}}else if(ae&&c.mode&1){var v=Yc(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Xc(v,l,c,a,t),No(fs(o,c));break e}}a=o=fs(o,c),xe!==4&&(xe=2),Js===null?Js=[a]:Js.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=Rh(a,o,t);Vc(a,x);break e;case 1:c=o;var m=a.type,p=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(sr===null||!sr.has(p)))){a.flags|=65536,t&=-t,a.lanes|=t;var _=Oh(a,c,t);Vc(a,_);break e}}a=a.return}while(a!==null)}Yh(r)}catch(N){t=N,me===r&&r!==null&&(me=r=r.return);continue}break}while(!0)}function Gh(){var e=Li.current;return Li.current=Ai,e===null?Ai:e}function qo(){(xe===0||xe===3||xe===2)&&(xe=4),we===null||!(Cr&268435455)&&!(ta&268435455)||Qt(we,be)}function Ui(e,t){var r=J;J|=2;var s=Gh();(we!==e||be!==t)&&(Et=null,_r(e,t));do try{cx();break}catch(n){Kh(e,n)}while(!0);if(ko(),J=r,Li.current=s,me!==null)throw Error(A(261));return we=null,be=0,xe}function cx(){for(;me!==null;)Jh(me)}function ux(){for(;me!==null&&!$m();)Jh(me)}function Jh(e){var t=Zh(e.alternate,e,Ge);e.memoizedProps=e.pendingProps,t===null?Yh(e):me=t,Do.current=null}function Yh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=sx(r,t),r!==null){r.flags&=32767,me=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xe=6,me=null;return}}else if(r=rx(r,t,Ge),r!==null){me=r;return}if(t=t.sibling,t!==null){me=t;return}me=t=e}while(t!==null);xe===0&&(xe=5)}function xr(e,t,r){var s=Z,n=nt.transition;try{nt.transition=null,Z=1,dx(e,t,r,s)}finally{nt.transition=n,Z=s}return null}function dx(e,t,r,s){do as();while(Jt!==null);if(J&6)throw Error(A(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(Wm(e,a),e===we&&(me=we=null,be=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Gn||(Gn=!0,ef(gi,function(){return as(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=nt.transition,nt.transition=null;var l=Z;Z=1;var c=J;J|=4,Do.current=null,ix(e,r),Wh(r,e),Rp(gl),wi=!!yl,gl=yl=null,e.current=r,ax(r),Im(),J=c,Z=l,nt.transition=a}else e.current=r;if(Gn&&(Gn=!1,Jt=e,Ii=n),a=e.pendingLanes,a===0&&(sr=null),Mm(r.stateNode),Qe(e,he()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],s(n.value,{componentStack:n.stack,digest:n.digest});if($i)throw $i=!1,e=Dl,Dl=null,e;return Ii&1&&e.tag!==0&&as(),a=e.pendingLanes,a&1?e===Ml?Ys++:(Ys=0,Ml=e):Ys=0,dr(),null}function as(){if(Jt!==null){var e=Rd(Ii),t=nt.transition,r=Z;try{if(nt.transition=null,Z=16>e?16:e,Jt===null)var s=!1;else{if(e=Jt,Jt=null,Ii=0,J&6)throw Error(A(331));var n=J;for(J|=4,L=e.current;L!==null;){var a=L,l=a.child;if(L.flags&16){var c=a.deletions;if(c!==null){for(var o=0;o<c.length;o++){var u=c[o];for(L=u;L!==null;){var d=L;switch(d.tag){case 0:case 11:case 15:Gs(8,d,a)}var h=d.child;if(h!==null)h.return=d,L=h;else for(;L!==null;){d=L;var f=d.sibling,y=d.return;if(Bh(d),d===u){L=null;break}if(f!==null){f.return=y,L=f;break}L=y}}}var g=a.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var v=w.sibling;w.sibling=null,w=v}while(w!==null)}}L=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,L=l;else e:for(;L!==null;){if(a=L,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Gs(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,L=x;break e}L=a.return}}var m=e.current;for(L=m;L!==null;){l=L;var p=l.child;if(l.subtreeFlags&2064&&p!==null)p.return=l,L=p;else e:for(l=m;L!==null;){if(c=L,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ea(9,c)}}catch(N){de(c,c.return,N)}if(c===l){L=null;break e}var _=c.sibling;if(_!==null){_.return=c.return,L=_;break e}L=c.return}}if(J=n,dr(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Hi,e)}catch{}s=!0}return s}finally{Z=r,nt.transition=t}}return!1}function du(e,t,r){t=fs(r,t),t=Rh(e,t,1),e=rr(e,t,1),t=Ue(),e!==null&&(En(e,1,t),Qe(e,t))}function de(e,t,r){if(e.tag===3)du(e,e,r);else for(;t!==null;){if(t.tag===3){du(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(sr===null||!sr.has(s))){e=fs(r,e),e=Oh(t,e,1),t=rr(t,e,1),e=Ue(),t!==null&&(En(t,1,e),Qe(t,e));break}}t=t.return}}function hx(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Ue(),e.pingedLanes|=e.suspendedLanes&r,we===e&&(be&r)===r&&(xe===4||xe===3&&(be&130023424)===be&&500>he()-Fo?_r(e,0):Mo|=r),Qe(e,t)}function Xh(e,t){t===0&&(e.mode&1?(t=Mn,Mn<<=1,!(Mn&130023424)&&(Mn=4194304)):t=1);var r=Ue();e=Ut(e,t),e!==null&&(En(e,t,r),Qe(e,r))}function fx(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Xh(e,r)}function mx(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(A(314))}s!==null&&s.delete(t),Xh(e,r)}var Zh;Zh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||We.current)Ve=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ve=!1,tx(e,t,r);Ve=!!(e.flags&131072)}else Ve=!1,ae&&t.flags&1048576&&sh(t,Ei,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;di(e,t),e=t.pendingProps;var n=cs(t,Oe.current);is(t,r),n=Ao(null,t,s,e,n,r);var a=Lo();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,He(s)?(a=!0,ki(t)):a=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Co(t),n.updater=Zi,t.stateNode=n,n._reactInternals=t,El(t,s,e,r),t=Tl(null,t,s,!0,a,r)):(t.tag=0,ae&&a&&jo(t),$e(null,t,n,r),t=t.child),t;case 16:s=t.elementType;e:{switch(di(e,t),e=t.pendingProps,n=s._init,s=n(s._payload),t.type=s,n=t.tag=xx(s),e=ut(s,e),n){case 0:t=Pl(null,t,s,e,r);break e;case 1:t=tu(null,t,s,e,r);break e;case 11:t=Zc(null,t,s,e,r);break e;case 14:t=eu(null,t,s,ut(s.type,e),r);break e}throw Error(A(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:ut(s,n),Pl(e,t,s,n,r);case 1:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:ut(s,n),tu(e,t,s,n,r);case 3:e:{if(Ih(t),e===null)throw Error(A(387));s=t.pendingProps,a=t.memoizedState,n=a.element,ch(e,t),Ti(t,s,null,r);var l=t.memoizedState;if(s=l.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){n=fs(Error(A(423)),t),t=ru(e,t,s,r,n);break e}else if(s!==n){n=fs(Error(A(424)),t),t=ru(e,t,s,r,n);break e}else for(Je=tr(t.stateNode.containerInfo.firstChild),Ye=t,ae=!0,ft=null,r=lh(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(us(),s===n){t=Dt(e,t,r);break e}$e(e,t,s,r)}t=t.child}return t;case 5:return uh(t),e===null&&bl(t),s=t.type,n=t.pendingProps,a=e!==null?e.memoizedProps:null,l=n.children,vl(s,n)?l=null:a!==null&&vl(s,a)&&(t.flags|=32),$h(e,t),$e(e,t,l,r),t.child;case 6:return e===null&&bl(t),null;case 13:return Uh(e,t,r);case 4:return Po(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ds(t,null,s,r):$e(e,t,s,r),t.child;case 11:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:ut(s,n),Zc(e,t,s,n,r);case 7:return $e(e,t,t.pendingProps,r),t.child;case 8:return $e(e,t,t.pendingProps.children,r),t.child;case 12:return $e(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,a=t.memoizedProps,l=n.value,se(Ci,s._currentValue),s._currentValue=l,a!==null)if(xt(a.value,l)){if(a.children===n.children&&!We.current){t=Dt(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){l=a.child;for(var o=c.firstContext;o!==null;){if(o.context===s){if(a.tag===1){o=At(-1,r&-r),o.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?o.next=o:(o.next=d.next,d.next=o),u.pending=o}}a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),kl(a.return,r,t),c.lanes|=r;break}o=o.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(A(341));l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),kl(l,r,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}$e(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,is(t,r),n=at(n),s=s(n),t.flags|=1,$e(e,t,s,r),t.child;case 14:return s=t.type,n=ut(s,t.pendingProps),n=ut(s.type,n),eu(e,t,s,n,r);case 15:return Ah(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:ut(s,n),di(e,t),t.tag=1,He(s)?(e=!0,ki(t)):e=!1,is(t,r),Th(t,s,n),El(t,s,n,r),Tl(null,t,s,!0,e,r);case 19:return Dh(e,t,r);case 22:return Lh(e,t,r)}throw Error(A(156,t.tag))};function ef(e,t){return Ed(e,t)}function px(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function st(e,t,r,s){return new px(e,t,r,s)}function Vo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xx(e){if(typeof e=="function")return Vo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oo)return 11;if(e===co)return 14}return 2}function ir(e,t){var r=e.alternate;return r===null?(r=st(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function mi(e,t,r,s,n,a){var l=2;if(s=e,typeof e=="function")Vo(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Vr:return Nr(r.children,n,a,t);case lo:l=8,n|=8;break;case Ya:return e=st(12,r,t,n|2),e.elementType=Ya,e.lanes=a,e;case Xa:return e=st(13,r,t,n),e.elementType=Xa,e.lanes=a,e;case Za:return e=st(19,r,t,n),e.elementType=Za,e.lanes=a,e;case ud:return ra(r,n,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case od:l=10;break e;case cd:l=9;break e;case oo:l=11;break e;case co:l=14;break e;case qt:l=16,s=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=st(l,r,t,n),t.elementType=e,t.type=s,t.lanes=a,t}function Nr(e,t,r,s){return e=st(7,e,s,t),e.lanes=r,e}function ra(e,t,r,s){return e=st(22,e,s,t),e.elementType=ud,e.lanes=r,e.stateNode={isHidden:!1},e}function Fa(e,t,r){return e=st(6,e,null,t),e.lanes=r,e}function za(e,t,r){return t=st(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yx(e,t,r,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ja(0),this.expirationTimes=ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ja(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Wo(e,t,r,s,n,a,l,c,o){return e=new yx(e,t,r,c,o),t===1?(t=1,a===!0&&(t|=8)):t=0,a=st(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Co(a),e}function gx(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function tf(e){if(!e)return or;e=e._reactInternals;e:{if(Or(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(He(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var r=e.type;if(He(r))return th(e,r,t)}return t}function rf(e,t,r,s,n,a,l,c,o){return e=Wo(r,s,!0,e,n,a,l,c,o),e.context=tf(null),r=e.current,s=Ue(),n=nr(r),a=At(s,n),a.callback=t??null,rr(r,a,n),e.current.lanes=n,En(e,n,s),Qe(e,s),e}function sa(e,t,r,s){var n=t.current,a=Ue(),l=nr(n);return r=tf(r),t.context===null?t.context=r:t.pendingContext=r,t=At(a,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=rr(n,t,l),e!==null&&(pt(e,n,l,a),oi(e,n,l)),l}function Di(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ho(e,t){hu(e,t),(e=e.alternate)&&hu(e,t)}function vx(){return null}var sf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qo(e){this._internalRoot=e}na.prototype.render=Qo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));sa(e,t,null,null)};na.prototype.unmount=Qo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pr(function(){sa(null,e,null,null)}),t[It]=null}};function na(e){this._internalRoot=e}na.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ld();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ht.length&&t!==0&&t<Ht[r].priority;r++);Ht.splice(r,0,e),r===0&&Id(e)}};function Ko(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ia(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fu(){}function wx(e,t,r,s,n){if(n){if(typeof s=="function"){var a=s;s=function(){var u=Di(l);a.call(u)}}var l=rf(t,s,e,0,null,!1,!1,"",fu);return e._reactRootContainer=l,e[It]=l.current,dn(e.nodeType===8?e.parentNode:e),Pr(),l}for(;n=e.lastChild;)e.removeChild(n);if(typeof s=="function"){var c=s;s=function(){var u=Di(o);c.call(u)}}var o=Wo(e,0,!1,null,null,!1,!1,"",fu);return e._reactRootContainer=o,e[It]=o.current,dn(e.nodeType===8?e.parentNode:e),Pr(function(){sa(t,o,r,s)}),o}function aa(e,t,r,s,n){var a=r._reactRootContainer;if(a){var l=a;if(typeof n=="function"){var c=n;n=function(){var o=Di(l);c.call(o)}}sa(t,l,e,n)}else l=wx(r,t,e,n,s);return Di(l)}Od=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ms(t.pendingLanes);r!==0&&(fo(t,r|1),Qe(t,he()),!(J&6)&&(ms=he()+500,dr()))}break;case 13:Pr(function(){var s=Ut(e,1);if(s!==null){var n=Ue();pt(s,e,1,n)}}),Ho(e,1)}};mo=function(e){if(e.tag===13){var t=Ut(e,134217728);if(t!==null){var r=Ue();pt(t,e,134217728,r)}Ho(e,134217728)}};Ad=function(e){if(e.tag===13){var t=nr(e),r=Ut(e,t);if(r!==null){var s=Ue();pt(r,e,t,s)}Ho(e,t)}};Ld=function(){return Z};$d=function(e,t){var r=Z;try{return Z=e,t()}finally{Z=r}};cl=function(e,t,r){switch(t){case"input":if(rl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var n=Ji(s);if(!n)throw Error(A(90));hd(s),rl(s,n)}}}break;case"textarea":md(e,r);break;case"select":t=r.value,t!=null&&ts(e,!!r.multiple,t,!1)}};jd=zo;_d=Pr;var jx={usingClientEntryPoint:!1,Events:[Pn,Kr,Ji,vd,wd,zo]},Ls={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_x={bundleType:Ls.bundleType,version:Ls.version,rendererPackageName:Ls.rendererPackageName,rendererConfig:Ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=kd(e),e===null?null:e.stateNode},findFiberByHostInstance:Ls.findFiberByHostInstance||vx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jn.isDisabled&&Jn.supportsFiber)try{Hi=Jn.inject(_x),_t=Jn}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jx;Ze.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ko(t))throw Error(A(200));return gx(e,t,null,r)};Ze.createRoot=function(e,t){if(!Ko(e))throw Error(A(299));var r=!1,s="",n=sf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Wo(e,1,!1,null,null,r,!1,s,n),e[It]=t.current,dn(e.nodeType===8?e.parentNode:e),new Qo(t)};Ze.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=kd(t),e=e===null?null:e.stateNode,e};Ze.flushSync=function(e){return Pr(e)};Ze.hydrate=function(e,t,r){if(!ia(t))throw Error(A(200));return aa(null,e,t,!0,r)};Ze.hydrateRoot=function(e,t,r){if(!Ko(e))throw Error(A(405));var s=r!=null&&r.hydratedSources||null,n=!1,a="",l=sf;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=rf(t,null,e,1,r??null,n,!1,a,l),e[It]=t.current,dn(e),s)for(e=0;e<s.length;e++)r=s[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new na(t)};Ze.render=function(e,t,r){if(!ia(t))throw Error(A(200));return aa(null,e,t,!1,r)};Ze.unmountComponentAtNode=function(e){if(!ia(e))throw Error(A(40));return e._reactRootContainer?(Pr(function(){aa(null,null,e,!1,function(){e._reactRootContainer=null,e[It]=null})}),!0):!1};Ze.unstable_batchedUpdates=zo;Ze.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!ia(r))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return aa(e,t,r,!1,s)};Ze.version="18.3.1-next-f1338f8080-20240426";function nf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nf)}catch(e){console.error(e)}}nf(),nd.exports=Ze;var Nx=nd.exports,mu=Nx;Ga.createRoot=mu.createRoot,Ga.hydrateRoot=mu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wn(){return wn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},wn.apply(this,arguments)}var Yt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Yt||(Yt={}));const pu="popstate";function bx(e){e===void 0&&(e={});function t(s,n){let{pathname:a,search:l,hash:c}=s.location;return Bl("",{pathname:a,search:l,hash:c},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:Mi(n)}return Sx(t,r,null,e)}function fe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function af(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function kx(){return Math.random().toString(36).substr(2,8)}function xu(e,t){return{usr:e.state,key:e.key,idx:t}}function Bl(e,t,r,s){return r===void 0&&(r=null),wn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?js(t):t,{state:r,key:t&&t.key||s||kx()})}function Mi(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function js(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function Sx(e,t,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:a=!1}=s,l=n.history,c=Yt.Pop,o=null,u=d();u==null&&(u=0,l.replaceState(wn({},l.state,{idx:u}),""));function d(){return(l.state||{idx:null}).idx}function h(){c=Yt.Pop;let v=d(),x=v==null?null:v-u;u=v,o&&o({action:c,location:w.location,delta:x})}function f(v,x){c=Yt.Push;let m=Bl(w.location,v,x);u=d()+1;let p=xu(m,u),_=w.createHref(m);try{l.pushState(p,"",_)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;n.location.assign(_)}a&&o&&o({action:c,location:w.location,delta:1})}function y(v,x){c=Yt.Replace;let m=Bl(w.location,v,x);u=d();let p=xu(m,u),_=w.createHref(m);l.replaceState(p,"",_),a&&o&&o({action:c,location:w.location,delta:0})}function g(v){let x=n.location.origin!=="null"?n.location.origin:n.location.href,m=typeof v=="string"?v:Mi(v);return m=m.replace(/ $/,"%20"),fe(x,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,x)}let w={get action(){return c},get location(){return e(n,l)},listen(v){if(o)throw new Error("A history only accepts one active listener");return n.addEventListener(pu,h),o=v,()=>{n.removeEventListener(pu,h),o=null}},createHref(v){return t(n,v)},createURL:g,encodeLocation(v){let x=g(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:y,go(v){return l.go(v)}};return w}var yu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(yu||(yu={}));function Ex(e,t,r){return r===void 0&&(r="/"),Cx(e,t,r)}function Cx(e,t,r,s){let n=typeof t=="string"?js(t):t,a=Go(n.pathname||"/",r);if(a==null)return null;let l=lf(e);Px(l);let c=null;for(let o=0;c==null&&o<l.length;++o){let u=zx(a);c=Dx(l[o],u)}return c}function lf(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(a,l,c)=>{let o={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};o.relativePath.startsWith("/")&&(fe(o.relativePath.startsWith(s),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(s.length));let u=ar([s,o.relativePath]),d=r.concat(o);a.children&&a.children.length>0&&(fe(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),lf(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:Ix(u,a.index),routesMeta:d})};return e.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))n(a,l);else for(let o of of(a.path))n(a,l,o)}),t}function of(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,n=r.endsWith("?"),a=r.replace(/\?$/,"");if(s.length===0)return n?[a,""]:[a];let l=of(s.join("/")),c=[];return c.push(...l.map(o=>o===""?a:[a,o].join("/"))),n&&c.push(...l),c.map(o=>e.startsWith("/")&&o===""?"/":o)}function Px(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Ux(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Tx=/^:[\w-]+$/,Rx=3,Ox=2,Ax=1,Lx=10,$x=-2,gu=e=>e==="*";function Ix(e,t){let r=e.split("/"),s=r.length;return r.some(gu)&&(s+=$x),t&&(s+=Ox),r.filter(n=>!gu(n)).reduce((n,a)=>n+(Tx.test(a)?Rx:a===""?Ax:Lx),s)}function Ux(e,t){return e.length===t.length&&e.slice(0,-1).every((s,n)=>s===t[n])?e[e.length-1]-t[t.length-1]:0}function Dx(e,t,r){let{routesMeta:s}=e,n={},a="/",l=[];for(let c=0;c<s.length;++c){let o=s[c],u=c===s.length-1,d=a==="/"?t:t.slice(a.length)||"/",h=Mx({path:o.relativePath,caseSensitive:o.caseSensitive,end:u},d),f=o.route;if(!h)return null;Object.assign(n,h.params),l.push({params:n,pathname:ar([a,h.pathname]),pathnameBase:Wx(ar([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=ar([a,h.pathnameBase]))}return l}function Mx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=Fx(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let a=n[0],l=a.replace(/(.)\/+$/,"$1"),c=n.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:f,isOptional:y}=d;if(f==="*"){let w=c[h]||"";l=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const g=c[h];return y&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:l,pattern:e}}function Fx(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),af(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,o)=>(s.push({paramName:c,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function zx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return af(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Go(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function Bx(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:n=""}=typeof e=="string"?js(e):e;return{pathname:r?r.startsWith("/")?r:qx(r,t):t,search:Hx(s),hash:Qx(n)}}function qx(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Ba(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vx(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Jo(e,t){let r=Vx(e);return t?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function Yo(e,t,r,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=js(e):(n=wn({},e),fe(!n.pathname||!n.pathname.includes("?"),Ba("?","pathname","search",n)),fe(!n.pathname||!n.pathname.includes("#"),Ba("#","pathname","hash",n)),fe(!n.search||!n.search.includes("#"),Ba("#","search","hash",n)));let a=e===""||n.pathname==="",l=a?"/":n.pathname,c;if(l==null)c=r;else{let h=t.length-1;if(!s&&l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),h-=1;n.pathname=f.join("/")}c=h>=0?t[h]:"/"}let o=Bx(n,c),u=l&&l!=="/"&&l.endsWith("/"),d=(a||l===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(u||d)&&(o.pathname+="/"),o}const ar=e=>e.join("/").replace(/\/\/+/g,"/"),Wx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Hx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Qx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Kx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const cf=["post","put","patch","delete"];new Set(cf);const Gx=["get",...cf];new Set(Gx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},jn.apply(this,arguments)}const Xo=j.createContext(null),Jx=j.createContext(null),hr=j.createContext(null),la=j.createContext(null),Ft=j.createContext({outlet:null,matches:[],isDataRoute:!1}),uf=j.createContext(null);function Yx(e,t){let{relative:r}=t===void 0?{}:t;_s()||fe(!1);let{basename:s,navigator:n}=j.useContext(hr),{hash:a,pathname:l,search:c}=hf(e,{relative:r}),o=l;return s!=="/"&&(o=l==="/"?s:ar([s,l])),n.createHref({pathname:o,search:c,hash:a})}function _s(){return j.useContext(la)!=null}function Ar(){return _s()||fe(!1),j.useContext(la).location}function df(e){j.useContext(hr).static||j.useLayoutEffect(e)}function Lr(){let{isDataRoute:e}=j.useContext(Ft);return e?u0():Xx()}function Xx(){_s()||fe(!1);let e=j.useContext(Xo),{basename:t,future:r,navigator:s}=j.useContext(hr),{matches:n}=j.useContext(Ft),{pathname:a}=Ar(),l=JSON.stringify(Jo(n,r.v7_relativeSplatPath)),c=j.useRef(!1);return df(()=>{c.current=!0}),j.useCallback(function(u,d){if(d===void 0&&(d={}),!c.current)return;if(typeof u=="number"){s.go(u);return}let h=Yo(u,JSON.parse(l),a,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:ar([t,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[t,s,l,a,e])}function oa(){let{matches:e}=j.useContext(Ft),t=e[e.length-1];return t?t.params:{}}function hf(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=j.useContext(hr),{matches:n}=j.useContext(Ft),{pathname:a}=Ar(),l=JSON.stringify(Jo(n,s.v7_relativeSplatPath));return j.useMemo(()=>Yo(e,JSON.parse(l),a,r==="path"),[e,l,a,r])}function Zx(e,t){return e0(e,t)}function e0(e,t,r,s){_s()||fe(!1);let{navigator:n}=j.useContext(hr),{matches:a}=j.useContext(Ft),l=a[a.length-1],c=l?l.params:{};l&&l.pathname;let o=l?l.pathnameBase:"/";l&&l.route;let u=Ar(),d;if(t){var h;let v=typeof t=="string"?js(t):t;o==="/"||(h=v.pathname)!=null&&h.startsWith(o)||fe(!1),d=v}else d=u;let f=d.pathname||"/",y=f;if(o!=="/"){let v=o.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=Ex(e,{pathname:y}),w=i0(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:ar([o,n.encodeLocation?n.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?o:ar([o,n.encodeLocation?n.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,s);return t&&w?j.createElement(la.Provider,{value:{location:jn({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Yt.Pop}},w):w}function t0(){let e=c0(),t=Kx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:n},r):null,null)}const r0=j.createElement(t0,null);class s0 extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?j.createElement(Ft.Provider,{value:this.props.routeContext},j.createElement(uf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function n0(e){let{routeContext:t,match:r,children:s}=e,n=j.useContext(Xo);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(Ft.Provider,{value:t},s)}function i0(e,t,r,s){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=s)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,c=(n=r)==null?void 0:n.errors;if(c!=null){let d=l.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);d>=0||fe(!1),l=l.slice(0,Math.min(l.length,d+1))}let o=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let d=0;d<l.length;d++){let h=l[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:y}=r,g=h.route.loader&&f[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||g){o=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((d,h,f)=>{let y,g=!1,w=null,v=null;r&&(y=c&&h.route.id?c[h.route.id]:void 0,w=h.route.errorElement||r0,o&&(u<0&&f===0?(d0("route-fallback"),g=!0,v=null):u===f&&(g=!0,v=h.route.hydrateFallbackElement||null)));let x=t.concat(l.slice(0,f+1)),m=()=>{let p;return y?p=w:g?p=v:h.route.Component?p=j.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=d,j.createElement(n0,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:p})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?j.createElement(s0,{location:r.location,revalidation:r.revalidation,component:w,error:y,children:m(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):m()},null)}var ff=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ff||{}),mf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(mf||{});function a0(e){let t=j.useContext(Xo);return t||fe(!1),t}function l0(e){let t=j.useContext(Jx);return t||fe(!1),t}function o0(e){let t=j.useContext(Ft);return t||fe(!1),t}function pf(e){let t=o0(),r=t.matches[t.matches.length-1];return r.route.id||fe(!1),r.route.id}function c0(){var e;let t=j.useContext(uf),r=l0(),s=pf();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function u0(){let{router:e}=a0(ff.UseNavigateStable),t=pf(mf.UseNavigateStable),r=j.useRef(!1);return df(()=>{r.current=!0}),j.useCallback(function(n,a){a===void 0&&(a={}),r.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,jn({fromRouteId:t},a)))},[e,t])}const vu={};function d0(e,t,r){vu[e]||(vu[e]=!0)}function h0(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Fi(e){let{to:t,replace:r,state:s,relative:n}=e;_s()||fe(!1);let{future:a,static:l}=j.useContext(hr),{matches:c}=j.useContext(Ft),{pathname:o}=Ar(),u=Lr(),d=Yo(t,Jo(c,a.v7_relativeSplatPath),o,n==="path"),h=JSON.stringify(d);return j.useEffect(()=>u(JSON.parse(h),{replace:r,state:s,relative:n}),[u,h,n,r,s]),null}function _e(e){fe(!1)}function f0(e){let{basename:t="/",children:r=null,location:s,navigationType:n=Yt.Pop,navigator:a,static:l=!1,future:c}=e;_s()&&fe(!1);let o=t.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:o,navigator:a,static:l,future:jn({v7_relativeSplatPath:!1},c)}),[o,c,a,l]);typeof s=="string"&&(s=js(s));let{pathname:d="/",search:h="",hash:f="",state:y=null,key:g="default"}=s,w=j.useMemo(()=>{let v=Go(d,o);return v==null?null:{location:{pathname:v,search:h,hash:f,state:y,key:g},navigationType:n}},[o,d,h,f,y,g,n]);return w==null?null:j.createElement(hr.Provider,{value:u},j.createElement(la.Provider,{children:r,value:w}))}function wu(e){let{children:t,location:r}=e;return Zx(ql(t),r)}new Promise(()=>{});function ql(e,t){t===void 0&&(t=[]);let r=[];return j.Children.forEach(e,(s,n)=>{if(!j.isValidElement(s))return;let a=[...t,n];if(s.type===j.Fragment){r.push.apply(r,ql(s.props.children,a));return}s.type!==_e&&fe(!1),!s.props.index||!s.props.children||fe(!1);let l={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=ql(s.props.children,a)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Vl.apply(this,arguments)}function m0(e,t){if(e==null)return{};var r={},s=Object.keys(e),n,a;for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function p0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function x0(e,t){return e.button===0&&(!t||t==="_self")&&!p0(e)}function Wl(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(n=>[r,n]):[[r,s]])},[]))}function y0(e,t){let r=Wl(e);return t&&t.forEach((s,n)=>{r.has(n)||t.getAll(n).forEach(a=>{r.append(n,a)})}),r}const g0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],v0="6";try{window.__reactRouterVersion=v0}catch{}const w0="startTransition",ju=hm[w0];function j0(e){let{basename:t,children:r,future:s,window:n}=e,a=j.useRef();a.current==null&&(a.current=bx({window:n,v5Compat:!0}));let l=a.current,[c,o]=j.useState({action:l.action,location:l.location}),{v7_startTransition:u}=s||{},d=j.useCallback(h=>{u&&ju?ju(()=>o(h)):o(h)},[o,u]);return j.useLayoutEffect(()=>l.listen(d),[l,d]),j.useEffect(()=>h0(s),[s]),j.createElement(f0,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:l,future:s})}const _0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",N0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=j.forwardRef(function(t,r){let{onClick:s,relative:n,reloadDocument:a,replace:l,state:c,target:o,to:u,preventScrollReset:d,viewTransition:h}=t,f=m0(t,g0),{basename:y}=j.useContext(hr),g,w=!1;if(typeof u=="string"&&N0.test(u)&&(g=u,_0))try{let p=new URL(window.location.href),_=u.startsWith("//")?new URL(p.protocol+u):new URL(u),N=Go(_.pathname,y);_.origin===p.origin&&N!=null?u=N+_.search+_.hash:w=!0}catch{}let v=Yx(u,{relative:n}),x=b0(u,{replace:l,state:c,target:o,preventScrollReset:d,relative:n,viewTransition:h});function m(p){s&&s(p),p.defaultPrevented||x(p)}return j.createElement("a",Vl({},f,{href:g||v,onClick:w||a?s:m,ref:r,target:o}))});var _u;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_u||(_u={}));var Nu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Nu||(Nu={}));function b0(e,t){let{target:r,replace:s,state:n,preventScrollReset:a,relative:l,viewTransition:c}=t===void 0?{}:t,o=Lr(),u=Ar(),d=hf(e,{relative:l});return j.useCallback(h=>{if(x0(h,r)){h.preventDefault();let f=s!==void 0?s:Mi(u)===Mi(d);o(e,{replace:f,state:n,preventScrollReset:a,relative:l,viewTransition:c})}},[u,o,d,s,n,r,e,a,l,c])}function xf(e){let t=j.useRef(Wl(e)),r=j.useRef(!1),s=Ar(),n=j.useMemo(()=>y0(s.search,r.current?null:t.current),[s.search]),a=Lr(),l=j.useCallback((c,o)=>{const u=Wl(typeof c=="function"?c(n):c);r.current=!0,a("?"+u,o)},[a,n]);return[n,l]}const k0="modulepreload",S0=function(e){return"/"+e},bu={},Rn=function(t,r,s){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(r.map(o=>{if(o=S0(o),o in bu)return;bu[o]=!0;const u=o.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":k0,u||(h.as="script"),h.crossOrigin="",h.href=o,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((f,y)=>{h.addEventListener("load",f),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${o}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return n.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})},E0=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Rn(async()=>{const{default:s}=await Promise.resolve().then(()=>Ns);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class Zo extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class C0 extends Zo{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class P0 extends Zo{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class T0 extends Zo{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Hl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Hl||(Hl={}));var R0=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(d){try{u(s.next(d))}catch(h){l(h)}}function o(d){try{u(s.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):n(d.value).then(c,o)}u((s=s.apply(e,t||[])).next())})};class O0{constructor(t,{headers:r={},customFetch:s,region:n=Hl.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=E0(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var s;return R0(this,void 0,void 0,function*(){try{const{headers:n,method:a,body:l}=r;let c={},{region:o}=r;o||(o=this.region),o&&o!=="any"&&(c["x-region"]=o);let u;l&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(c["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(c["Content-Type"]="application/json",u=JSON.stringify(l)));const d=yield this.fetch(`${this.url}/${t}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),n),body:u}).catch(g=>{throw new C0(g)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new P0(d);if(!d.ok)throw new T0(d);let f=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),y;return f==="application/json"?y=yield d.json():f==="application/octet-stream"?y=yield d.blob():f==="text/event-stream"?y=d:f==="multipart/form-data"?y=yield d.formData():y=yield d.text(),{data:y,error:null}}catch(n){return{data:null,error:n}}})}}var qe={},ec={},ca={},On={},ua={},da={},A0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ps=A0();const L0=ps.fetch,yf=ps.fetch.bind(ps),gf=ps.Headers,$0=ps.Request,I0=ps.Response,Ns=Object.freeze(Object.defineProperty({__proto__:null,Headers:gf,Request:$0,Response:I0,default:yf,fetch:L0},Symbol.toStringTag,{value:"Module"})),U0=Jf(Ns);var ha={};Object.defineProperty(ha,"__esModule",{value:!0});let D0=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ha.default=D0;var vf=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(da,"__esModule",{value:!0});const M0=vf(U0),F0=vf(ha);let z0=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=M0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,c,o;let u=null,d=null,h=null,f=a.status,y=a.statusText;if(a.ok){if(this.method!=="HEAD"){const x=await a.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=x:d=JSON.parse(x))}const w=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const w=await a.text();try{u=JSON.parse(w),Array.isArray(u)&&a.status===404&&(d=[],u=null,f=200,y="OK")}catch{a.status===404&&w===""?(f=204,y="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((o=u==null?void 0:u.details)===null||o===void 0)&&o.includes("0 rows"))&&(u=null,f=200,y="OK"),u&&this.shouldThrowOnError)throw new F0.default(u)}return{error:u,data:d,count:h,status:f,statusText:y}});return this.shouldThrowOnError||(n=n.catch(a=>{var l,c,o;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(c=a==null?void 0:a.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(o=a==null?void 0:a.code)!==null&&o!==void 0?o:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,r)}returns(){return this}overrideTypes(){return this}};da.default=z0;var B0=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ua,"__esModule",{value:!0});const q0=B0(da);let V0=class extends q0.default{select(t){let r=!1;const s=(t??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:s,foreignTable:n,referencedTable:a=n}={}){const l=a?`${a}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${t}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,r,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"offset":`${n}.offset`,l=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:n=!1,wal:a=!1,format:l="text"}={}){var c;const o=[t?"analyze":null,r?"verbose":null,s?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${u}"; options=${o};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ua.default=V0;var W0=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(On,"__esModule",{value:!0});const H0=W0(ua);let Q0=class extends H0.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const s=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:s,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const l=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${a}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(t,r,s){return this.url.searchParams.append(t,`not.${r}.${s}`),this}or(t,{foreignTable:r,referencedTable:s=r}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,r,s){return this.url.searchParams.append(t,`${r}.${s}`),this}};On.default=Q0;var K0=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ca,"__esModule",{value:!0});const $s=K0(On);let G0=class{constructor(t,{headers:r={},schema:s,fetch:n}){this.url=t,this.headers=r,this.schema=s,this.fetch=n}select(t,{head:r=!1,count:s}={}){const n=r?"HEAD":"GET";let a=!1;const l=(t??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",l),s&&(this.headers.Prefer=`count=${s}`),new $s.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:s=!0}={}){const n="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((c,o)=>c.concat(Object.keys(o)),[]);if(l.length>0){const c=[...new Set(l)].map(o=>`"${o}"`);this.url.searchParams.set("columns",c.join(","))}}return new $s.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:n,defaultToNull:a=!0}={}){const l="POST",c=[`resolution=${s?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&c.push(this.headers.Prefer),n&&c.push(`count=${n}`),a||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(t)){const o=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(o.length>0){const u=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new $s.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),this.headers.Prefer=n.join(","),new $s.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",s=[];return t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new $s.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ca.default=G0;var fa={},ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.version=void 0;ma.version="0.0.0-automated";Object.defineProperty(fa,"__esModule",{value:!0});fa.DEFAULT_HEADERS=void 0;const J0=ma;fa.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${J0.version}`};var wf=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ec,"__esModule",{value:!0});const Y0=wf(ca),X0=wf(On),Z0=fa;let ey=class jf{constructor(t,{headers:r={},schema:s,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},Z0.DEFAULT_HEADERS),r),this.schemaName=s,this.fetch=n}from(t){const r=new URL(`${this.url}/${t}`);return new Y0.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new jf(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:n=!1,count:a}={}){let l;const c=new URL(`${this.url}/rpc/${t}`);let o;s||n?(l=s?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{c.searchParams.append(d,h)})):(l="POST",o=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new X0.default({method:l,url:c,headers:u,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};ec.default=ey;var bs=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qe,"__esModule",{value:!0});qe.PostgrestError=qe.PostgrestBuilder=qe.PostgrestTransformBuilder=qe.PostgrestFilterBuilder=qe.PostgrestQueryBuilder=qe.PostgrestClient=void 0;const _f=bs(ec);qe.PostgrestClient=_f.default;const Nf=bs(ca);qe.PostgrestQueryBuilder=Nf.default;const bf=bs(On);qe.PostgrestFilterBuilder=bf.default;const kf=bs(ua);qe.PostgrestTransformBuilder=kf.default;const Sf=bs(da);qe.PostgrestBuilder=Sf.default;const Ef=bs(ha);qe.PostgrestError=Ef.default;var ty=qe.default={PostgrestClient:_f.default,PostgrestQueryBuilder:Nf.default,PostgrestFilterBuilder:bf.default,PostgrestTransformBuilder:kf.default,PostgrestBuilder:Sf.default,PostgrestError:Ef.default};const{PostgrestClient:ry,PostgrestQueryBuilder:Av,PostgrestFilterBuilder:Lv,PostgrestTransformBuilder:$v,PostgrestBuilder:Iv,PostgrestError:Uv}=ty;function sy(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const ny=sy(),iy="2.11.15",ay=`realtime-js/${iy}`,ly="1.0.0",Cf=1e4,oy=1e3;var Xs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Xs||(Xs={}));var Te;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Te||(Te={}));var ht;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ht||(ht={}));var Ql;(function(e){e.websocket="websocket"})(Ql||(Ql={}));var gr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(gr||(gr={}));class cy{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const n=r.getUint8(1),a=r.getUint8(2);let l=this.HEADER_LENGTH+2;const c=s.decode(t.slice(l,l+n));l=l+n;const o=s.decode(t.slice(l,l+a));l=l+a;const u=JSON.parse(s.decode(t.slice(l,t.byteLength)));return{ref:null,topic:c,event:o,payload:u}}}class Pf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var re;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(re||(re={}));const ku=(e,t,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((a,l)=>(a[l]=uy(l,e,t,n),a),{})},uy=(e,t,r,s)=>{const n=t.find(c=>c.name===e),a=n==null?void 0:n.type,l=r[e];return a&&!s.includes(a)?Tf(a,l):Kl(l)},Tf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return my(t,r)}switch(e){case re.bool:return dy(t);case re.float4:case re.float8:case re.int2:case re.int4:case re.int8:case re.numeric:case re.oid:return hy(t);case re.json:case re.jsonb:return fy(t);case re.timestamp:return py(t);case re.abstime:case re.date:case re.daterange:case re.int4range:case re.int8range:case re.money:case re.reltime:case re.text:case re.time:case re.timestamptz:case re.timetz:case re.tsrange:case re.tstzrange:return Kl(t);default:return Kl(t)}},Kl=e=>e,dy=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},hy=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},fy=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},my=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let a;const l=e.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(c=>Tf(t,c))}return e},py=e=>typeof e=="string"?e.replace(" ","T"):e,Rf=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class qa{constructor(t,r,s={},n=Cf){this.channel=t,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Su;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Su||(Su={}));class Zs{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zs.syncState(this.state,n,a,l),this.pendingDiffs.forEach(o=>{this.state=Zs.syncDiff(this.state,o,a,l)}),this.pendingDiffs=[],c()}),this.channel._on(s.diff,{},n=>{const{onJoin:a,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Zs.syncDiff(this.state,n,a,l),c())}),this.onJoin((n,a,l)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:a,newPresences:l})}),this.onLeave((n,a,l)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,n){const a=this.cloneDeep(t),l=this.transformState(r),c={},o={};return this.map(a,(u,d)=>{l[u]||(o[u]=d)}),this.map(l,(u,d)=>{const h=a[u];if(h){const f=d.map(v=>v.presence_ref),y=h.map(v=>v.presence_ref),g=d.filter(v=>y.indexOf(v.presence_ref)<0),w=h.filter(v=>f.indexOf(v.presence_ref)<0);g.length>0&&(c[u]=g),w.length>0&&(o[u]=w)}else c[u]=d}),this.syncDiff(a,{joins:c,leaves:o},s,n)}static syncDiff(t,r,s,n){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(a,(c,o)=>{var u;const d=(u=t[c])!==null&&u!==void 0?u:[];if(t[c]=this.cloneDeep(o),d.length>0){const h=t[c].map(y=>y.presence_ref),f=d.filter(y=>h.indexOf(y.presence_ref)<0);t[c].unshift(...f)}s(c,d,o)}),this.map(l,(c,o)=>{let u=t[c];if(!u)return;const d=o.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[c]=u,n(c,u,o),u.length===0&&delete t[c]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const n=t[s];return"metas"in n?r[s]=n.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[s]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Eu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Eu||(Eu={}));var Cu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Cu||(Cu={}));var Ct;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ct||(Ct={}));class tc{constructor(t,r={config:{}},s){this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new qa(this,ht.join,this.params,this.timeout),this.rejoinTimer=new Pf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Te.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ht.reply,{},(n,a)=>{this._trigger(this._replyEventName(a),n)}),this.presence=new Zs(this),this.broadcastEndpointURL=Rf(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==Te.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params;this._onError(d=>t==null?void 0:t(Ct.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(Ct.CLOSED));const o={},u={broadcast:a,presence:l,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(d=>d.filter))!==null&&n!==void 0?n:[],private:c};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},o)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){t==null||t(Ct.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,y=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,g=[];for(let w=0;w<y;w++){const v=f[w],{filter:{event:x,schema:m,table:p,filter:_}}=v,N=d&&d[w];if(N&&N.event===x&&N.schema===m&&N.table===p&&N.filter===_)g.push(Object.assign(Object.assign({},v),{id:N.id}));else{this.unsubscribe(),this.state=Te.errored,t==null||t(Ct.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(Ct.SUBSCRIBED);return}}).receive("error",d=>{this.state=Te.errored,t==null||t(Ct.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ct.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this._on(t,r,s)}async send(t,r={}){var s,n;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:l}=t,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,c,o;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((o=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||o===void 0)&&o.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Te.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ht.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new qa(this,ht.leave,{},t),s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,s){const n=new AbortController,a=setTimeout(()=>n.abort(),s),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(a),l}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new qa(this,t,r,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var n,a;const l=t.toLocaleLowerCase(),{close:c,error:o,leave:u,join:d}=ht;if(s&&[c,o,u,d].indexOf(l)>=0&&s!==this._joinRef())return;let f=this._onMessage(l,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(y=>{var g,w,v;return((g=y.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(w=y.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===l}).map(y=>y.callback(f,s)):(a=this.bindings[l])===null||a===void 0||a.filter(y=>{var g,w,v,x,m,p;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const _=y.id,N=(g=y.filter)===null||g===void 0?void 0:g.event;return _&&((w=r.ids)===null||w===void 0?void 0:w.includes(_))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(m=(x=y==null?void 0:y.filter)===null||x===void 0?void 0:x.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return _==="*"||_===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:w,table:v,commit_timestamp:x,type:m,errors:p}=g;f=Object.assign(Object.assign({},{schema:w,table:v,commit_timestamp:x,eventType:m,new:{},old:{},errors:p}),this._getPayloadRecords(g))}y.callback(f,s)})}_isClosed(){return this.state===Te.closed}_isJoined(){return this.state===Te.joined}_isJoining(){return this.state===Te.joining}_isLeaving(){return this.state===Te.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const n=t.toLocaleLowerCase(),a={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var a;return!(((a=n.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&tc.isEqual(n.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ht.close,{},t)}_onError(t){this._on(ht.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Te.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=ku(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=ku(t.columns,t.old_record)),r}}const Pu=()=>{},xy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yy{constructor(t,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Cf,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Pu,this.ref=0,this.logger=Pu,this.conn=null,this.sendBuffer=[],this.serializer=new cy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...c)=>Rn(async()=>{const{default:o}=await Promise.resolve().then(()=>Ns);return{default:o}},void 0).then(({default:o})=>o(...c)):l=fetch,(...c)=>l(...c)},this.endPoint=`${t}/${Ql.websocket}`,this.httpEndpoint=Rf(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const n=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,l)=>l(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Pf(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=ny),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ly}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Xs.connecting:return gr.Connecting;case Xs.open:return gr.Open;case Xs.closing:return gr.Closing;default:return gr.Closed}}isConnected(){return this.connectionState()===gr.Open}channel(t,r={config:{}}){const s=`realtime:${t}`,n=this.getChannels().find(a=>a.topic===s);if(n)return n;{const a=new tc(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:s,payload:n,ref:a}=t,l=()=>{this.encode(t,c=>{var o;(o=this.conn)===null||o===void 0||o.send(c)})};this.log("push",`${r} ${s} (${a})`,n),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const n={access_token:r,version:ay};r&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(ht.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(oy,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:s,event:n,payload:a,ref:l}=r;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${n} ${l&&"("+l+")"||""}`,a),Array.from(this.channels).filter(c=>c._isMember(s)).forEach(c=>c._trigger(n,a,l)),this.stateChangeCallbacks.message.forEach(c=>c(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ht.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${s}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([xy],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class rc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ge(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class gy extends rc{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Gl extends rc{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var vy=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(d){try{u(s.next(d))}catch(h){l(h)}}function o(d){try{u(s.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):n(d.value).then(c,o)}u((s=s.apply(e,t||[])).next())})};const Of=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Rn(async()=>{const{default:s}=await Promise.resolve().then(()=>Ns);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},wy=()=>vy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Rn(()=>Promise.resolve().then(()=>Ns),void 0)).Response:Response}),Jl=e=>{if(Array.isArray(e))return e.map(r=>Jl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[n]=Jl(s)}),t};var $r=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(d){try{u(s.next(d))}catch(h){l(h)}}function o(d){try{u(s.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):n(d.value).then(c,o)}u((s=s.apply(e,t||[])).next())})};const Va=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jy=(e,t,r)=>$r(void 0,void 0,void 0,function*(){const s=yield wy();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{t(new gy(Va(n),e.status||500))}).catch(n=>{t(new Gl(Va(n),n))}):t(new Gl(Va(e),e))}),_y=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),r))};function An(e,t,r,s,n,a){return $r(this,void 0,void 0,function*(){return new Promise((l,c)=>{e(r,_y(t,s,n,a)).then(o=>{if(!o.ok)throw o;return s!=null&&s.noResolveJson?o:o.json()}).then(o=>l(o)).catch(o=>jy(o,c,s))})})}function zi(e,t,r,s){return $r(this,void 0,void 0,function*(){return An(e,"GET",t,r,s)})}function Wt(e,t,r,s,n){return $r(this,void 0,void 0,function*(){return An(e,"POST",t,s,n,r)})}function Ny(e,t,r,s,n){return $r(this,void 0,void 0,function*(){return An(e,"PUT",t,s,n,r)})}function by(e,t,r,s){return $r(this,void 0,void 0,function*(){return An(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Af(e,t,r,s,n){return $r(this,void 0,void 0,function*(){return An(e,"DELETE",t,s,n,r)})}var ze=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(d){try{u(s.next(d))}catch(h){l(h)}}function o(d){try{u(s.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):n(d.value).then(c,o)}u((s=s.apply(e,t||[])).next())})};const ky={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Tu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Sy{constructor(t,r={},s,n){this.url=t,this.headers=r,this.bucketId=s,this.fetch=Of(n)}uploadOrUpdate(t,r,s,n){return ze(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},Tu),n);let c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const o=l.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",l.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=s,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,o&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),n!=null&&n.headers&&(c=Object.assign(Object.assign({},c),n.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:a,headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(a){if(ge(a))return{data:null,error:a};throw a}})}upload(t,r,s){return ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,n){return ze(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),l=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",r);try{let o;const u=Object.assign({upsert:Tu.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.append("cacheControl",u.cacheControl)):(o=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(c.toString(),{method:"PUT",body:o,headers:d}),f=yield h.json();return h.ok?{data:{path:a,fullPath:f.Key},error:null}:{data:null,error:f}}catch(o){if(ge(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(t,r){return ze(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const a=yield Wt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),l=new URL(this.url+a.url),c=l.searchParams.get("token");if(!c)throw new rc("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:c},error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}update(t,r,s){return ze(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return ze(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}copy(t,r,s){return ze(this,void 0,void 0,function*(){try{return{data:{path:(yield Wt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}createSignedUrl(t,r,s){return ze(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),a=yield Wt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}createSignedUrls(t,r,s){return ze(this,void 0,void 0,function*(){try{const n=yield Wt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}download(t,r){return ze(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"";try{const c=this._getFinalPath(t);return{data:yield(yield zi(this.fetch,`${this.url}/${n}/${c}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(ge(c))return{data:null,error:c};throw c}})}info(t){return ze(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield zi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Jl(s),error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}exists(t){return ze(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield by(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ge(s)&&s instanceof Gl){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),n=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&n.push(a);const c=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});o!==""&&n.push(o);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${s}${u}`)}}}remove(t){return ze(this,void 0,void 0,function*(){try{return{data:yield Af(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}list(t,r,s){return ze(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},ky),r),{prefix:t||""});return{data:yield Wt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Ey="2.7.1",Cy={"X-Client-Info":`storage-js/${Ey}`};var Dr=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(d){try{u(s.next(d))}catch(h){l(h)}}function o(d){try{u(s.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):n(d.value).then(c,o)}u((s=s.apply(e,t||[])).next())})};class Py{constructor(t,r={},s){this.url=t,this.headers=Object.assign(Object.assign({},Cy),r),this.fetch=Of(s)}listBuckets(){return Dr(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}getBucket(t){return Dr(this,void 0,void 0,function*(){try{return{data:yield zi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Dr(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return Dr(this,void 0,void 0,function*(){try{return{data:yield Ny(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Dr(this,void 0,void 0,function*(){try{return{data:yield Wt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Dr(this,void 0,void 0,function*(){try{return{data:yield Af(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}})}}class Ty extends Py{constructor(t,r={},s){super(t,r,s)}from(t){return new Sy(this.url,this.headers,t,this.fetch)}}const Ry="2.50.2";let zs="";typeof Deno<"u"?zs="deno":typeof document<"u"?zs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zs="react-native":zs="node";const Oy={"X-Client-Info":`supabase-js-${zs}/${Ry}`},Ay={headers:Oy},Ly={schema:"public"},$y={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Iy={};var Uy=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(d){try{u(s.next(d))}catch(h){l(h)}}function o(d){try{u(s.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):n(d.value).then(c,o)}u((s=s.apply(e,t||[])).next())})};const Dy=e=>{let t;return e?t=e:typeof fetch>"u"?t=yf:t=fetch,(...r)=>t(...r)},My=()=>typeof Headers>"u"?gf:Headers,Fy=(e,t,r)=>{const s=Dy(r),n=My();return(a,l)=>Uy(void 0,void 0,void 0,function*(){var c;const o=(c=yield t())!==null&&c!==void 0?c:e;let u=new n(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${o}`),s(a,Object.assign(Object.assign({},l),{headers:u}))})};var zy=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(d){try{u(s.next(d))}catch(h){l(h)}}function o(d){try{u(s.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):n(d.value).then(c,o)}u((s=s.apply(e,t||[])).next())})};function By(e){return e.endsWith("/")?e:e+"/"}function qy(e,t){var r,s;const{db:n,auth:a,realtime:l,global:c}=e,{db:o,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),l),global:Object.assign(Object.assign(Object.assign({},h),c),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=c==null?void 0:c.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>zy(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const Lf="2.70.0",Br=30*1e3,Yl=3,Wa=Yl*Br,Vy="http://localhost:9999",Wy="supabase.auth.token",Hy={"X-Client-Info":`gotrue-js/${Lf}`},Xl="X-Supabase-Api-Version",$f={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Qy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ky=6e5;class sc extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function V(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Gy extends sc{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Jy(e){return V(e)&&e.name==="AuthApiError"}class If extends sc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class fr extends sc{constructor(t,r,s,n){super(t,s,n),this.name=r,this.status=s}}class Bt extends fr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yy(e){return V(e)&&e.name==="AuthSessionMissingError"}class Yn extends fr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xn extends fr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Zn extends fr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Xy(e){return V(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ru extends fr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Zl extends fr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ha(e){return V(e)&&e.name==="AuthRetryableFetchError"}class Ou extends fr{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class en extends fr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Au=` 	
\r=`.split(""),Zy=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Au.length;t+=1)e[Au[t].charCodeAt(0)]=-2;for(let t=0;t<Bi.length;t+=1)e[Bi[t].charCodeAt(0)]=t;return e})();function Lu(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Bi[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Bi[s]),t.queuedBits-=6}}function Uf(e,t,r){const s=Zy[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function $u(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=l=>{rg(l,s,r)};for(let l=0;l<e.length;l+=1)Uf(e.charCodeAt(l),n,a);return t.join("")}function eg(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function tg(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}eg(s,t)}}function rg(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function sg(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)Uf(e.charCodeAt(n),r,s);return new Uint8Array(t)}function ng(e){const t=[];return tg(e,r=>t.push(r)),new Uint8Array(t)}function ig(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};return e.forEach(n=>Lu(n,r,s)),Lu(null,r,s),t.join("")}function ag(e){return Math.round(Date.now()/1e3)+e}function lg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ct=()=>typeof window<"u"&&typeof document<"u",mr={tested:!1,writable:!1},tn=()=>{if(!ct())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mr.tested)return mr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),mr.tested=!0,mr.writable=!0}catch{mr.tested=!0,mr.writable=!1}return mr.writable};function og(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,a)=>{t[a]=n})}catch{}return r.searchParams.forEach((s,n)=>{t[n]=s}),t}const Df=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Rn(async()=>{const{default:s}=await Promise.resolve().then(()=>Ns);return{default:s}},void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},cg=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Mf=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ei=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ti=async(e,t)=>{await e.removeItem(t)};class pa{constructor(){this.promise=new pa.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}pa.promiseConstructor=Promise;function Qa(e){const t=e.split(".");if(t.length!==3)throw new en("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Qy.test(t[s]))throw new en("JWT not in base64url format");return{header:JSON.parse($u(t[0])),payload:JSON.parse($u(t[1])),signature:sg(t[2]),raw:{header:t[0],payload:t[1]}}}async function ug(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function dg(e,t){return new Promise((s,n)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){s(l);return}}catch(l){if(!t(a,l)){n(l);return}}})()})}function hg(e){return("0"+e.toString(16)).substr(-2)}function fg(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let a=0;a<56;a++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(t),Array.from(t,hg).join("")}async function mg(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(a=>String.fromCharCode(a)).join("")}async function pg(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await mg(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Mr(e,t,r=!1){const s=fg();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Mf(e,`${t}-code-verifier`,n);const a=await pg(s);return[a,s===a?"plain":"s256"]}const xg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yg(e){const t=e.headers.get(Xl);if(!t||!t.match(xg))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function gg(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function vg(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fr(e){if(!wg.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var jg=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r};const yr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_g=[502,503,504];async function Iu(e){var t;if(!cg(e))throw new Zl(yr(e),0);if(_g.includes(e.status))throw new Zl(yr(e),e.status);let r;try{r=await e.json()}catch(a){throw new If(yr(a),a)}let s;const n=yg(e);if(n&&n.getTime()>=$f["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Ou(yr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Bt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Ou(yr(r),e.status,r.weak_password.reasons);throw new Gy(yr(r),e.status||500,s)}const Ng=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function H(e,t,r,s){var n;const a=Object.assign({},s==null?void 0:s.headers);a[Xl]||(a[Xl]=$f["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const l=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(l.redirect_to=s.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",o=await bg(e,t,r+c,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(o):{data:Object.assign({},o),error:null}}async function bg(e,t,r,s,n,a){const l=Ng(t,s,n,a);let c;try{c=await e(r,Object.assign({},l))}catch(o){throw console.error(o),new Zl(yr(o),0)}if(c.ok||await Iu(c),s!=null&&s.noResolveJson)return c;try{return await c.json()}catch(o){await Iu(o)}}function St(e){var t;let r=null;Cg(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=ag(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function Uu(e){const t=St(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Kt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function kg(e){return{data:e,error:null}}function Sg(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a}=e,l=jg(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a},o=Object.assign({},l);return{data:{properties:c,user:o},error:null}}function Eg(e){return e}function Cg(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ka=["global","local","others"];var Pg=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r};class Tg{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=Df(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Ka[0]){if(Ka.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ka.join(", ")}`);try{return await H(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await H(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Kt})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=Pg(t,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await H(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Sg,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(V(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await H(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Kt})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,n,a,l,c,o;try{const u={nextPage:null,lastPage:0,total:0},d=await H(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:Eg});if(d.error)throw d.error;const h=await d.json(),f=(l=d.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(o=(c=d.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&o!==void 0?o:[];return y.length>0&&(y.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=w}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(V(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Fr(t);try{return await H(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Kt})}catch(r){if(V(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Fr(t);try{return await H(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Kt})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Fr(t);try{return await H(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Kt})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Fr(t.userId);try{const{data:r,error:s}=await H(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(V(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Fr(t.userId),Fr(t.id);try{return{data:await H(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(V(r))return{data:null,error:r};throw r}}}const Rg={getItem:e=>tn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{tn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{tn()&&globalThis.localStorage.removeItem(e)}};function Du(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Og(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zr={debug:!!(globalThis&&tn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ff extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Ag extends Ff{}async function Lg(e,t,r){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),zr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Ag(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(zr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Og();const $g={url:Vy,storageKey:Wy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Hy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mu(e,t,r){return await r()}class _n{constructor(t){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_n.nextInstanceID,_n.nextInstanceID+=1,this.instanceID>0&&ct()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},$g),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Tg({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Df(n.fetch),this.lock=n.lock||Mu,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ct()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Lg:this.lock=Mu,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:tn()?this.storage=Rg:(this.memoryStorage={},this.storage=Du(this.memoryStorage)):(this.memoryStorage={},this.storage=Du(this.memoryStorage)),ct()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Lf}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=og(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),ct()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:a}=await this._getSessionFromURL(r,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Xy(a)){const o=(t=a.details)===null||t===void 0?void 0:t.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:c}=n;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return V(r)?{error:r}:{error:new If("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,n;try{const a=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:St}),{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const o=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(a){if(V(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,s,n;try{let a;if("email"in t){const{email:d,password:h,options:f}=t;let y=null,g=null;this.flowType==="pkce"&&([y,g]=await Mr(this.storage,this.storageKey)),a=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:y,code_challenge_method:g},xform:St})}else if("phone"in t){const{phone:d,password:h,options:f}=t;a=await H(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:St})}else throw new Xn("You must provide either an email or phone number and a password");const{data:l,error:c}=a;if(c||!l)return{data:{user:null,session:null},error:c};const o=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(a){if(V(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:l,options:c}=t;r=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Uu})}else if("phone"in t){const{phone:a,password:l,options:c}=t;r=await H(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Uu})}else throw new Xn("You must provide either an email or phone number and a password");const{data:s,error:n}=r;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Yn}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,n,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,s,n,a,l,c,o,u,d,h,f,y;let g,w;if("message"in t)g=t.message,w=t.signature;else{const{chain:v,wallet:x,statement:m,options:p}=t;let _;if(ct())if(typeof x=="object")_=x;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))_=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const N=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const E=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),m?{statement:m}:null));let b;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")b=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)b=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in b&&"signature"in b&&(typeof b.signedMessage=="string"||b.signedMessage instanceof Uint8Array)&&b.signature instanceof Uint8Array)g=typeof b.signedMessage=="string"?b.signedMessage:new TextDecoder().decode(b.signedMessage),w=b.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${N.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(n=(s=p==null?void 0:p.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((a=p==null?void 0:p.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(b=>`- ${b}`)]:[]].join(`
`);const E=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=E}}try{const{data:v,error:x}=await H(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:ig(w)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:St});if(x)throw x;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Yn}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:x})}catch(v){if(V(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(t){const r=await ei(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{const{data:a,error:l}=await H(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:St});if(await ti(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Yn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:n??null}),error:l})}catch(a){if(V(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:s,token:n,access_token:a,nonce:l}=t,c=await H(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:St}),{data:o,error:u}=c;return u?{data:{user:null,session:null},error:u}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Yn}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:u})}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,n,a,l;try{if("email"in t){const{email:c,options:o}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Mr(this.storage,this.storageKey));const{error:h}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=o==null?void 0:o.data)!==null&&r!==void 0?r:{},create_user:(s=o==null?void 0:o.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:c,options:o}=t,{data:u,error:d}=await H(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(a=o==null?void 0:o.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(l=o==null?void 0:o.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Xn("You must provide either an email or phone number.")}catch(c){if(V(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(t){var r,s;try{let n,a;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:c}=await H(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:St});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const o=l.session,u=l.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(n){if(V(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var r,s,n;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Mr(this.storage,this.storageKey)),await H(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:kg})}catch(a){if(V(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Bt;const{error:n}=await H(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(V(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:n,options:a}=t,{error:l}=await H(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:s,type:n,options:a}=t,{data:l,error:c}=await H(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c}}throw new Xn("You must provide either an email or phone number and a type")}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ei(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Wa:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(o,u,d)=>(!l&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(o,u,d))})}return{data:{session:t},error:null}}const{session:n,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Kt}):await this._useSession(async r=>{var s,n,a;const{data:l,error:c}=r;if(c)throw c;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bt}:await H(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0,xform:Kt})})}catch(r){if(V(r))return Yy(r)&&(await this._removeSession(),await ti(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:n,error:a}=s;if(a)throw a;if(!n.session)throw new Bt;const l=n.session;let c=null,o=null;this.flowType==="pkce"&&t.email!=null&&([c,o]=await Mr(this.storage,this.storageKey));const{data:u,error:d}=await H(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:o}),jwt:l.access_token,xform:Kt});if(d)throw d;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(s){if(V(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Bt;const r=Date.now()/1e3;let s=r,n=!0,a=null;const{payload:l}=Qa(t.access_token);if(l.exp&&(s=l.exp,n=s<=r),n){const{session:c,error:o}=await this._callRefreshToken(t.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:o}=await this._getUser(t.access_token);if(o)throw o;a={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(V(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:l,error:c}=r;if(c)throw c;t=(s=l.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Bt;const{session:n,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(V(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ct())throw new Zn("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Zn(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ru("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zn("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ru("No code detected.");const{data:m,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:a,refresh_token:l,expires_in:c,expires_at:o,token_type:u}=t;if(!a||!c||!l||!u)throw new Zn("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(c);let f=d+h;o&&(f=parseInt(o));const y=f-d;y*1e3<=Br&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:w,error:v}=await this._getUser(a);if(v)throw v;const x={provider_token:s,provider_refresh_token:n,access_token:a,expires_in:h,expires_at:f,refresh_token:l,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(s){if(V(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ei(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:a}=r;if(a)return{error:a};const l=(s=n.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:c}=await this.admin.signOut(l,t);if(c&&!(Jy(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return t!=="others"&&(await this._removeSession(),await ti(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=lg(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,n;try{const{data:{session:a},error:l}=r;if(l)throw l;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Mr(this.storage,this.storageKey,!0));try{return await H(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(V(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(V(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:s,error:n}=await this._useSession(async a=>{var l,c,o,u,d;const{data:h,error:f}=a;if(f)throw f;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await H(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return ct()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(V(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,n;const{data:a,error:l}=r;if(l)throw l;return await H(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await dg(async n=>(n>0&&await ug(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await H(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:St})),(n,a)=>{const l=200*Math.pow(2,n);return a&&Ha(a)&&Date.now()+l-s<Br})}catch(s){if(this._debug(r,"error",s),V(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),ct()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ei(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const n=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Wa;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${Wa}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Ha(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Bt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new pa;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new Bt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(n,"error",a),V(a)){const l={session:null,error:a};return Ha(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,s=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,r)}catch(o){a.push(o)}});if(await Promise.all(l),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Mf(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await ti(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ct()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Br);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-t)/Br);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Br}ms, refresh threshold is ${Yl} ticks`),n<=Yl&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Ff)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ct()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,l]=await Mr(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});n.push(c.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);n.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;return a?{data:null,error:a}:await H(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,n;const{data:a,error:l}=r;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:o,error:u}=await H(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((n=o==null?void 0:o.totp)===null||n===void 0)&&n.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(r){if(V(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;if(a)return{data:null,error:a};const{data:l,error:c}=await H(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(r){if(V(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;return a?{data:null,error:a}:await H(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(V(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(t==null?void 0:t.factors)||[],n=s.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=s.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:s,totp:n,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:n},error:a}=t;if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Qa(n.access_token);let c=null;l.aal&&(c=l.aal);let o=c;((s=(r=n.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(o="aal2");const d=l.amr||[];return{data:{currentLevel:c,nextLevel:o,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(l=>l.kid===t);if(s||(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+Ky>Date.now()))return s;const{data:n,error:a}=await H(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!n.keys||n.keys.length===0)throw new en("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(l=>l.kid===t),!s)throw new en("No matching signing key found in JWKS");return s}async getClaims(t,r={keys:[]}){try{let s=t;if(!s){const{data:y,error:g}=await this.getSession();if(g||!y.session)return{data:null,error:g};s=y.session.access_token}const{header:n,payload:a,signature:l,raw:{header:c,payload:o}}=Qa(s);if(gg(a.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(s);if(y)throw y;return{data:{claims:a,header:n,signature:l},error:null}}const u=vg(n.alg),d=await this.fetchJwk(n.kid,r),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,l,ng(`${c}.${o}`)))throw new en("Invalid JWT signature");return{data:{claims:a,header:n,signature:l},error:null}}catch(s){if(V(s))return{data:null,error:s};throw s}}}_n.nextInstanceID=0;const Ig=_n;class Ug extends Ig{constructor(t){super(t)}}var Dg=function(e,t,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function c(d){try{u(s.next(d))}catch(h){l(h)}}function o(d){try{u(s.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):n(d.value).then(c,o)}u((s=s.apply(e,t||[])).next())})};class Mg{constructor(t,r,s){var n,a,l;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const c=By(t),o=new URL(c);this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const u=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:Ly,realtime:Iy,auth:Object.assign(Object.assign({},$y),{storageKey:u}),global:Ay},h=qy(s??{},d);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=Fy(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new ry(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new O0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ty(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Dg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:n,storageKey:a,flowType:l,lock:c,debug:o},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ug({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:n,flowType:l,lock:c,debug:o,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new yy(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Fg=(e,t,r)=>new Mg(e,t,r),zg="https://yhqitkzfcxfkxjcuxqvi.supabase.co",Bg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlocWl0a3pmY3hma3hqY3V4cXZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyNDc5MTcsImV4cCI6MjA3NDgyMzkxN30.epWlWLBxyWfGXK5BkAY1qg3KcEBA1m7Tkav2Li4GcdE",D=Fg(zg,Bg,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),zf=j.createContext(void 0);function qg({children:e}){const[t,r]=j.useState(null),[s,n]=j.useState(null),[a,l]=j.useState(null),[c,o]=j.useState(!0),[u,d]=j.useState(null),h=async m=>{try{const{data:p,error:_}=await D.from("profiles").select("*").eq("id",m).maybeSingle();if(_){console.error("Error fetching profile:",_),d("Failed to load user profile. Please try again."),o(!1);return}l(p),p!=null&&p.approved||(await D.auth.signOut(),r(null),n(null),l(null)),o(!1)}catch(p){console.error("Error checking approval:",p),d("An unexpected error occurred. Please refresh the page."),o(!1)}};j.useEffect(()=>{let m=!0;const p=setTimeout(()=>{m&&c&&(console.error("Authentication initialization timeout"),d("Failed to initialize authentication. Please check your connection and refresh the page."),o(!1))},1e4);D.auth.getSession().then(async({data:{session:N},error:E})=>{if(m){if(E){console.error("Error getting session:",E),d("Failed to connect to authentication service. Please check your connection."),o(!1),clearTimeout(p);return}n(N),r((N==null?void 0:N.user)??null),N!=null&&N.user?await h(N.user.id):o(!1),clearTimeout(p)}}).catch(N=>{m&&(console.error("Unexpected error during session initialization:",N),d("Failed to initialize authentication. Please refresh the page."),o(!1),clearTimeout(p))});const{data:{subscription:_}}=D.auth.onAuthStateChange(async(N,E)=>{m&&(n(E),r((E==null?void 0:E.user)??null),d(null),E!=null&&E.user?await h(E.user.id):(l(null),o(!1)))});return()=>{m=!1,clearTimeout(p),_.unsubscribe()}},[]);const x={user:t,session:s,profile:a,loading:c,authError:u,signIn:async(m,p)=>{const{data:_,error:N}=await D.auth.signInWithPassword({email:m,password:p});if(N)return{error:N};if(_.user){const{data:E,error:b}=await D.from("profiles").select("approved").eq("id",_.user.id).maybeSingle();if(b)return{error:b};if(!(E!=null&&E.approved))return await D.auth.signOut(),{error:{message:"Your account is pending approval. Please wait for an administrator to approve your account before you can log in.",name:"ApprovalPending"}}}return{error:null}},signUp:async(m,p,_)=>{const{error:N}=await D.auth.signUp({email:m,password:p,options:{data:{full_name:_}}});return{error:N}},signOut:async()=>{await D.auth.signOut()},resetPassword:async m=>{const{error:p}=await D.auth.resetPasswordForEmail(m,{redirectTo:`${window.location.origin}/reset-password`});return{error:p}},updatePassword:async m=>{const{error:p}=await D.auth.updateUser({password:m});return{error:p}}};return i.jsx(zf.Provider,{value:x,children:e})}function Ee(){const e=j.useContext(zf);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function Is({children:e,requireRole:t}){const{user:r,profile:s,loading:n}=Ee();return n?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):r?t&&s&&!t.includes(s.role)?i.jsx(Fi,{to:"/dashboard",replace:!0}):i.jsx(i.Fragment,{children:e}):i.jsx(Fi,{to:"/login",replace:!0})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),q=(e,t)=>{const r=j.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:c="",children:o,...u},d)=>j.createElement("svg",{ref:d,...Vg,width:n,height:n,stroke:s,strokeWidth:l?Number(a)*24/Number(n):a,className:["lucide",`lucide-${Wg(e)}`,c].join(" "),...u},[...t.map(([h,f])=>j.createElement(h,f)),...Array.isArray(o)?o:[o]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=q("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=q("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=q("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=q("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=q("CalendarX",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"10",x2:"14",y1:"14",y2:"18",key:"1g3qc0"}],["line",{x1:"14",x2:"10",y1:"14",y2:"18",key:"1az83m"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=q("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=q("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=q("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=q("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=q("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=q("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=q("FileEdit",[["path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5",key:"1bg6eb"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z",key:"1rgxu8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=q("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=q("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=q("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=q("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=q("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=q("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=q("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=q("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=q("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=q("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=q("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=q("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=q("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=q("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=q("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=q("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function av({children:e}){var u,d,h;const{user:t,profile:r,signOut:s}=Ee(),n=Ar(),l=[{name:"Dashboard",href:"/dashboard",icon:Zg},{name:"Available Exams",href:"/available-exams",icon:wt},{name:"Exam History",href:"/exam-history",icon:Yg},{name:"Create Exam",href:"/exams/create",icon:Ot,requireRole:["admin","creator"]},{name:"Question Bank",href:"/questions",icon:Tr,requireRole:["admin","creator"]},{name:"Users",href:"/users",icon:Lt,requireRole:["admin","creator"]},{name:"Settings",href:"/settings",icon:Hf}].filter(f=>f.requireRole?(r==null?void 0:r.role)&&f.requireRole.includes(r.role):!0),c=f=>n.pathname===f||n.pathname.startsWith(f+"/"),o=async()=>{try{await s()}catch(f){console.error("Error signing out:",f)}};return i.jsxs("div",{className:"flex h-screen bg-secondary-50",children:[i.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col",children:i.jsxs("div",{className:"flex flex-col flex-grow pt-5 overflow-y-auto bg-white border-r border-secondary-200",children:[i.jsxs("div",{className:"flex items-center flex-shrink-0 px-4",children:[i.jsx(Tr,{className:"h-8 w-8 text-primary-600"}),i.jsx("span",{className:"ml-2 text-xl font-semibold text-secondary-900",children:"CBT System"})]}),i.jsx("div",{className:"mt-8 flex-grow flex flex-col",children:i.jsx("nav",{className:"flex-1 px-2 space-y-1",children:l.map(f=>{const y=f.icon;return i.jsxs(Ie,{to:f.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors ${c(f.href)?"bg-primary-100 text-primary-900":"text-secondary-600 hover:bg-secondary-50 hover:text-secondary-900"}`,children:[i.jsx(y,{className:`mr-3 flex-shrink-0 h-5 w-5 ${c(f.href)?"text-primary-500":"text-secondary-400"}`}),f.name]},f.name)})})}),i.jsx("div",{className:"flex-shrink-0 flex border-t border-secondary-200 p-4",children:i.jsxs("div",{className:"flex items-center w-full",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center",children:i.jsx("span",{className:"text-sm font-medium text-primary-600",children:(d=((u=t==null?void 0:t.user_metadata)==null?void 0:u.full_name)||(t==null?void 0:t.email))==null?void 0:d.charAt(0).toUpperCase()})})}),i.jsx("div",{className:"ml-3 flex-1",children:i.jsx("p",{className:"text-sm font-medium text-secondary-900 truncate",children:((h=t==null?void 0:t.user_metadata)==null?void 0:h.full_name)||(t==null?void 0:t.email)})}),i.jsx("button",{onClick:o,className:"ml-3 flex-shrink-0 p-1 rounded-full text-secondary-400 hover:text-secondary-500 focus:outline-none focus:ring-2 focus:ring-primary-500",title:"Sign out",children:i.jsx(Vf,{className:"h-4 w-4"})})]})})]})}),i.jsx("div",{className:"flex flex-col flex-1 overflow-hidden",children:i.jsx("main",{className:"flex-1 relative overflow-y-auto focus:outline-none",children:i.jsx("div",{className:"py-6",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:e})})})})]})}function lv(){const{user:e,signIn:t,signUp:r,loading:s,authError:n}=Ee(),[a]=xf(),[l,c]=j.useState(!0),[o,u]=j.useState(""),[d,h]=j.useState(""),[f,y]=j.useState(""),[g,w]=j.useState(!1),[v,x]=j.useState(""),[m,p]=j.useState(""),[_,N]=j.useState(!1),E=a.get("redirect");if(e)return i.jsx(Fi,{to:E||"/dashboard",replace:!0});const b=async O=>{O.preventDefault(),x(""),N(!0);try{let k;l?(k=await t(o,d),k.error&&(k.error.message==="Invalid login credentials"?x("Invalid email or password"):x(k.error.message))):(k=await r(o,d,f),k.error?x(k.error.message):(x(""),p("Account created successfully! Please wait for an administrator to approve your account before you can log in."),setTimeout(()=>{c(!0),u(""),h(""),y("")},3e3)))}catch{x("An unexpected error occurred")}finally{N(!1)}};return s?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-sm text-secondary-600",children:"Loading authentication..."})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex justify-center",children:i.jsx(Tr,{className:"h-12 w-12 text-primary-600"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-secondary-900",children:l?"Sign in to your account":"Create your account"}),i.jsx("p",{className:"mt-2 text-center text-sm text-secondary-600",children:"Computer-Based Testing System"}),E&&i.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsx("p",{className:"text-sm text-blue-700 text-center",children:"Please log in to access your exam"})})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:b,children:[i.jsxs("div",{className:"space-y-4",children:[!l&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-secondary-700",children:"Full Name"}),i.jsx("input",{id:"fullName",name:"fullName",type:"text",required:!l,className:"input mt-1",placeholder:"Enter your full name",value:f,onChange:O=>y(O.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-secondary-700",children:"Email address"}),i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"input mt-1",placeholder:"Enter your email",value:o,onChange:O=>u(O.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-secondary-700",children:"Password"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"password",name:"password",type:g?"text":"password",autoComplete:l?"current-password":"new-password",required:!0,className:"input pr-10",placeholder:"Enter your password",value:d,onChange:O=>h(O.target.value)}),i.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>w(!g),children:g?i.jsx(qi,{className:"h-4 w-4 text-secondary-400"}):i.jsx(xs,{className:"h-4 w-4 text-secondary-400"})})]})]}),l&&i.jsx("div",{className:"flex items-center justify-end",children:i.jsx(Ie,{to:"/forgot-password",className:"text-sm text-primary-600 hover:text-primary-500",children:"Forgot password?"})})]}),n&&i.jsxs("div",{className:"rounded-md bg-red-50 border border-red-200 p-4",children:[i.jsx("div",{className:"text-sm text-red-700 font-medium",children:"Connection Error"}),i.jsx("div",{className:"text-sm text-red-600 mt-1",children:n})]}),v&&i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsx("div",{className:"text-sm text-red-700",children:v})}),m&&i.jsx("div",{className:"rounded-md bg-green-50 p-4",children:i.jsx("div",{className:"text-sm text-green-700",children:m})}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:_,className:"btn-primary w-full py-2 px-4 disabled:opacity-50",children:_?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),l?"Signing in...":"Creating account..."]}):l?"Sign in":"Create account"})}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"button",className:"text-sm text-primary-600 hover:text-primary-500",onClick:()=>{c(!l),x("")},children:l?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})}function ov(){const{resetPassword:e}=Ee(),[t,r]=j.useState(""),[s,n]=j.useState(""),[a,l]=j.useState(!1),[c,o]=j.useState(!1),u=async d=>{d.preventDefault(),n(""),o(!0);try{const h=await e(t);h.error?n(h.error.message||"Failed to send password reset email"):l(!0)}catch{n("An unexpected error occurred")}finally{o(!1)}};return a?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex justify-center",children:i.jsx(Tr,{className:"h-12 w-12 text-primary-600"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-secondary-900",children:"Check your email"}),i.jsx("p",{className:"mt-2 text-center text-sm text-secondary-600",children:"Computer-Based Testing System"})]}),i.jsxs("div",{className:"rounded-lg bg-green-50 border border-green-200 p-6",children:[i.jsxs("p",{className:"text-sm text-green-800 text-center",children:["We've sent a password reset link to ",i.jsx("strong",{children:t})]}),i.jsx("p",{className:"text-sm text-green-700 text-center mt-2",children:"Please check your email and click the link to reset your password."})]}),i.jsx("div",{className:"text-center",children:i.jsxs(Ie,{to:"/login",className:"inline-flex items-center text-sm text-primary-600 hover:text-primary-500",children:[i.jsx(Fu,{className:"h-4 w-4 mr-1"}),"Back to login"]})})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex justify-center",children:i.jsx(Tr,{className:"h-12 w-12 text-primary-600"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-secondary-900",children:"Reset your password"}),i.jsx("p",{className:"mt-2 text-center text-sm text-secondary-600",children:"Enter your email address and we'll send you a link to reset your password"})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-secondary-700",children:"Email address"}),i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"input mt-1",placeholder:"Enter your email",value:t,onChange:d=>r(d.target.value)})]}),s&&i.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 p-4",children:i.jsx("div",{className:"text-sm text-red-700",children:s})}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:c,className:"btn-primary w-full py-2 px-4 disabled:opacity-50",children:c?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending reset link..."]}):"Send reset link"})}),i.jsx("div",{className:"text-center",children:i.jsxs(Ie,{to:"/login",className:"inline-flex items-center text-sm text-primary-600 hover:text-primary-500",children:[i.jsx(Fu,{className:"h-4 w-4 mr-1"}),"Back to login"]})})]})]})})}function cv(){const{updatePassword:e}=Ee(),t=Lr(),[r,s]=j.useState(""),[n,a]=j.useState(""),[l,c]=j.useState(!1),[o,u]=j.useState(!1),[d,h]=j.useState(""),[f,y]=j.useState(!1),[g,w]=j.useState(!1),[v,x]=j.useState("weak");j.useEffect(()=>{if(r.length===0){x("weak");return}const N=/[A-Z]/.test(r),E=/[a-z]/.test(r),b=/\d/.test(r),O=/[!@#$%^&*(),.?":{}|<>]/.test(r),k=r.length>=8,S=[N,E,b,O,k].filter(Boolean).length;S<=2?x("weak"):S<=4?x("medium"):x("strong")},[r]);const m=async N=>{if(N.preventDefault(),h(""),r.length<6){h("Password must be at least 6 characters long");return}if(r!==n){h("Passwords do not match");return}w(!0);try{const E=await e(r);E.error?h(E.error.message||"Failed to update password"):(y(!0),setTimeout(()=>{t("/login")},2e3))}catch{h("An unexpected error occurred")}finally{w(!1)}};if(f)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"max-w-md w-full space-y-8",children:i.jsxs("div",{children:[i.jsx("div",{className:"flex justify-center",children:i.jsx(ke,{className:"h-16 w-16 text-green-600"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-secondary-900",children:"Password updated successfully"}),i.jsx("p",{className:"mt-2 text-center text-sm text-secondary-600",children:"You will be redirected to the login page..."})]})})});const p=()=>{switch(v){case"weak":return"bg-red-500";case"medium":return"bg-yellow-500";case"strong":return"bg-green-500"}},_=()=>{switch(v){case"weak":return"w-1/3";case"medium":return"w-2/3";case"strong":return"w-full"}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex justify-center",children:i.jsx(Tr,{className:"h-12 w-12 text-primary-600"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-secondary-900",children:"Create new password"}),i.jsx("p",{className:"mt-2 text-center text-sm text-secondary-600",children:"Enter a new password for your account"})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-secondary-700",children:"New Password"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"password",name:"password",type:l?"text":"password",autoComplete:"new-password",required:!0,className:"input pr-10",placeholder:"Enter new password",value:r,onChange:N=>s(N.target.value)}),i.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>c(!l),children:l?i.jsx(qi,{className:"h-4 w-4 text-secondary-400"}):i.jsx(xs,{className:"h-4 w-4 text-secondary-400"})})]}),r.length>0&&i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-xs text-secondary-600",children:"Password strength:"}),i.jsx("span",{className:`text-xs font-medium ${v==="weak"?"text-red-600":v==="medium"?"text-yellow-600":"text-green-600"}`,children:v.charAt(0).toUpperCase()+v.slice(1)})]}),i.jsx("div",{className:"w-full bg-secondary-200 rounded-full h-2",children:i.jsx("div",{className:`${p()} ${_()} h-2 rounded-full transition-all duration-300`})})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-secondary-700",children:"Confirm Password"}),i.jsxs("div",{className:"mt-1 relative",children:[i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",autoComplete:"new-password",required:!0,className:"input pr-10",placeholder:"Confirm new password",value:n,onChange:N=>a(N.target.value)}),i.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>u(!o),children:o?i.jsx(qi,{className:"h-4 w-4 text-secondary-400"}):i.jsx(xs,{className:"h-4 w-4 text-secondary-400"})})]})]})]}),i.jsxs("div",{className:"text-xs text-secondary-600 bg-secondary-100 border border-secondary-200 rounded-lg p-3",children:[i.jsx("p",{className:"font-medium mb-1",children:"Password requirements:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"At least 6 characters long"}),i.jsx("li",{children:"Mix of uppercase and lowercase letters"}),i.jsx("li",{children:"Include numbers and special characters"})]})]}),d&&i.jsx("div",{className:"rounded-md bg-red-50 border border-red-200 p-4",children:i.jsx("div",{className:"text-sm text-red-700",children:d})}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:g,className:"btn-primary w-full py-2 px-4 disabled:opacity-50",children:g?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating password..."]}):"Update password"})})]})]})})}function uv(){const{user:e}=Ee(),[t,r]=j.useState({totalExams:0,activeExams:0,totalAttempts:0,averageScore:0}),[s,n]=j.useState([]),[a,l]=j.useState(!0),[c,o]=j.useState(null),u=async()=>{if(e)try{l(!0),o(null);const{data:d,error:h}=await D.from("exams").select(`
          *,
          exam_attempts(count)
        `).eq("creator_id",e.id).order("created_at",{ascending:!1});if(h)throw h;const f=d||[],y=f.slice(0,5).map(p=>({...p,attempts_count:Array.isArray(p.exam_attempts)?p.exam_attempts.length:0}));n(y);const g=f.length,w=f.filter(p=>p.status==="published").length,v=f.map(p=>p.id);let x=0,m=0;if(v.length>0){const{data:p,error:_}=await D.from("exam_attempts").select("score").in("exam_id",v).not("completed_at","is",null);if(_)throw _;if(x=(p==null?void 0:p.length)||0,x>0){const N=(p==null?void 0:p.filter(E=>E.score!==null))||[];if(N.length>0){const E=N.reduce((b,O)=>b+(O.score||0),0);m=Math.round(E/N.length)}}}r({totalExams:g,activeExams:w,totalAttempts:x,averageScore:m})}catch(d){o(d instanceof Error?d.message:"Failed to fetch dashboard data")}finally{l(!1)}};return j.useEffect(()=>{u()},[e]),{stats:t,recentExams:s,loading:a,error:c,refetch:u}}function ic(){const{user:e}=Ee(),[t,r]=j.useState([]),[s,n]=j.useState(!0),[a,l]=j.useState(null),c=async()=>{if(e)try{n(!0);const{data:f,error:y}=await D.from("exams").select(`
          *,
          subjects (*)
        `).eq("creator_id",e.id).order("created_at",{ascending:!1});if(y)throw y;r(f||[])}catch(f){l(f instanceof Error?f.message:"Failed to fetch exams")}finally{n(!1)}},o=async(f,y)=>{if(!e)throw new Error("User not authenticated");try{const{data:g,error:w}=await D.from("exams").insert({...f,creator_id:e.id}).select().single();if(w)throw w;if(y.length>0){const v=y.map((m,p)=>({...m,exam_id:g.id,order_index:p})),{error:x}=await D.from("subjects").insert(v);if(x)throw x}return await c(),g}catch(g){throw g instanceof Error?g:new Error("Failed to create exam")}},u=async(f,y,g)=>{if(!e)throw new Error("User not authenticated");try{const{data:w,error:v}=await D.from("exams").update(y).eq("id",f).eq("creator_id",e.id).select().single();if(v)throw v;const{data:x,error:m}=await D.from("subjects").select("*").eq("exam_id",f);if(m)throw m;for(let p=0;p<g.length;p++){const _=g[p],N=x==null?void 0:x[p];if(N){const{error:E}=await D.from("subjects").update({name:_.name,time_limit:_.time_limit,pass_mark:_.pass_mark,order_index:p}).eq("id",N.id);if(E)throw E}else{const{error:E}=await D.from("subjects").insert({..._,exam_id:f,order_index:p});if(E)throw E}}if(x&&x.length>g.length){const p=x.slice(g.length);for(const _ of p){const{error:N}=await D.from("subjects").delete().eq("id",_.id);if(N)throw N}}return await c(),w}catch(w){throw w instanceof Error?w:new Error("Failed to update exam")}},d=async f=>{if(!e)throw new Error("User not authenticated");try{const{data:y,error:g}=await D.from("exams").update({status:"published"}).eq("id",f).eq("creator_id",e.id).select().single();if(g)throw g;return await c(),y}catch(y){throw y instanceof Error?y:new Error("Failed to publish exam")}},h=async f=>{if(!e)throw new Error("User not authenticated");try{const{data:y,error:g}=await D.from("exams").select("status").eq("id",f).eq("creator_id",e.id).maybeSingle();if(g)throw g;if(!y)throw new Error("Exam not found or you do not have permission to delete it.");if(y.status==="published")throw new Error("Cannot delete published exams. You can only delete draft exams.");const{error:w}=await D.from("exams").delete().eq("id",f).eq("creator_id",e.id);if(w)throw w;await c()}catch(y){throw y instanceof Error?y:new Error("Failed to delete exam")}};return j.useEffect(()=>{c()},[e]),{exams:t,loading:s,error:a,createExam:o,updateExam:u,publishExam:d,deleteExam:h,refetch:c}}function dv(){var h,f,y;const{user:e,profile:t,signOut:r}=Ee(),{stats:s,recentExams:n,loading:a,error:l}=uv(),{deleteExam:c}=ic(),o=[{name:"Total Exams",value:s.totalExams.toString(),icon:Ot,color:"text-blue-600"},{name:"Active Exams",value:s.activeExams.toString(),icon:ke,color:"text-green-600"},{name:"Total Attempts",value:s.totalAttempts.toString(),icon:Lt,color:"text-purple-600"},{name:"Avg. Score",value:s.averageScore>0?`${s.averageScore}%`:"N/A",icon:Qf,color:"text-orange-600"}],u=async(g,w)=>{if(confirm(`Are you sure you want to delete "${w}"? This action cannot be undone.`))try{await c(g)}catch(v){alert(v instanceof Error?v.message:"Failed to delete exam")}},d=async()=>{if(confirm("Are you sure you want to sign out?"))try{await r()}catch(g){console.error("Error signing out:",g),alert("Failed to sign out. Please try again.")}};return a?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Dashboard"}),i.jsxs("p",{className:"text-secondary-600",children:["Welcome back, ",((h=e==null?void 0:e.user_metadata)==null?void 0:h.full_name)||(e==null?void 0:e.email)]})]})}),i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})]}):l?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Dashboard"}),i.jsxs("p",{className:"text-secondary-600",children:["Welcome back, ",((f=e==null?void 0:e.user_metadata)==null?void 0:f.full_name)||(e==null?void 0:e.email)]})]})}),i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(yt,{className:"h-5 w-5 text-red-400"}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error loading dashboard"}),i.jsx("p",{className:"text-sm text-red-700 mt-1",children:l})]})]})})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Dashboard"}),i.jsxs("p",{className:"text-secondary-600",children:["Welcome back, ",((y=e==null?void 0:e.user_metadata)==null?void 0:y.full_name)||(e==null?void 0:e.email)]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[(t==null?void 0:t.role)&&["admin","creator"].includes(t.role)&&i.jsxs(Ie,{to:"/exams/create",className:"btn-primary px-4 py-2 flex items-center space-x-2",children:[i.jsx(ls,{className:"h-4 w-4"}),i.jsx("span",{children:"Create Exam"})]}),i.jsxs("button",{onClick:d,className:"btn-outline px-4 py-2 flex items-center space-x-2 text-red-600 border-red-300 hover:bg-red-50",children:[i.jsx(Vf,{className:"h-4 w-4"}),i.jsx("span",{children:"Sign Out"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map(g=>{const w=g.icon;return i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(w,{className:`h-8 w-8 ${g.color}`})}),i.jsx("div",{className:"ml-5 w-0 flex-1",children:i.jsxs("dl",{children:[i.jsx("dt",{className:"text-sm font-medium text-secondary-500 truncate",children:g.name}),i.jsx("dd",{className:"text-lg font-medium text-secondary-900",children:g.value})]})})]})},g.name)})}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"px-6 py-4 border-b border-secondary-200",children:i.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Recent Exams"})}),n.length>0?i.jsx("div",{className:"divide-y divide-secondary-200",children:n.map(g=>i.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Ot,{className:"h-5 w-5 text-secondary-400"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-secondary-900",children:g.title}),i.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[i.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g.status==="published"?"bg-green-100 text-green-800":g.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:[g.status==="published"?i.jsx(ke,{className:"h-3 w-3 mr-1"}):i.jsx(bt,{className:"h-3 w-3 mr-1"}),g.status]}),i.jsxs("span",{className:"text-xs text-secondary-500",children:[g.attempts_count," attempts"]}),i.jsxs("span",{className:"text-xs text-secondary-500",children:["Created ",new Date(g.created_at).toLocaleDateString()]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(Ie,{to:`/exams/${g.id}/edit`,className:"btn-outline px-3 py-1 text-xs flex items-center space-x-1",children:[i.jsx(Gg,{className:"h-3 w-3"}),i.jsx("span",{children:"Edit"})]}),g.status==="published"&&i.jsxs(Ie,{to:`/exams/${g.id}/results`,className:"btn-secondary px-3 py-1 text-xs flex items-center space-x-1",children:[i.jsx(nc,{className:"h-3 w-3"}),i.jsx("span",{children:"Results"})]}),g.status==="draft"&&i.jsx("button",{onClick:()=>u(g.id,g.title),className:"text-red-600 hover:text-red-700 p-1",title:"Delete exam",children:i.jsx(bn,{className:"h-3 w-3"})})]})]},g.id))}):i.jsxs("div",{className:"px-6 py-8 text-center",children:[i.jsx(Ot,{className:"h-12 w-12 text-secondary-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-2",children:"No exams yet"}),i.jsx("p",{className:"text-secondary-500 mb-4",children:"Get started by creating your first exam"}),i.jsxs(Ie,{to:"/exams/create",className:"btn-primary px-4 py-2 inline-flex items-center space-x-2",children:[i.jsx(ls,{className:"h-4 w-4"}),i.jsx("span",{children:"Create Your First Exam"})]})]}),n.length>0&&i.jsx("div",{className:"px-6 py-3 bg-secondary-50 border-t border-secondary-200",children:i.jsx(Ie,{to:"/exams",className:"text-sm text-primary-600 hover:text-primary-500",children:"View all exams "})})]}),(t==null?void 0:t.role)&&["admin","creator"].includes(t.role)&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(Ie,{to:"/exams/create",className:"card p-6 hover:shadow-md transition-shadow cursor-pointer",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(ls,{className:"h-8 w-8 text-primary-600"}),i.jsxs("div",{className:"ml-4",children:[i.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Create New Exam"}),i.jsx("p",{className:"text-sm text-secondary-500",children:"Start building your next assessment"})]})]})}),i.jsx(Ie,{to:"/questions",className:"card p-6 hover:shadow-md transition-shadow cursor-pointer",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ot,{className:"h-8 w-8 text-green-600"}),i.jsxs("div",{className:"ml-4",children:[i.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Question Bank"}),i.jsx("p",{className:"text-sm text-secondary-500",children:"Manage your question library"})]})]})}),i.jsx(Ie,{to:"/users",className:"card p-6 hover:shadow-md transition-shadow cursor-pointer",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Lt,{className:"h-8 w-8 text-purple-600"}),i.jsxs("div",{className:"ml-4",children:[i.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Manage Users"}),i.jsx("p",{className:"text-sm text-secondary-500",children:"Handle user access and codes"})]})]})})]})]})}function hv(){const{user:e}=Ee(),[t,r]=j.useState([]),[s,n]=j.useState(!0),[a,l]=j.useState(null),c=async()=>{if(e)try{n(!0),l(null);const{data:o,error:u}=await D.from("exam_codes").select(`
          *,
          exams (
            id,
            title,
            description,
            start_date,
            end_date,
            status
          )
        `).eq("user_email",e.email).order("created_at",{ascending:!1});if(u)throw u;if(!o||o.length===0){r([]);return}const d=o.map(g=>g.exam_id),{data:h,error:f}=await D.from("exam_attempts").select("exam_id, completed_at, score").eq("user_id",e.id).in("exam_id",d).not("completed_at","is",null);if(f)throw f;const y=o.map(g=>{const w=g.exams,v=h==null?void 0:h.find(p=>p.exam_id===g.exam_id),x=new Date;let m="available";return v&&v.completed_at?m="completed":g.expires_at&&new Date(g.expires_at)<x?m="expired":w.start_date&&new Date(w.start_date)>x?m="not_started":w.end_date&&new Date(w.end_date)<x?m="expired":w.status!=="published"&&(m="not_started"),{id:g.id,exam_id:g.exam_id,exam_title:w.title,exam_description:w.description,code:g.code,expires_at:g.expires_at,used:g.used,created_at:g.created_at,exam_start_date:w.start_date,exam_end_date:w.end_date,exam_status:w.status,attempt_completed:!!(v!=null&&v.completed_at),attempt_score:(v==null?void 0:v.score)||null,status:m}});r(y)}catch(o){l(o instanceof Error?o.message:"Failed to fetch available exams")}finally{n(!1)}};return j.useEffect(()=>{c()},[e]),{availableExams:t,loading:s,error:a,refetch:c}}function fv(){const{availableExams:e,loading:t,error:r}=hv(),s=o=>{switch(o){case"available":return i.jsx(wt,{className:"h-5 w-5 text-green-600"});case"completed":return i.jsx(ke,{className:"h-5 w-5 text-blue-600"});case"expired":return i.jsx(br,{className:"h-5 w-5 text-red-600"});case"not_started":return i.jsx(bt,{className:"h-5 w-5 text-yellow-600"});default:return i.jsx(yt,{className:"h-5 w-5 text-gray-600"})}},n=o=>{switch(o){case"available":return"Available";case"completed":return"Completed";case"expired":return"Expired";case"not_started":return"Not Started";default:return"Unknown"}},a=o=>{switch(o){case"available":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"expired":return"bg-red-100 text-red-800";case"not_started":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},l=(o,u)=>`/exam/${o}/take?code=${u}`;if(t)return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Available Exams"}),i.jsx("p",{className:"text-secondary-600",children:"Exams assigned to you"})]}),i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})]});if(r)return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Available Exams"}),i.jsx("p",{className:"text-secondary-600",children:"Exams assigned to you"})]}),i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(yt,{className:"h-5 w-5 text-red-400"}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error loading available exams"}),i.jsx("p",{className:"text-sm text-red-700 mt-1",children:r})]})]})})]});const c={total:e.length,available:e.filter(o=>o.status==="available").length,completed:e.filter(o=>o.status==="completed").length,expired:e.filter(o=>o.status==="expired").length};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Available Exams"}),i.jsx("p",{className:"text-secondary-600",children:"Exams assigned to you with access codes"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ot,{className:"h-8 w-8 text-blue-600"}),i.jsxs("div",{className:"ml-5",children:[i.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Total Assigned"}),i.jsx("p",{className:"text-lg font-medium text-secondary-900",children:c.total})]})]})}),i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(wt,{className:"h-8 w-8 text-green-600"}),i.jsxs("div",{className:"ml-5",children:[i.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Available"}),i.jsx("p",{className:"text-lg font-medium text-secondary-900",children:c.available})]})]})}),i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(ke,{className:"h-8 w-8 text-blue-600"}),i.jsxs("div",{className:"ml-5",children:[i.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Completed"}),i.jsx("p",{className:"text-lg font-medium text-secondary-900",children:c.completed})]})]})}),i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(br,{className:"h-8 w-8 text-red-600"}),i.jsxs("div",{className:"ml-5",children:[i.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Expired"}),i.jsx("p",{className:"text-lg font-medium text-secondary-900",children:c.expired})]})]})})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"px-6 py-4 border-b border-secondary-200",children:i.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Your Assigned Exams"})}),e.length>0?i.jsx("div",{className:"divide-y divide-secondary-200",children:e.map(o=>i.jsx("div",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s(o.status),i.jsx("h4",{className:"text-lg font-medium text-secondary-900",children:o.exam_title}),i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a(o.status)}`,children:n(o.status)})]}),o.exam_description&&i.jsx("p",{className:"text-sm text-secondary-600 mb-2",children:o.exam_description}),i.jsxs("div",{className:"flex items-center space-x-6 text-sm text-secondary-500",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ys,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:["Code: ",i.jsx("span",{className:"font-mono",children:o.code})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(wt,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:["Assigned: ",new Date(o.created_at).toLocaleDateString()]})]}),o.expires_at&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(bt,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:["Expires: ",new Date(o.expires_at).toLocaleDateString()]})]}),o.exam_start_date&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(wt,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:["Starts: ",new Date(o.exam_start_date).toLocaleDateString()]})]}),o.exam_end_date&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(wt,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:["Ends: ",new Date(o.exam_end_date).toLocaleDateString()]})]})]}),o.status==="completed"&&o.attempt_score!==null&&i.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[i.jsx(kn,{className:"h-4 w-4 text-yellow-600"}),i.jsxs("span",{className:"text-sm font-medium text-secondary-900",children:["Score: ",o.attempt_score,"%"]})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[o.status==="available"&&i.jsxs(Ie,{to:l(o.exam_id,o.code),className:"btn-primary px-4 py-2 flex items-center space-x-2",children:[i.jsx(qf,{className:"h-4 w-4"}),i.jsx("span",{children:"Take Exam"})]}),o.status==="completed"&&i.jsxs(Ie,{to:`/exam/${o.exam_id}/result`,className:"btn-outline px-4 py-2 flex items-center space-x-2",children:[i.jsx(kn,{className:"h-4 w-4"}),i.jsx("span",{children:"View Results"})]}),o.status==="not_started"&&i.jsx("div",{className:"text-sm text-yellow-600 font-medium",children:o.exam_start_date&&new Date(o.exam_start_date)>new Date?"Exam not started yet":"Exam not published yet"}),o.status==="expired"&&i.jsx("div",{className:"text-sm text-red-600 font-medium",children:o.expires_at&&new Date(o.expires_at)<new Date?"Access code expired":"Exam period ended"})]})]})},o.id))}):i.jsxs("div",{className:"px-6 py-8 text-center",children:[i.jsx(wt,{className:"h-12 w-12 text-secondary-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-2",children:"No exams assigned"}),i.jsx("p",{className:"text-secondary-500",children:"You don't have any exams assigned to you yet. Contact your administrator to get access codes for exams."})]})]})]})}function mv({isOpen:e,onClose:t,onSave:r,question:s}){const[n,a]=j.useState({type:"multiple_choice",question_text:"",options:["","","",""],correct_answers:[],points:1});j.useEffect(()=>{a(s?{type:s.type,question_text:s.question_text,options:s.options,correct_answers:s.correct_answers,points:s.points}:{type:"multiple_choice",question_text:"",options:["","","",""],correct_answers:[],points:1})},[s]);const l=f=>{if(f.preventDefault(),!n.question_text.trim()){alert("Please enter a question");return}if(n.type==="multiple_choice"&&n.options.some(y=>!y.trim())){alert("Please fill in all options");return}if(n.correct_answers.length===0){alert("Please select at least one correct answer");return}r(n),t()},c=(f,y)=>{const g=[...n.options];g[f]=y,a({...n,options:g})},o=()=>{a({...n,options:[...n.options,""]})},u=f=>{if(n.options.length>2){const y=n.options.filter((w,v)=>v!==f),g=n.correct_answers.filter(w=>w!==n.options[f]);a({...n,options:y,correct_answers:g})}},d=f=>{const y=n.correct_answers.includes(f);let g;n.type==="multiple_choice"?y?g=n.correct_answers.filter(w=>w!==f):g=[...n.correct_answers,f]:g=[f],a({...n,correct_answers:g})},h=f=>{let y=[],g=[];f==="true_false"?y=["True","False"]:f==="multiple_choice"&&(y=["","","",""]),a({...n,type:f,options:y,correct_answers:g})};return e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-secondary-200",children:[i.jsx("h2",{className:"text-xl font-semibold text-secondary-900",children:s?"Edit Question":"Add New Question"}),i.jsx("button",{onClick:t,className:"text-secondary-400 hover:text-secondary-600",children:i.jsx(Vi,{className:"h-6 w-6"})})]}),i.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Question Type"}),i.jsxs("select",{value:n.type,onChange:f=>h(f.target.value),className:"input w-full",children:[i.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),i.jsx("option",{value:"true_false",children:"True/False"}),i.jsx("option",{value:"fill_blank",children:"Fill in the Blank"}),i.jsx("option",{value:"short_answer",children:"Short Answer"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Question Text *"}),i.jsx("textarea",{value:n.question_text,onChange:f=>a({...n,question_text:f.target.value}),className:"input w-full h-24 resize-none",placeholder:"Enter your question here...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Points"}),i.jsx("input",{type:"number",value:n.points,onChange:f=>a({...n,points:parseInt(f.target.value)||1}),className:"input w-24",min:"1",required:!0})]}),(n.type==="multiple_choice"||n.type==="true_false")&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700",children:"Options"}),n.type==="multiple_choice"&&i.jsxs("button",{type:"button",onClick:o,className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:[i.jsx(ls,{className:"h-4 w-4 mr-1"}),"Add Option"]})]}),i.jsx("div",{className:"space-y-3",children:n.options.map((f,y)=>i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("input",{type:"checkbox",checked:n.correct_answers.includes(f),onChange:()=>d(f),className:"rounded border-secondary-300 text-green-600 focus:ring-green-500",disabled:n.type==="true_false"&&!f.trim()}),i.jsx("input",{type:"text",value:f,onChange:g=>c(y,g.target.value),className:"input flex-1",placeholder:`Option ${y+1}`,disabled:n.type==="true_false",required:n.type==="multiple_choice"}),n.type==="multiple_choice"&&n.options.length>2&&i.jsx("button",{type:"button",onClick:()=>u(y),className:"text-red-600 hover:text-red-700 p-1",children:i.jsx(bn,{className:"h-4 w-4"})})]},y))}),i.jsx("p",{className:"text-xs text-secondary-500 mt-2",children:"Check the box next to correct answer(s)"})]}),(n.type==="fill_blank"||n.type==="short_answer")&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Correct Answer(s) *"}),i.jsx("textarea",{value:n.correct_answers.join(`
`),onChange:f=>a({...n,correct_answers:f.target.value.split(`
`).filter(y=>y.trim())}),className:"input w-full h-20 resize-none",placeholder:"Enter correct answers (one per line for multiple acceptable answers)",required:!0}),i.jsx("p",{className:"text-xs text-secondary-500 mt-1",children:"For multiple acceptable answers, enter each on a new line"})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-secondary-200",children:[i.jsx("button",{type:"button",onClick:t,className:"btn-outline px-4 py-2",children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn-primary px-4 py-2",children:s?"Update Question":"Add Question"})]})]})]})}):null}function pv(e){const{user:t}=Ee(),[r,s]=j.useState([]),[n,a]=j.useState(!1),[l,c]=j.useState(null),o=async()=>{if(!(!e||!t))try{a(!0);const{data:f,error:y}=await D.from("exam_codes").select("*").eq("exam_id",e).order("created_at",{ascending:!1});if(y)throw y;s(f||[])}catch(f){c(f instanceof Error?f.message:"Failed to fetch exam codes")}finally{a(!1)}},u=async(f,y)=>{if(!e||!t)throw new Error("Exam ID and user required");try{const g=Math.random().toString(36).substring(2,10).toUpperCase(),{data:w,error:v}=await D.from("exam_codes").insert({exam_id:e,code:g,user_email:f,expires_at:y||null}).select().single();if(v)throw v;return await o(),w}catch(g){throw g instanceof Error?g:new Error("Failed to generate exam code")}},d=async(f,y)=>{if(!e||!t)throw new Error("Exam ID and user required");try{const g=f.map(x=>({exam_id:e,code:Math.random().toString(36).substring(2,10).toUpperCase(),user_email:x,expires_at:y||null})),{data:w,error:v}=await D.from("exam_codes").insert(g).select();if(v)throw v;return await o(),w}catch(g){throw g instanceof Error?g:new Error("Failed to generate bulk codes")}},h=async f=>{if(!t)throw new Error("User not authenticated");try{const{error:y}=await D.from("exam_codes").delete().eq("id",f);if(y)throw y;await o()}catch(y){throw y instanceof Error?y:new Error("Failed to delete code")}};return j.useEffect(()=>{e&&o()},[e,t]),{codes:r,loading:n,error:l,generateCode:u,generateBulkCodes:d,deleteCode:h,refetch:o}}function xv({isOpen:e,onClose:t,examId:r}){const{codes:s,loading:n,generateCode:a,generateBulkCodes:l,deleteCode:c}=pv(r),[o,u]=j.useState(""),[d,h]=j.useState(""),[f,y]=j.useState(""),[g,w]=j.useState(!1),[v,x]=j.useState({}),m=async()=>{if(!o.trim()){alert("Please enter an email address");return}try{w(!0),await a(o,f||void 0),u(""),alert("Code generated and sent via email successfully!")}catch(k){alert(k instanceof Error?k.message:"Failed to generate code")}finally{w(!1)}},p=async()=>{const k=d.split(`
`).map(S=>S.trim()).filter(S=>S&&S.includes("@"));if(k.length===0){alert("Please enter valid email addresses (one per line)");return}try{w(!0),await l(k,f||void 0),h(""),alert(`${k.length} codes generated and sent via email successfully!`)}catch(S){alert(S instanceof Error?S.message:"Failed to generate codes")}finally{w(!1)}},_=k=>{navigator.clipboard.writeText(k),alert("Code copied to clipboard!")},N=k=>{const S=`${window.location.origin}/exam/${r}/take?code=${k}`;navigator.clipboard.writeText(S),alert("Exam URL copied to clipboard!")},E=async k=>{if(confirm("Are you sure you want to delete this code?"))try{await c(k)}catch(S){alert(S instanceof Error?S.message:"Failed to delete code")}},b=k=>{x(S=>({...S,[k]:!S[k]}))},O=()=>{const k=["Email,Code,Exam URL,Used,Expires At,Created At",...s.map(G=>{const Ae=`${window.location.origin}/exam/${r}/take?code=${G.code}`;return`${G.user_email},${G.code},${Ae},${G.used?"Yes":"No"},${G.expires_at||"Never"},${new Date(G.created_at).toLocaleString()}`})].join(`
`),S=new Blob([k],{type:"text/csv"}),W=window.URL.createObjectURL(S),F=document.createElement("a");F.href=W,F.download=`exam-codes-${r}.csv`,F.click(),window.URL.revokeObjectURL(W)};return e?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-secondary-200",children:[i.jsx("h2",{className:"text-xl font-semibold text-secondary-900",children:"Exam Access Codes & URLs"}),i.jsx("button",{onClick:t,className:"text-secondary-400 hover:text-secondary-600",children:i.jsx(Vi,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Generate New Codes"}),i.jsxs("div",{className:"card p-4 mb-4",children:[i.jsxs("h4",{className:"font-medium text-secondary-900 mb-3 flex items-center",children:[i.jsx(ri,{className:"h-4 w-4 mr-2"}),"Single Code"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("input",{type:"email",className:"input w-full",placeholder:"Enter email address",value:o,onChange:k=>u(k.target.value)}),i.jsxs("button",{onClick:m,disabled:g,className:"btn-primary w-full py-2 flex items-center justify-center space-x-2",children:[i.jsx(ri,{className:"h-4 w-4"}),i.jsx("span",{children:"Generate & Send Code"})]})]})]}),i.jsxs("div",{className:"card p-4",children:[i.jsxs("h4",{className:"font-medium text-secondary-900 mb-3 flex items-center",children:[i.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Bulk Codes"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("textarea",{className:"input w-full h-32 resize-none",placeholder:"Enter email addresses (one per line)",value:d,onChange:k=>h(k.target.value)}),i.jsxs("button",{onClick:p,disabled:g,className:"btn-primary w-full py-2 flex items-center justify-center space-x-2",children:[i.jsx(Lt,{className:"h-4 w-4"}),i.jsx("span",{children:"Generate & Send Bulk Codes"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Expiration Date (Optional)"}),i.jsx("input",{type:"datetime-local",className:"input w-full",value:f,onChange:k=>y(k.target.value)})]})]})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Generated Codes & URLs"}),s.length>0&&i.jsxs("button",{onClick:O,className:"btn-outline px-3 py-1 text-sm flex items-center space-x-1",children:[i.jsx(Nn,{className:"h-4 w-4"}),i.jsx("span",{children:"Export CSV"})]})]}),n?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"})}):s.length>0?i.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:s.map(k=>{const S=`${window.location.origin}/exam/${r}/take?code=${k.code}`;return i.jsx("div",{className:"border border-secondary-200 rounded-lg p-4",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ri,{className:"h-4 w-4 text-secondary-400"}),i.jsx("span",{className:"text-sm font-medium text-secondary-900",children:k.user_email})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-xs text-secondary-500 w-16",children:"Code:"}),i.jsx("span",{className:"font-mono text-sm font-medium text-primary-600",children:v[k.id]?k.code:""}),i.jsx("button",{onClick:()=>b(k.id),className:"text-secondary-400 hover:text-secondary-600",title:v[k.id]?"Hide code":"Show code",children:v[k.id]?i.jsx(qi,{className:"h-4 w-4"}):i.jsx(xs,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>_(k.code),className:"text-secondary-400 hover:text-secondary-600",title:"Copy code",children:i.jsx(Bf,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-xs text-secondary-500 w-16",children:"URL:"}),i.jsx("span",{className:"text-xs text-blue-600 truncate flex-1 font-mono",children:S}),i.jsx("button",{onClick:()=>N(k.code),className:"text-secondary-400 hover:text-secondary-600",title:"Copy exam URL",children:i.jsx(Bu,{className:"h-4 w-4"})}),i.jsx("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:"text-secondary-400 hover:text-secondary-600",title:"Open exam URL",children:i.jsx(qf,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3 text-xs text-secondary-500",children:[i.jsx("span",{className:`px-2 py-1 rounded-full ${k.used?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:k.used?"Used":"Available"}),k.expires_at&&i.jsxs("span",{children:["Expires: ",new Date(k.expires_at).toLocaleDateString()]}),i.jsxs("span",{children:["Created: ",new Date(k.created_at).toLocaleDateString()]})]}),i.jsx("button",{onClick:()=>E(k.id),className:"text-red-600 hover:text-red-700 p-1",title:"Delete code",children:i.jsx(bn,{className:"h-4 w-4"})})]})]})},k.id)})}):i.jsxs("div",{className:"text-center py-8 text-secondary-500",children:[i.jsx(Lt,{className:"h-12 w-12 mx-auto mb-2 text-secondary-300"}),i.jsx("p",{children:"No codes generated yet"}),i.jsx("p",{className:"text-sm",children:"Generate codes to allow students to access this exam"})]})]})]}),i.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(ri,{className:"h-5 w-5 text-blue-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Email Delivery"}),i.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Exam codes and direct URLs are automatically sent to users via email. Each email contains the access code and a unique direct link to the exam."})]})]})}),i.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(Bu,{className:"h-5 w-5 text-green-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-green-900",children:"Direct Access URLs"}),i.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Each code has a unique URL that automatically fills in the access code. Users can click the link to go directly to their exam."})]})]})})]})]})]})}):null}function Wu(){const e=Lr(),{examId:t}=oa(),{createExam:r,updateExam:s,publishExam:n,exams:a}=ic(),[l,c]=j.useState(!1),[o,u]=j.useState(!1),[d,h]=j.useState(null),[f,y]=j.useState(null),[g,w]=j.useState(!1),[v,x]=j.useState(!1),[m,p]=j.useState(null),[_,N]=j.useState(null),[E,b]=j.useState({}),[O,k]=j.useState(!1),[S,W]=j.useState({title:"",description:"",time_limit:60,shuffle_questions:!1,show_results:!0,start_date:"",end_date:"",status:"draft"}),[F,G]=j.useState([{id:"1",name:"General Knowledge",time_limit:30,pass_mark:60,questions:[]}]);j.useEffect(()=>{if(t&&a.length>0&&!O){const P=a.find(I=>I.id===t);if(P){if(W({title:P.title,description:P.description||"",time_limit:P.time_limit||60,shuffle_questions:P.shuffle_questions,show_results:P.show_results,start_date:P.start_date?new Date(P.start_date).toISOString().slice(0,16):"",end_date:P.end_date?new Date(P.end_date).toISOString().slice(0,16):"",status:P.status}),P.subjects&&P.subjects.length>0){const I=P.subjects.map(R=>({id:R.id,name:R.name,time_limit:R.time_limit||30,pass_mark:R.pass_mark||60,questions:[]}));G(I),I.forEach(R=>{Ae(R.id)})}k(!0)}}},[t,a,O]);const Ae=async P=>{try{b(T=>({...T,[P]:!0}));const{data:I,error:R}=await D.from("questions").select("*").eq("subject_id",P).order("order_index",{ascending:!0});if(R)throw R;G(T=>T.map(U=>U.id===P?{...U,questions:I.map(B=>({id:B.id,type:B.type,question_text:B.question_text,options:B.options||[],correct_answers:B.correct_answers,points:B.points}))}:U))}catch(I){console.error("Failed to load questions for subject:",I)}finally{b(I=>({...I,[P]:!1}))}},Y=P=>{if(typeof P=="string")return P;if(P!=null&&P.message){const I=P.message.toLowerCase();return I.includes("connection")||I.includes("network")?"Unable to connect to the database. Please check your internet connection and try again.":I.includes("permission")||I.includes("unauthorized")||I.includes("forbidden")?"You don't have permission to perform this action. Please contact your administrator.":I.includes("validation")||I.includes("invalid")?"Some of the exam information is invalid. Please check all fields and try again.":I.includes("unique")||I.includes("duplicate")?"An exam with this title already exists. Please choose a different title.":I.includes("foreign key")||I.includes("reference")?"There's a problem with the exam data structure. Please refresh the page and try again.":I.includes("timeout")||I.includes("time out")?"The operation took too long to complete. Please try again.":I.includes("server error")||I.includes("internal error")?"There's a temporary problem with our servers. Please try again in a few minutes.":I.includes("authentication")||I.includes("session")?"Your session has expired. Please log out and log back in.":P.message}return"An unexpected error occurred. Please try again."},K=(P,I)=>{I==="success"?(y(P),h(null)):(h(P),y(null)),setTimeout(()=>{y(null),h(null)},5e3)},ye=async()=>{if(!S.title.trim()){K("Please enter an exam title before saving","error");return}if(F.some(P=>!P.name.trim())){K("Please provide names for all subjects before saving","error");return}try{c(!0),h(null);const P={title:S.title,description:S.description||null,time_limit:S.time_limit,shuffle_questions:S.shuffle_questions,show_results:S.show_results,start_date:S.start_date?new Date(S.start_date).toISOString():null,end_date:S.end_date?new Date(S.end_date).toISOString():null,status:"draft"},I=F.map((R,T)=>({name:R.name,time_limit:R.time_limit,pass_mark:R.pass_mark,order_index:T}));if(t)await s(t,P,I),K("Exam updated successfully!","success");else{const R=await r(P,I);K("Exam saved as draft!","success"),e(`/exams/${R.id}/edit`,{replace:!0})}}catch(P){K(Y(P),"error")}finally{c(!1)}},C=async()=>{if(!S.title.trim()){K("Please enter an exam title before publishing","error");return}if(F.length===0){K("Please add at least one subject before publishing the exam","error");return}if(F.some(T=>!T.name.trim())){K("Please provide names for all subjects before publishing","error");return}if(F.reduce((T,U)=>T+U.questions.length,0)===0){K("Please add at least one question to your exam before publishing","error");return}const I=F.filter(T=>T.questions.length===0);if(I.length>0){const T=I.map(U=>U.name).join(", ");K(`The following subjects need questions before publishing: ${T}`,"error");return}if(F.some(T=>T.questions.some(U=>!U.question_text.trim()||U.correct_answers.length===0||U.type==="multiple_choice"&&U.options.some(B=>!B.trim())))){K("Some questions are incomplete. Please ensure all questions have text, options (for multiple choice), and correct answers","error");return}if(S.start_date&&S.end_date){const T=new Date(S.start_date),U=new Date(S.end_date);if(T>=U){K("The exam end date must be after the start date","error");return}if(T<new Date){K("The exam start date cannot be in the past","error");return}}try{u(!0),h(null);let T=t;if(!T){const U={title:S.title,description:S.description||null,time_limit:S.time_limit,shuffle_questions:S.shuffle_questions,show_results:S.show_results,start_date:S.start_date?new Date(S.start_date).toISOString():null,end_date:S.end_date?new Date(S.end_date).toISOString():null,status:"draft"},B=F.map((le,ks)=>({name:le.name,time_limit:le.time_limit,pass_mark:le.pass_mark,order_index:ks}));T=(await r(U,B)).id}if(!T)return;await n(T),W(U=>({...U,status:"published"})),K("Exam published successfully! Students can now access it with exam codes.","success"),t||e(`/exams/${T}/edit`,{replace:!0})}catch(T){K(Y(T),"error")}finally{u(!1)}},M=()=>{const P={id:Date.now().toString(),name:`Subject ${F.length+1}`,time_limit:30,pass_mark:60,questions:[]};G([...F,P])},$=P=>{F.length>1&&G(F.filter(I=>I.id!==P))},z=(P,I,R)=>{G(F.map(T=>T.id===P?{...T,[I]:R}:T))},X=P=>{p(P),N(null),w(!0)},Le=(P,I)=>{p(P),N(I),w(!0)},Ke=async P=>{var I,R;if(m)try{const T=a.find(B=>B.id===t),U=(I=T==null?void 0:T.subjects)==null?void 0:I.find(B=>B.id===m);if(!U){K("Please save the exam first before adding questions","error");return}if(_){const{error:B}=await D.from("questions").update({type:P.type,question_text:P.question_text,options:P.options,correct_answers:P.correct_answers,points:P.points}).eq("id",_.id);if(B)throw B;G(F.map(ee=>ee.id===m?{...ee,questions:ee.questions.map(le=>le.id===_.id?{...P,id:_.id}:le)}:ee)),K("Question updated successfully!","success")}else{const{data:B,error:ee}=await D.from("questions").insert({subject_id:U.id,type:P.type,question_text:P.question_text,options:P.options,correct_answers:P.correct_answers,points:P.points,order_index:((R=F.find(le=>le.id===m))==null?void 0:R.questions.length)||0}).select().single();if(ee)throw ee;G(F.map(le=>le.id===m?{...le,questions:[...le.questions,{id:B.id,type:B.type,question_text:B.question_text,options:B.options||[],correct_answers:B.correct_answers,points:B.points}]}:le)),K("Question added successfully!","success")}w(!1),p(null),N(null)}catch(T){K(Y(T),"error")}},kt=async(P,I)=>{if(confirm("Are you sure you want to delete this question?"))try{const{error:R}=await D.from("questions").delete().eq("id",I);if(R)throw R;G(F.map(T=>T.id===P?{...T,questions:T.questions.filter(U=>U.id!==I)}:T)),K("Question deleted successfully!","success")}catch(R){K(Y(R),"error")}},Fe=()=>F.reduce((P,I)=>P+I.questions.length,0),te=()=>F.reduce((P,I)=>P+I.questions.reduce((R,T)=>R+T.points,0),0);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:t?"Edit Exam":"Create New Exam"}),i.jsx("p",{className:"text-secondary-600",children:"Build your computer-based test"})]}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{onClick:()=>e("/dashboard"),className:"btn-outline px-4 py-2",disabled:l||o,children:"Cancel"}),i.jsx("button",{onClick:ye,disabled:l||o,className:"btn-secondary px-4 py-2 flex items-center space-x-2",children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-secondary-600"}),i.jsx("span",{children:"Saving..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Bs,{className:"h-4 w-4"}),i.jsx("span",{children:"Save Draft"})]})})]})]}),f&&i.jsx("div",{className:"rounded-md bg-green-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(ke,{className:"h-5 w-5 text-green-400"}),i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm font-medium text-green-800",children:f})})]})}),d&&i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsx("div",{className:"text-sm text-red-700",children:d})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs("div",{className:"card p-6",children:[i.jsx("h2",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Basic Information"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Exam Title *"}),i.jsx("input",{type:"text",className:"input w-full",placeholder:"Enter exam title",value:S.title,onChange:P=>W({...S,title:P.target.value}),disabled:l||o})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Description"}),i.jsx("textarea",{className:"input w-full h-24 resize-none",placeholder:"Enter exam description",value:S.description,onChange:P=>W({...S,description:P.target.value}),disabled:l||o})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Start Date & Time"}),i.jsx("input",{type:"datetime-local",className:"input w-full",value:S.start_date,onChange:P=>W({...S,start_date:P.target.value}),disabled:l||o})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"End Date & Time"}),i.jsx("input",{type:"datetime-local",className:"input w-full",value:S.end_date,onChange:P=>W({...S,end_date:P.target.value}),disabled:l||o})]})]})]})]}),i.jsxs("div",{className:"card p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-medium text-secondary-900",children:"Subjects"}),i.jsxs("button",{onClick:M,disabled:l||o,className:"btn-primary px-3 py-1 text-sm flex items-center space-x-1",children:[i.jsx(ls,{className:"h-4 w-4"}),i.jsx("span",{children:"Add Subject"})]})]}),i.jsx("div",{className:"space-y-4",children:F.map((P,I)=>i.jsxs("div",{className:"border border-secondary-200 rounded-lg p-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[i.jsx("input",{type:"text",className:"input",value:P.name,onChange:R=>z(P.id,"name",R.target.value),disabled:l||o,placeholder:"Subject name"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"number",className:"input w-full",placeholder:"Time (min)",value:P.time_limit,onChange:R=>z(P.id,"time_limit",parseInt(R.target.value)||0),disabled:l||o,min:"1"}),i.jsx("span",{className:"text-sm text-secondary-500",children:"min"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"number",className:"input w-full",placeholder:"Pass mark (%)",value:P.pass_mark,onChange:R=>z(P.id,"pass_mark",parseInt(R.target.value)||60),disabled:l||o,min:"0",max:"100"}),i.jsx("span",{className:"text-sm text-secondary-500",children:"%"})]}),i.jsx("div",{className:"flex items-center justify-end",children:F.length>1&&i.jsx("button",{onClick:()=>$(P.id),disabled:l||o,className:"text-red-600 hover:text-red-700 p-1 disabled:opacity-50",children:i.jsx(bn,{className:"h-4 w-4"})})})]}),i.jsxs("div",{className:"text-sm text-secondary-500 mb-3 flex items-center space-x-2",children:[i.jsxs("span",{children:[P.questions.length," questions  ",P.questions.reduce((R,T)=>R+T.points,0)," points  Pass mark: ",P.pass_mark,"%"]}),E[P.id]&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"})]}),P.questions.length>0&&i.jsx("div",{className:"space-y-2 mb-3",children:P.questions.map((R,T)=>i.jsxs("div",{className:"bg-secondary-50 rounded p-3 flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"text-sm font-medium text-secondary-900",children:["Q",T+1,": ",R.question_text.substring(0,60),R.question_text.length>60?"...":""]}),i.jsxs("div",{className:"text-xs text-secondary-500",children:[R.type.replace("_"," "),"  ",R.points," points"]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>Le(P.id,R),disabled:l||o,className:"text-primary-600 hover:text-primary-700 p-1",children:i.jsx(tv,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>kt(P.id,R.id),disabled:l||o,className:"text-red-600 hover:text-red-700 p-1",children:i.jsx(bn,{className:"h-4 w-4"})})]})]},R.id))}),i.jsxs("button",{onClick:()=>X(P.id),className:"text-sm text-primary-600 hover:text-primary-700 disabled:opacity-50 flex items-center",disabled:l||o||!t,children:[i.jsx(ls,{className:"h-4 w-4 mr-1"}),t?"Add Questions":"Save exam first to add questions"]})]},P.id))})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"card p-6",children:[i.jsxs("h3",{className:"text-lg font-medium text-secondary-900 mb-4 flex items-center",children:[i.jsx(Hf,{className:"h-5 w-5 mr-2"}),"Exam Settings"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Total Time Limit (minutes)"}),i.jsx("input",{type:"number",className:"input w-full",value:S.time_limit,onChange:P=>W({...S,time_limit:parseInt(P.target.value)||0}),disabled:l||o,min:"1"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium text-secondary-700",children:"Shuffle Questions"}),i.jsx("input",{type:"checkbox",className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500",checked:S.shuffle_questions,onChange:P=>W({...S,shuffle_questions:P.target.checked}),disabled:l||o})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{className:"text-sm font-medium text-secondary-700",children:"Show Results Immediately"}),i.jsx("input",{type:"checkbox",className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500",checked:S.show_results,onChange:P=>W({...S,show_results:P.target.checked}),disabled:l||o})]})]})]}),i.jsxs("div",{className:"card p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Exam Summary"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-secondary-600",children:"Total Questions:"}),i.jsx("span",{className:"font-medium",children:Fe()})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-secondary-600",children:"Total Points:"}),i.jsx("span",{className:"font-medium",children:te()})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-secondary-600",children:"Subjects:"}),i.jsx("span",{className:"font-medium",children:F.length})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-secondary-600",children:"Avg. Pass Mark:"}),i.jsxs("span",{className:"font-medium",children:[Math.round(F.reduce((P,I)=>P+I.pass_mark,0)/F.length),"%"]})]})]})]}),i.jsxs("div",{className:"card p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Publish Status"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-secondary-600",children:"Status"}),i.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${S.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:[S.status==="published"?i.jsx(ke,{className:"h-3 w-3 mr-1"}):null,S.status]})]}),S.status!=="published"&&i.jsx("button",{onClick:C,disabled:o||l,className:"btn-primary w-full py-2",children:o?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Publishing..."]}):"Publish Exam"}),S.status==="published"&&t&&i.jsxs("button",{onClick:()=>x(!0),className:"btn-primary w-full py-2 flex items-center justify-center space-x-2",children:[i.jsx(rv,{className:"h-4 w-4"}),i.jsx("span",{children:"Generate Codes"})]}),i.jsx("p",{className:"text-xs text-secondary-500",children:S.status==="published"?"This exam is live and accessible to users with valid codes.":"Once published, exam codes can be generated and distributed to users."})]})]})]})]}),i.jsx(mv,{isOpen:g,onClose:()=>{w(!1),p(null),N(null)},onSave:Ke,question:_||void 0}),t&&i.jsx(xv,{isOpen:v,onClose:()=>x(!1),examId:t})]})}function yv(){const{examId:e}=oa(),t=Lr(),{user:r}=Ee(),[s]=xf(),[n,a]=j.useState(null),[l,c]=j.useState(0),[o,u]=j.useState(0),[d,h]=j.useState({}),[f,y]=j.useState(!1),[g,w]=j.useState(""),[v,x]=j.useState(null),[m,p]=j.useState(!1),[_,N]=j.useState(!1),[E,b]=j.useState(!0),[O,k]=j.useState(null),[S,W]=j.useState([]),[F,G]=j.useState(null),[Ae,Y]=j.useState(null),[K,ye]=j.useState(null);j.useEffect(()=>{if(!r){const R=s.get("code"),T=R?`/login?redirect=${encodeURIComponent(`/exam/${e}/take?code=${R}`)}`:"/login";t(T);return}},[r,t,e,s]),j.useEffect(()=>{const R=s.get("code");R&&r?(w(R),$(R)):r&&b(!1)},[s,r]),j.useEffect(()=>{e&&m&&r&&M()},[e,m,r]);const C=R=>{const T=new Date;if(R.start_date){const U=new Date(R.start_date);if(T<U)return`This exam is not yet available. It will start on ${U.toLocaleString()}.`}if(R.end_date){const U=new Date(R.end_date);if(T>U)return`This exam has ended. It was available until ${U.toLocaleString()}.`}return null},M=async()=>{var R;try{b(!0),k(null),G(null);const{data:T,error:U}=await D.from("exams").select(`
          *,
          subjects (
            *,
            questions (*)
          )
        `).eq("id",e).eq("status","published").single();if(U)throw U;if(!T)throw new Error("Exam not found or not published");const B=C(T);if(B){G(B);return}const ee=((R=T.subjects)==null?void 0:R.map(je=>{var Ss;return{id:je.id,name:je.name,time_limit:je.time_limit,pass_mark:je.pass_mark||60,questions:((Ss=je.questions)==null?void 0:Ss.map(Ir=>({id:Ir.id,type:Ir.type,question_text:Ir.question_text,options:Ir.options||[],correct_answers:Ir.correct_answers,points:Ir.points})))||[]}}))||[],le=ee.flatMap(je=>je.questions);if(T.shuffle_questions)for(let je=le.length-1;je>0;je--){const Ss=Math.floor(Math.random()*(je+1));[le[je],le[Ss]]=[le[Ss],le[je]]}a({id:T.id,title:T.title,description:T.description,time_limit:T.time_limit,shuffle_questions:T.shuffle_questions,show_results:T.show_results,start_date:T.start_date,end_date:T.end_date,subjects:ee}),W(le);const ks=(T.time_limit||60)*60;c(ks)}catch(T){k(T instanceof Error?T.message:"Failed to load exam")}finally{b(!1)}},$=async R=>{if(!R.trim()){ye("Please enter your access code"),b(!1);return}if(!r){ye("You must be logged in to access this exam. Please log in with your account."),b(!1);return}try{N(!0),ye(null),b(!0);const{data:T,error:U}=await D.from("exam_codes").select("*").eq("code",R.toUpperCase()).eq("exam_id",e).eq("used",!1);if(U){console.error("Database error:",U),ye("Failed to verify access code. Please try again."),b(!1);return}if(!T||T.length===0){ye("Invalid or expired access code. Please check your code and try again."),b(!1);return}const B=T[0];if(B.expires_at&&new Date(B.expires_at)<new Date){ye("This access code has expired. Please contact your administrator for a new code."),b(!1);return}if(B.user_email!==r.email){ye("This access code is not assigned to your account. Please use the correct access code for your account or contact your administrator."),b(!1);return}const{data:ee,error:le}=await D.from("profiles").select("*").eq("id",r.id).single();if(le||!ee){ye("Your account is not properly registered in the system. Please contact your administrator to set up your account before taking exams."),b(!1);return}x(B.id),p(!0)}catch(T){console.error("Verification error:",T),ye("Failed to verify access code. Please try again."),b(!1)}finally{N(!1)}};j.useEffect(()=>{if(f&&l>0){const R=setInterval(()=>{c(T=>T-1)},1e3);return()=>clearInterval(R)}else l===0&&f&&te()},[f,l]);const z=R=>{const T=Math.floor(R/3600),U=Math.floor(R%3600/60),B=R%60;return`${T.toString().padStart(2,"0")}:${U.toString().padStart(2,"0")}:${B.toString().padStart(2,"0")}`},X=async()=>{if(!r||!n||!v)return;const R=C(n);if(R){G(R);return}try{const{data:T,error:U}=await D.from("exam_attempts").insert({exam_id:n.id,user_id:r.id,code_id:v,total_points:S.reduce((B,ee)=>B+ee.points,0)}).select().single();if(U)throw U;Y(T.id),y(!0)}catch{alert("Failed to start exam. Please try again.")}},Le=(R,T)=>{h(U=>({...U,[R]:T}))},Ke=()=>{o<S.length-1&&u(R=>R+1)},kt=()=>{o>0&&u(R=>R-1)},Fe=()=>{let R=0,T=0;return S.forEach(U=>{T+=U.points;const B=d[U.id];if(B){if(U.type==="multiple_choice"||U.type==="true_false")U.correct_answers.includes(B)&&(R+=U.points);else if(U.type==="fill_blank"||U.type==="short_answer"){const ee=B.toString().trim().toLowerCase();U.correct_answers.some(ks=>{const je=ks.toString().trim().toLowerCase();return je===ee?!0:U.type==="fill_blank"?je.includes(ee)||ee.includes(je):!1})&&(R+=U.points)}}}),{score:R,totalPoints:T,percentage:T>0?Math.round(R/T*100):0}},te=async()=>{if(!(!r||!n||!Ae))try{const{score:R,totalPoints:T,percentage:U}=Fe(),B=Math.round(((n.time_limit||60)*60-l)/60),{error:ee}=await D.from("exam_attempts").update({answers:d,score:U,completed_at:new Date().toISOString(),time_spent:B}).eq("id",Ae);if(ee)throw ee;v&&await D.from("exam_codes").update({used:!0}).eq("id",v),n.show_results?t(`/exam/${n.id}/result?score=${U}&total=${T}&points=${R}`):t("/dashboard?message=exam-completed")}catch(R){console.error("Submit error:",R),alert("Failed to submit exam. Please try again.")}};if(!r)return null;if(K)return i.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center p-4",children:i.jsx("div",{className:"max-w-md w-full",children:i.jsxs("div",{className:"card p-8 text-center",children:[i.jsx(iv,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Access Denied"}),i.jsx("p",{className:"text-secondary-600 mb-4",children:K}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{onClick:()=>{const R=s.get("code"),T=R?`/login?redirect=${encodeURIComponent(`/exam/${e}/take?code=${R}`)}`:"/login";t(T)},className:"btn-primary w-full px-4 py-2",children:"Go to Login"}),i.jsx("button",{onClick:()=>{ye(null),p(!1),w(""),b(!1)},className:"btn-outline w-full px-4 py-2",children:"Try Different Code"})]})]})})});if(E)return i.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),i.jsx("p",{className:"text-secondary-600",children:"Loading exam..."})]})});if(F)return i.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center p-4",children:i.jsx("div",{className:"max-w-md w-full",children:i.jsxs("div",{className:"card p-8 text-center",children:[i.jsx(Kg,{className:"h-16 w-16 text-orange-600 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Exam Not Available"}),i.jsx("p",{className:"text-secondary-600 mb-4",children:F}),(n==null?void 0:n.start_date)&&new Date<new Date(n.start_date)&&i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-700",children:[i.jsx(wt,{className:"h-5 w-5"}),i.jsx("span",{className:"font-medium",children:"Exam Schedule"})]}),i.jsxs("div",{className:"text-sm text-blue-600 mt-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Starts:"})," ",new Date(n.start_date).toLocaleString()]}),n.end_date&&i.jsxs("p",{children:[i.jsx("strong",{children:"Ends:"})," ",new Date(n.end_date).toLocaleString()]})]})]}),i.jsx("button",{onClick:()=>t("/dashboard"),className:"btn-primary px-4 py-2",children:"Return to Dashboard"})]})})});if(O)return i.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center p-4",children:i.jsx("div",{className:"max-w-md w-full",children:i.jsxs("div",{className:"card p-8 text-center",children:[i.jsx(yt,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Error Loading Exam"}),i.jsx("p",{className:"text-secondary-600 mb-4",children:O}),i.jsx("button",{onClick:()=>t("/dashboard"),className:"btn-primary px-4 py-2",children:"Return to Dashboard"})]})})});if(!m)return i.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center p-4",children:i.jsx("div",{className:"max-w-md w-full",children:i.jsxs("div",{className:"card p-8 text-center",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx(Xg,{className:"h-16 w-16 text-primary-600 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Enter Access Code"}),i.jsx("p",{className:"text-secondary-600",children:"Please enter your exam access code to continue"})]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-700",children:[i.jsx(ke,{className:"h-5 w-5"}),i.jsx("span",{className:"font-medium",children:"Logged in as"})]}),i.jsx("p",{className:"text-sm text-blue-600 mt-1",children:i.jsx("strong",{children:r==null?void 0:r.email})}),i.jsx("p",{className:"text-xs text-blue-500 mt-1",children:"Make sure your access code is assigned to this email address"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{children:i.jsx("input",{type:"text",className:"input w-full text-center text-lg font-mono tracking-wider",placeholder:"Enter your access code",value:g,onChange:R=>w(R.target.value.toUpperCase()),maxLength:10})}),i.jsx("button",{onClick:()=>$(g),disabled:_||!g.trim(),className:"btn-primary w-full py-3 text-lg",children:_?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Verifying..."]}):"Verify Code"})]}),i.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:i.jsxs("p",{className:"text-sm text-yellow-700",children:[i.jsx("strong",{children:"Important:"}),i.jsx("br",{})," You must have a registered account to take exams",i.jsx("br",{})," Your access code must be assigned to your email address",i.jsx("br",{})," Contact your administrator if you need help"]})})]})})});if(!n||S.length===0)return i.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),i.jsx("p",{className:"text-secondary-600",children:"Preparing exam..."})]})});const P=S[o],I=(o+1)/S.length*100;return f?i.jsxs("div",{className:"min-h-screen bg-secondary-50",children:[i.jsx("div",{className:"bg-white border-b border-secondary-200 px-4 py-3",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-medium text-secondary-900",children:n.title}),i.jsxs("p",{className:"text-sm text-secondary-500",children:["Question ",o+1," of ",S.length,"  ",i.jsx("strong",{children:r.email})]})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center text-sm text-secondary-600",children:[i.jsx(bt,{className:"h-4 w-4 mr-1"}),i.jsx("span",{className:l<300?"text-red-600 font-medium":"",children:z(l)})]}),i.jsx("button",{onClick:te,className:"btn-primary px-4 py-2",children:"Submit Exam"})]})]})}),i.jsx("div",{className:"bg-white border-b border-secondary-200",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-2",children:i.jsx("div",{className:"w-full bg-secondary-200 rounded-full h-2",children:i.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${I}%`}})})})}),i.jsx("div",{className:"max-w-4xl mx-auto p-4",children:i.jsxs("div",{className:"card p-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-medium text-secondary-900 mb-4",children:P.question_text}),i.jsx("div",{className:"space-y-3",children:P.type==="multiple_choice"||P.type==="true_false"?P.options.map((R,T)=>i.jsxs("label",{className:"flex items-center p-3 border border-secondary-200 rounded-lg hover:bg-secondary-50 cursor-pointer transition-colors",children:[i.jsx("input",{type:"radio",name:`question-${P.id}`,value:R,checked:d[P.id]===R,onChange:U=>Le(P.id,U.target.value),className:"mr-3 text-primary-600 focus:ring-primary-500"}),i.jsx("span",{className:"text-secondary-900",children:R})]},T)):i.jsx("textarea",{className:"input w-full h-32 resize-none",placeholder:"Enter your answer here...",value:d[P.id]||"",onChange:R=>Le(P.id,R.target.value)})})]}),i.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-secondary-200",children:[i.jsx("button",{onClick:kt,disabled:o===0,className:"btn-outline px-4 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),i.jsxs("span",{className:"text-sm text-secondary-500",children:[Object.keys(d).length," of ",S.length," answered"]}),o===S.length-1?i.jsx("button",{onClick:te,className:"btn-primary px-4 py-2",children:"Submit Exam"}):i.jsx("button",{onClick:Ke,className:"btn-primary px-4 py-2",children:"Next"})]})]})})]}):i.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center p-4",children:i.jsx("div",{className:"max-w-2xl w-full",children:i.jsxs("div",{className:"card p-8 text-center",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx(ke,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-secondary-900 mb-2",children:n.title}),i.jsx("p",{className:"text-secondary-600",children:n.description||"Welcome to your exam"})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-700",children:[i.jsx(ke,{className:"h-5 w-5"}),i.jsx("span",{className:"font-medium",children:"Access Verified"})]}),i.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Code: ",i.jsx("span",{className:"font-mono",children:g}),"  User: ",i.jsx("strong",{children:r.email})]})]}),(n.start_date||n.end_date)&&i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-700 mb-2",children:[i.jsx(wt,{className:"h-5 w-5"}),i.jsx("span",{className:"font-medium",children:"Exam Schedule"})]}),i.jsxs("div",{className:"text-sm text-blue-600 space-y-1",children:[n.start_date&&i.jsxs("p",{children:[i.jsx("strong",{children:"Started:"})," ",new Date(n.start_date).toLocaleString()]}),n.end_date&&i.jsxs("p",{children:[i.jsx("strong",{children:"Ends:"})," ",new Date(n.end_date).toLocaleString()]})]})]}),i.jsxs("div",{className:"bg-secondary-50 rounded-lg p-6 mb-6",children:[i.jsx("h2",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Exam Instructions"}),i.jsxs("div",{className:"text-left space-y-2 text-sm text-secondary-600",children:[i.jsxs("p",{children:[" You have ",n.time_limit||60," minutes to complete this exam"]}),i.jsxs("p",{children:[" There are ",S.length," questions in total"]}),i.jsx("p",{children:" You can navigate between questions using the Next/Previous buttons"}),i.jsx("p",{children:" Make sure to save your answers before the time runs out"}),i.jsx("p",{children:" Once you start, you cannot pause the exam"}),n.shuffle_questions&&i.jsx("p",{children:" Questions have been randomized for this attempt"})]})]}),i.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-secondary-500 mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(bt,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:[n.time_limit||60," minutes"]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(yt,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:[S.length," questions"]})]})]}),i.jsx("button",{onClick:X,className:"btn-primary px-8 py-3 text-lg",children:"Start Exam"})]})})})}function gv(){const{examId:e}=oa(),t=Lr(),{user:r}=Ee(),[s,n]=j.useState(null),[a,l]=j.useState(!0),[c,o]=j.useState(null);j.useEffect(()=>{e&&r&&u()},[e,r]);const u=async()=>{try{l(!0),o(null);const{data:v,error:x}=await D.from("exam_attempts").select(`
          *,
          exams (
            title,
            description,
            show_results,
            subjects (
              id,
              name,
              pass_mark
            )
          ),
          profiles (
            full_name,
            email
          )
        `).eq("exam_id",e).eq("user_id",r.id).not("completed_at","is",null).order("completed_at",{ascending:!1}).limit(1).single();if(x)throw x;if(!v)throw new Error("No completed exam attempt found");const m=await d(v.answers,v.exams.subjects),p=m.length>0?m.reduce((N,E)=>N+E.pass_mark,0)/m.length:60,_=v.score>=p;n({id:v.id,exam_id:v.exam_id,exam_title:v.exams.title,exam_description:v.exams.description,score:v.score,total_points:v.total_points,time_spent:v.time_spent,completed_at:v.completed_at,passed:_,show_results:v.exams.show_results,subjects:m,user_name:v.profiles.full_name,user_email:v.profiles.email})}catch(v){o(v instanceof Error?v.message:"Failed to load exam result")}finally{l(!1)}},d=async(v,x)=>{const m=[];for(const p of x){const{data:_}=await D.from("questions").select("*").eq("subject_id",p.id);if(!_)continue;let N=0,E=0;_.forEach(k=>{E+=k.points;const S=v[k.id];if(S){if(k.type==="multiple_choice"||k.type==="true_false")k.correct_answers.includes(S)&&(N+=k.points);else if(k.type==="fill_blank"||k.type==="short_answer"){const W=S.toLowerCase().trim();k.correct_answers.some(G=>G.toLowerCase().trim()===W)&&(N+=k.points)}}});const b=E>0?Math.round(N/E*100):0,O=b>=p.pass_mark;m.push({id:p.id,name:p.name,pass_mark:p.pass_mark,score:b,total_points:E,passed:O})}return m},h=()=>{window.print()},f=()=>{t("/dashboard")},y=(v,x)=>v>=x?"text-green-600":v>=x*.8?"text-yellow-600":"text-red-600",g=(v,x)=>v>=x?"bg-green-100 text-green-800":v>=x*.8?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";if(a)return i.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto mb-4"}),i.jsx("p",{className:"text-secondary-600",children:"Loading your results..."})]})});if(c||!s)return i.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center p-4",children:i.jsx("div",{className:"max-w-md w-full",children:i.jsxs("div",{className:"card p-8 text-center",children:[i.jsx(br,{className:"h-16 w-16 text-red-600 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Unable to Load Results"}),i.jsx("p",{className:"text-secondary-600 mb-4",children:c||"Results not found"}),i.jsx("button",{onClick:f,className:"btn-primary px-4 py-2",children:"Return to Dashboard"})]})})});if(!s.show_results)return i.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center p-4",children:i.jsx("div",{className:"max-w-md w-full",children:i.jsxs("div",{className:"card p-8 text-center",children:[i.jsx(Ot,{className:"h-16 w-16 text-blue-600 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-secondary-900 mb-2",children:"Exam Completed"}),i.jsx("p",{className:"text-secondary-600 mb-4",children:"Your exam has been submitted successfully. Results will be available later."}),i.jsx("button",{onClick:f,className:"btn-primary px-4 py-2",children:"Return to Dashboard"})]})})});const w=s.subjects.length>0?s.subjects.reduce((v,x)=>v+x.pass_mark,0)/s.subjects.length:60;return i.jsxs("div",{className:"min-h-screen bg-secondary-50",children:[i.jsx("style",{children:`
        @media print {
          .no-print { display: none !important; }
          .print-only { display: block !important; }
          body { background: white !important; }
          .card { box-shadow: none !important; border: 1px solid #ccc !important; }
        }
        .print-only { display: none; }
      `}),i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsxs("div",{className:"no-print mb-6 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Exam Results"}),i.jsx("p",{className:"text-secondary-600",children:"Your performance summary"})]}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs("button",{onClick:h,className:"btn-outline px-4 py-2 flex items-center space-x-2",children:[i.jsx(qu,{className:"h-4 w-4"}),i.jsx("span",{children:"Print Results"})]}),i.jsxs("button",{onClick:f,className:"btn-primary px-4 py-2 flex items-center space-x-2",children:[i.jsx(zu,{className:"h-4 w-4"}),i.jsx("span",{children:"Dashboard"})]})]})]}),i.jsxs("div",{className:"print-only mb-6 text-center border-b pb-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-secondary-900",children:"Exam Results Certificate"}),i.jsx("p",{className:"text-secondary-600 mt-2",children:"Computer-Based Testing System"})]}),i.jsxs("div",{className:"card p-8 mb-6",children:[i.jsxs("div",{className:"text-center mb-8 border-b border-secondary-200 pb-6",children:[i.jsxs("div",{className:"flex items-center justify-center mb-4",children:[i.jsx(ys,{className:"h-8 w-8 text-primary-600 mr-3"}),i.jsxs("div",{className:"text-left",children:[i.jsx("h2",{className:"text-2xl font-bold text-secondary-900",children:s.user_name||"Student Name Not Available"}),i.jsx("p",{className:"text-lg text-secondary-600",children:s.user_email})]})]}),i.jsx("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:i.jsx("p",{className:"text-sm text-primary-700",children:"This certificate belongs to the above named individual"})})]}),i.jsx("div",{className:"text-center mb-8",children:s.passed?i.jsxs("div",{children:[i.jsx(kn,{className:"h-20 w-20 text-yellow-500 mx-auto mb-4"}),i.jsx("h3",{className:"text-3xl font-bold text-green-600 mb-2",children:"Congratulations!"}),i.jsxs("p",{className:"text-xl text-secondary-900 mb-2",children:[i.jsx("strong",{children:s.user_name||s.user_email})," passed the exam!"]}),i.jsx("p",{className:"text-secondary-600",children:"You have successfully met the pass mark requirements for this examination."})]}):i.jsxs("div",{children:[i.jsx(br,{className:"h-20 w-20 text-red-500 mx-auto mb-4"}),i.jsx("h3",{className:"text-3xl font-bold text-red-600 mb-2",children:"Unfortunately"}),i.jsxs("p",{className:"text-xl text-secondary-900 mb-2",children:[i.jsx("strong",{children:s.user_name||s.user_email})," didn't meet the pass mark for this exam"]}),i.jsx("p",{className:"text-secondary-600",children:"Don't worry! You can review the material and try again when available."})]})}),i.jsxs("div",{className:"border-t border-secondary-200 pt-6 mb-6",children:[i.jsx("h4",{className:"text-xl font-semibold text-secondary-900 mb-4",children:s.exam_title}),s.exam_description&&i.jsx("p",{className:"text-secondary-600 mb-4",children:s.exam_description}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{className:"p-4 bg-secondary-50 rounded-lg",children:[i.jsx("div",{className:"flex items-center justify-center mb-2",children:i.jsx(nc,{className:"h-6 w-6 text-blue-600"})}),i.jsxs("div",{className:"text-2xl font-bold text-secondary-900",children:[s.score,"%"]}),i.jsx("div",{className:"text-sm text-secondary-600",children:"Overall Score"})]}),i.jsxs("div",{className:"p-4 bg-secondary-50 rounded-lg",children:[i.jsx("div",{className:"flex items-center justify-center mb-2",children:i.jsx(nv,{className:"h-6 w-6 text-orange-600"})}),i.jsxs("div",{className:"text-2xl font-bold text-secondary-900",children:[Math.round(w),"%"]}),i.jsx("div",{className:"text-sm text-secondary-600",children:"Required Pass Mark"})]}),i.jsxs("div",{className:"p-4 bg-secondary-50 rounded-lg",children:[i.jsx("div",{className:"flex items-center justify-center mb-2",children:i.jsx(bt,{className:"h-6 w-6 text-purple-600"})}),i.jsx("div",{className:"text-2xl font-bold text-secondary-900",children:s.time_spent?`${s.time_spent} min`:"N/A"}),i.jsx("div",{className:"text-sm text-secondary-600",children:"Time Spent"})]})]})]}),s.subjects.length>0&&i.jsxs("div",{className:"border-t border-secondary-200 pt-6",children:[i.jsx("h5",{className:"text-lg font-semibold text-secondary-900 mb-4",children:"Subject-wise Performance"}),i.jsx("div",{className:"space-y-4",children:s.subjects.map(v=>i.jsxs("div",{className:"border border-secondary-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h6",{className:"font-medium text-secondary-900",children:v.name}),i.jsxs("div",{className:"flex items-center space-x-2",children:[v.passed?i.jsx(ke,{className:"h-5 w-5 text-green-600"}):i.jsx(br,{className:"h-5 w-5 text-red-600"}),i.jsxs("span",{className:`font-bold text-lg ${y(v.score,v.pass_mark)}`,children:[v.score,"%"]})]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"text-secondary-600",children:["Pass Mark: ",v.pass_mark,"%"]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(v.score,v.pass_mark)}`,children:v.passed?"Passed":"Failed"})]}),i.jsxs("div",{className:"mt-3",children:[i.jsx("div",{className:"w-full bg-secondary-200 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${v.passed?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(v.score,100)}%`}})}),i.jsxs("div",{className:"flex justify-between text-xs text-secondary-500 mt-1",children:[i.jsx("span",{children:"0%"}),i.jsxs("span",{className:"font-medium",children:["Pass: ",v.pass_mark,"%"]}),i.jsx("span",{children:"100%"})]})]})]},v.id))})]}),i.jsx("div",{className:"border-t border-secondary-200 pt-6 mt-6",children:i.jsxs("div",{className:"text-sm text-secondary-600 space-y-1",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Student:"})," ",s.user_name||s.user_email]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",s.user_email]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Completed:"})," ",new Date(s.completed_at).toLocaleString()]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Total Points:"})," ",Math.round(s.score/100*s.total_points)," / ",s.total_points]}),s.time_spent&&i.jsxs("p",{children:[i.jsx("strong",{children:"Time Taken:"})," ",s.time_spent," minutes"]})]})})]}),i.jsxs("div",{className:"no-print text-center space-x-4",children:[i.jsxs("button",{onClick:h,className:"btn-outline px-6 py-3 flex items-center space-x-2 mx-auto",children:[i.jsx(qu,{className:"h-5 w-5"}),i.jsx("span",{children:"Print Certificate"})]}),i.jsxs("button",{onClick:f,className:"btn-primary px-6 py-3 flex items-center space-x-2 mx-auto",children:[i.jsx(zu,{className:"h-5 w-5"}),i.jsx("span",{children:"Return to Dashboard"})]})]}),i.jsxs("div",{className:"print-only mt-8 pt-4 border-t text-center text-sm text-secondary-600",children:[i.jsx("p",{children:"This is an official result certificate from the Computer-Based Testing System"}),i.jsxs("p",{children:["Student: ",i.jsx("strong",{children:s.user_name||s.user_email}),"  Email: ",s.user_email]}),i.jsxs("p",{children:["Generated on: ",new Date().toLocaleString()]})]})]})]})}function vv(){var v,x;const{user:e}=Ee(),[t,r]=j.useState([]),[s,n]=j.useState(!0),[a,l]=j.useState(null),[c,o]=j.useState("all");j.useEffect(()=>{e&&u()},[e]);const u=async()=>{try{n(!0),l(null);const{data:m,error:p}=await D.from("exam_results_view").select("*").eq("user_id",e.id).order("started_at",{ascending:!1});if(p)throw p;r(m||[])}catch(m){l(m instanceof Error?m.message:"Failed to load exam history")}finally{n(!1)}},d=t.filter(m=>{switch(c){case"completed":return m.completed_at!==null;case"passed":return m.passed===!0;case"failed":return m.passed===!1;default:return!0}}),h=m=>m.completed_at?m.passed?i.jsx(kn,{className:"h-5 w-5 text-green-600"}):i.jsx(br,{className:"h-5 w-5 text-red-600"}):i.jsx(bt,{className:"h-5 w-5 text-yellow-600"}),f=m=>m.completed_at?m.passed?"Passed":"Failed":"In Progress",y=m=>m.completed_at?m.passed?"bg-green-100 text-green-800":"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",g=m=>m>=80?"text-green-600":m>=60?"text-yellow-600":"text-red-600",w={total:t.length,completed:t.filter(m=>m.completed_at).length,passed:t.filter(m=>m.passed===!0).length,averageScore:t.filter(m=>m.completed_at).length>0?Math.round(t.filter(m=>m.completed_at).reduce((m,p)=>m+p.score,0)/t.filter(m=>m.completed_at).length):0};return s?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Exam History"}),i.jsx("p",{className:"text-secondary-600",children:"Your exam attempts and results"})]}),i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})]}):a?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Exam History"}),i.jsx("p",{className:"text-secondary-600",children:"Your exam attempts and results"})]}),i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(yt,{className:"h-5 w-5 text-red-400"}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error loading exam history"}),i.jsx("p",{className:"text-sm text-red-700 mt-1",children:a})]})]})})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Exam History"}),i.jsxs("div",{className:"flex items-center space-x-2 text-secondary-600",children:[i.jsx(ys,{className:"h-4 w-4"}),i.jsxs("span",{children:[i.jsx("strong",{children:((v=e==null?void 0:e.user_metadata)==null?void 0:v.full_name)||(e==null?void 0:e.email)}),((x=e==null?void 0:e.user_metadata)==null?void 0:x.full_name)&&i.jsxs("span",{className:"text-sm ml-2",children:["(",e.email,")"]})]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ot,{className:"h-8 w-8 text-blue-600"}),i.jsxs("div",{className:"ml-5",children:[i.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Total Exams"}),i.jsx("p",{className:"text-lg font-medium text-secondary-900",children:w.total})]})]})}),i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(ke,{className:"h-8 w-8 text-green-600"}),i.jsxs("div",{className:"ml-5",children:[i.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Completed"}),i.jsx("p",{className:"text-lg font-medium text-secondary-900",children:w.completed})]})]})}),i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(kn,{className:"h-8 w-8 text-yellow-600"}),i.jsxs("div",{className:"ml-5",children:[i.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Passed"}),i.jsx("p",{className:"text-lg font-medium text-secondary-900",children:w.passed})]})]})}),i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(nc,{className:"h-8 w-8 text-purple-600"}),i.jsxs("div",{className:"ml-5",children:[i.jsx("p",{className:"text-sm font-medium text-secondary-500",children:"Avg. Score"}),i.jsx("p",{className:"text-lg font-medium text-secondary-900",children:w.averageScore>0?`${w.averageScore}%`:"N/A"})]})]})})]}),i.jsx("div",{className:"card p-4",children:i.jsxs("div",{className:"flex space-x-4",children:[i.jsxs("button",{onClick:()=>o("all"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${c==="all"?"bg-primary-100 text-primary-900":"text-secondary-600 hover:text-secondary-900"}`,children:["All (",t.length,")"]}),i.jsxs("button",{onClick:()=>o("completed"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${c==="completed"?"bg-primary-100 text-primary-900":"text-secondary-600 hover:text-secondary-900"}`,children:["Completed (",w.completed,")"]}),i.jsxs("button",{onClick:()=>o("passed"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${c==="passed"?"bg-primary-100 text-primary-900":"text-secondary-600 hover:text-secondary-900"}`,children:["Passed (",w.passed,")"]}),i.jsxs("button",{onClick:()=>o("failed"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${c==="failed"?"bg-primary-100 text-primary-900":"text-secondary-600 hover:text-secondary-900"}`,children:["Failed (",w.completed-w.passed,")"]})]})}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"px-6 py-4 border-b border-secondary-200",children:i.jsxs("h3",{className:"text-lg font-medium text-secondary-900",children:["Exam Attempts (",d.length,")"]})}),d.length>0?i.jsx("div",{className:"divide-y divide-secondary-200",children:d.map(m=>i.jsx("div",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[h(m),i.jsx("h4",{className:"text-lg font-medium text-secondary-900",children:m.exam_title}),i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y(m)}`,children:f(m)})]}),m.exam_description&&i.jsx("p",{className:"text-sm text-secondary-600 mb-2",children:m.exam_description}),i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx(ys,{className:"h-4 w-4 text-secondary-400"}),i.jsx("span",{className:"text-sm font-medium text-secondary-700",children:m.user_name||m.user_email}),m.user_name&&i.jsxs("span",{className:"text-xs text-secondary-500",children:["(",m.user_email,")"]})]}),i.jsxs("div",{className:"flex items-center space-x-6 text-sm text-secondary-500",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(wt,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:["Started: ",new Date(m.started_at).toLocaleDateString()]})]}),m.completed_at&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(ke,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:["Completed: ",new Date(m.completed_at).toLocaleDateString()]})]}),m.time_spent&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(bt,{className:"h-4 w-4 mr-1"}),i.jsxs("span",{children:[m.time_spent," minutes"]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[m.completed_at&&i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:`text-2xl font-bold ${g(m.score)}`,children:[m.score,"%"]}),i.jsxs("div",{className:"text-sm text-secondary-500",children:[Math.round(m.score/100*m.total_points)," / ",m.total_points," points"]})]}),m.completed_at&&m.show_results&&i.jsxs(Ie,{to:`/exam/${m.exam_id}/result`,className:"btn-outline px-3 py-1 text-sm flex items-center space-x-1",children:[i.jsx(xs,{className:"h-4 w-4"}),i.jsx("span",{children:"View Results"})]})]})]})},m.id))}):i.jsxs("div",{className:"px-6 py-8 text-center",children:[i.jsx(Ot,{className:"h-12 w-12 text-secondary-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-2",children:c==="all"?"No exam history yet":`No ${c} exams`}),i.jsx("p",{className:"text-secondary-500",children:c==="all"?"Your exam attempts will appear here":`No exams match the ${c} filter`})]})]})]})}function wv(e){const{user:t}=Ee(),[r,s]=j.useState(null),[n,a]=j.useState([]),[l,c]=j.useState({averageScore:0,highestScore:0,lowestScore:0,passRate:0,averageTime:0,totalAttempts:0}),[o,u]=j.useState({excellent:0,good:0,needsImprovement:0}),[d,h]=j.useState(!0),[f,y]=j.useState(null),g=async()=>{if(!(!t||!e))try{h(!0),y(null);const{data:w,error:v}=await D.from("exams").select("*").eq("id",e).eq("creator_id",t.id).single();if(v)throw v;s(w);const{data:x,error:m}=await D.from("exam_attempts").select(`
          *,
          profiles (*)
        `).eq("exam_id",e).not("completed_at","is",null).order("completed_at",{ascending:!1});if(m)throw m;const p=x||[];if(a(p),p.length>0){const _=p.filter(N=>N.score!==null&&N.completed_at);if(_.length>0){const N=_.map(Y=>Y.score||0),E=_.filter(Y=>Y.time_spent).map(Y=>Y.time_spent||0),b=Math.round(N.reduce((Y,K)=>Y+K,0)/N.length),O=Math.max(...N),k=Math.min(...N),S=Math.round(N.filter(Y=>Y>=60).length/N.length*100),W=E.length>0?Math.round(E.reduce((Y,K)=>Y+K,0)/E.length):0;c({averageScore:b,highestScore:O,lowestScore:k,passRate:S,averageTime:W,totalAttempts:_.length});const F=N.filter(Y=>Y>=80).length,G=N.filter(Y=>Y>=60&&Y<80).length,Ae=N.filter(Y=>Y<60).length;u({excellent:F,good:G,needsImprovement:Ae})}}}catch(w){y(w instanceof Error?w.message:"Failed to fetch exam results")}finally{h(!1)}};return j.useEffect(()=>{g()},[t,e]),{exam:r,attempts:n,stats:l,scoreDistribution:o,loading:d,error:f,refetch:g}}function jv(){const{examId:e}=oa(),{exam:t,attempts:r,stats:s,scoreDistribution:n,loading:a,error:l}=wv(e);if(a)return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Exam Results"}),i.jsx("p",{className:"text-secondary-600",children:"Loading exam data..."})]})}),i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})]});if(l||!t)return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Exam Results"}),i.jsx("p",{className:"text-secondary-600",children:"Error loading exam data"})]})}),i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(yt,{className:"h-5 w-5 text-red-400"}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error loading exam results"}),i.jsx("p",{className:"text-sm text-red-700 mt-1",children:l||"Exam not found"})]})]})})]});const c=[{name:"Average Score",value:s.averageScore>0?`${s.averageScore}%`:"N/A",icon:Qf,color:"text-blue-600"},{name:"Total Attempts",value:s.totalAttempts.toString(),icon:Lt,color:"text-green-600"},{name:"Average Time",value:s.averageTime>0?`${s.averageTime} min`:"N/A",icon:bt,color:"text-purple-600"},{name:"Pass Rate",value:`${s.passRate}%`,icon:Hg,color:"text-orange-600"}],o=d=>d>=80?"text-green-600":d>=60?"text-yellow-600":"text-red-600",u=d=>d>=80?"bg-green-100 text-green-800":d>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-secondary-900",children:[t.title," - Results"]}),i.jsx("p",{className:"text-secondary-600",children:t.description||"Exam results and analytics"})]}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs("button",{className:"btn-outline px-4 py-2 flex items-center space-x-2",children:[i.jsx(Nn,{className:"h-4 w-4"}),i.jsx("span",{children:"Export CSV"})]}),i.jsxs("button",{className:"btn-secondary px-4 py-2 flex items-center space-x-2",children:[i.jsx(Nn,{className:"h-4 w-4"}),i.jsx("span",{children:"Export PDF"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map(d=>{const h=d.icon;return i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(h,{className:`h-8 w-8 ${d.color}`})}),i.jsx("div",{className:"ml-5 w-0 flex-1",children:i.jsxs("dl",{children:[i.jsx("dt",{className:"text-sm font-medium text-secondary-500 truncate",children:d.name}),i.jsx("dd",{className:"text-lg font-medium text-secondary-900",children:d.value})]})})]})},d.name)})}),i.jsxs("div",{className:"card p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Score Distribution"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.excellent}),i.jsx("div",{className:"text-sm text-green-700",children:"Excellent (80-100%)"})]}),i.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:n.good}),i.jsx("div",{className:"text-sm text-yellow-700",children:"Good (60-79%)"})]}),i.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.needsImprovement}),i.jsx("div",{className:"text-sm text-red-700",children:"Needs Improvement (<60%)"})]})]})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"px-6 py-4 border-b border-secondary-200",children:i.jsx("h3",{className:"text-lg font-medium text-secondary-900",children:"Individual Results"})}),r.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-secondary-200",children:[i.jsx("thead",{className:"bg-secondary-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Student"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Score"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Time Spent"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Completed At"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-secondary-200",children:r.map(d=>{var h,f;return i.jsxs("tr",{className:"hover:bg-secondary-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(ys,{className:"h-5 w-5 text-secondary-400 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-secondary-900",children:((h=d.profiles)==null?void 0:h.full_name)||"Name Not Available"}),i.jsx("div",{className:"text-sm text-secondary-500",children:(f=d.profiles)==null?void 0:f.email})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsxs("span",{className:`text-lg font-medium ${o(d.score||0)}`,children:[d.score||0,"%"]}),i.jsxs("span",{className:`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u(d.score||0)}`,children:[d.score||0,"/",d.total_points]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-900",children:d.time_spent?`${d.time_spent} minutes`:"N/A"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-500",children:d.completed_at?new Date(d.completed_at).toLocaleString():"In Progress"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsxs("button",{className:"text-primary-600 hover:text-primary-900 flex items-center",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"}),"View Details"]})})]},d.id)})})]})}):i.jsxs("div",{className:"px-6 py-8 text-center",children:[i.jsx(Lt,{className:"h-12 w-12 text-secondary-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-2",children:"No attempts yet"}),i.jsx("p",{className:"text-secondary-500",children:"Students haven't taken this exam yet"})]})]})]})}function _v(){const{user:e}=Ee(),[t,r]=j.useState([]),[s,n]=j.useState(!0),[a,l]=j.useState(null),c=async()=>{if(e)try{n(!0);const{data:u,error:d}=await D.from("questions").select(`
          *,
          subjects!inner (
            *,
            exams!inner (*)
          )
        `).eq("subjects.exams.creator_id",e.id).order("created_at",{ascending:!1});if(d)throw d;r(u||[])}catch(u){l(u instanceof Error?u.message:"Failed to fetch questions")}finally{n(!1)}},o=async(u,d)=>{if(!e)throw new Error("User not authenticated");try{const{data:h,error:f}=await D.from("questions").select("*").eq("id",u).single();if(f)throw f;const{data:y}=await D.from("questions").select("order_index").eq("subject_id",d).order("order_index",{ascending:!1}).limit(1),g=y&&y.length>0?y[0].order_index+1:0,{data:w,error:v}=await D.from("questions").insert({subject_id:d,type:h.type,question_text:h.question_text,options:h.options,correct_answers:h.correct_answers,points:h.points,order_index:g}).select().single();if(v)throw v;return await c(),w}catch(h){throw h instanceof Error?h:new Error("Failed to copy question")}};return j.useEffect(()=>{c()},[e]),{questions:t,loading:s,error:a,copyQuestionToSubject:o,refetch:c}}function Nv(){const{questions:e,loading:t,error:r,copyQuestionToSubject:s}=_v(),{exams:n}=ic(),[a,l]=j.useState(""),[c,o]=j.useState("all"),[u,d]=j.useState("all"),[h,f]=j.useState(!1),[y,g]=j.useState(!1),[w,v]=j.useState(null),[x,m]=j.useState(""),[p,_]=j.useState(""),[N,E]=j.useState(!1),[b,O]=j.useState(null),[k,S]=j.useState(null),W=[{value:"all",label:"All Types"},{value:"multiple_choice",label:"Multiple Choice"},{value:"true_false",label:"True/False"},{value:"fill_blank",label:"Fill in the Blank"},{value:"short_answer",label:"Short Answer"}],F=e.filter(C=>{const M=C.question_text.toLowerCase().includes(a.toLowerCase()),$=c==="all"||C.type===c,z=u==="all"||C.subjects.exams.id===u;return M&&$&&z}),G=async(C,M)=>{try{await s(C,M),f(!1),v(null),alert("Question copied successfully!")}catch($){alert($ instanceof Error?$.message:"Failed to copy question")}},Ae=()=>n.flatMap(C=>{var M;return((M=C.subjects)==null?void 0:M.map($=>({id:$.id,name:$.name,examTitle:C.title})))||[]}),Y=()=>{const C=["Question Type,Question Text,Option 1,Option 2,Option 3,Option 4,Correct Answer(s),Points",'multiple_choice,"What is 2+2?","3","4","5","6","4",1','true_false,"The earth is round","True","False","","","True",1','fill_blank,"The capital of France is ____","","","","","Paris",1','short_answer,"Explain photosynthesis","","","","","Process by which plants make food",2'].join(`
`),M=new Blob([C],{type:"text/csv"}),$=window.URL.createObjectURL(M),z=document.createElement("a");z.href=$,z.download="question-bank-template.csv",z.click(),window.URL.revokeObjectURL($)},K=C=>{const M=[];let $="",z=!1;for(let X=0;X<C.length;X++){const Le=C[X];Le==='"'?z=!z:Le===","&&!z?(M.push($.trim()),$=""):$+=Le}return M.push($.trim()),M},ye=async()=>{if(!x.trim()){S("Please paste CSV data");return}if(!p){S("Please select a subject for the questions");return}try{E(!0),S(null),O(null);const C=x.trim().split(`
`);if(C.length<2)throw new Error("CSV must contain at least a header row and one data row");if(K(C[0]).length<7)throw new Error("Invalid CSV format. Please use the template with all required columns.");const $=[],z=[];for(let te=1;te<C.length;te++)try{const P=K(C[te]);if(P.length<7){z.push(`Row ${te+1}: Insufficient columns`);continue}const I=P[0].toLowerCase().trim(),R=P[1].trim(),T=P.slice(2,6).filter(ee=>ee.trim()),U=P[6].split(";").map(ee=>ee.trim()).filter(ee=>ee),B=parseInt(P[7])||1;if(!["multiple_choice","true_false","fill_blank","short_answer"].includes(I)){z.push(`Row ${te+1}: Invalid question type "${I}"`);continue}if(!R){z.push(`Row ${te+1}: Question text is required`);continue}if(U.length===0){z.push(`Row ${te+1}: At least one correct answer is required`);continue}if(I==="multiple_choice"&&T.length<2){z.push(`Row ${te+1}: Multiple choice questions need at least 2 options`);continue}I==="true_false"&&(T.length=0,T.push("True","False")),$.push({type:I,question_text:R,options:T.length>0?T:null,correct_answers:U,points:B})}catch(P){z.push(`Row ${te+1}: ${P instanceof Error?P.message:"Parse error"}`)}if(z.length>0)throw new Error(`Parsing errors:
${z.join(`
`)}`);if($.length===0)throw new Error("No valid questions found to upload");const{data:X}=await D.from("questions").select("order_index").eq("subject_id",p).order("order_index",{ascending:!1}).limit(1);let Le=X&&X.length>0?X[0].order_index+1:0;const Ke=$.map(te=>({subject_id:p,type:te.type,question_text:te.question_text,options:te.options,correct_answers:te.correct_answers,points:te.points,order_index:Le++})),{data:kt,error:Fe}=await D.from("questions").insert(Ke).select();if(Fe)throw Fe;O(`Successfully uploaded ${kt.length} questions!`),m(""),_(""),window.location.reload()}catch(C){S(C instanceof Error?C.message:"Failed to upload questions")}finally{E(!1)}};return t?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Question Bank"}),i.jsx("p",{className:"text-secondary-600",children:"Manage your question library"})]}),i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})]}):r?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Question Bank"}),i.jsx("p",{className:"text-secondary-600",children:"Manage your question library"})]}),i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(yt,{className:"h-5 w-5 text-red-400"}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error loading questions"}),i.jsx("p",{className:"text-sm text-red-700 mt-1",children:r})]})]})})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Question Bank"}),i.jsx("p",{className:"text-secondary-600",children:"Manage and reuse questions across exams"})]}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs("button",{onClick:Y,className:"btn-outline px-4 py-2 flex items-center space-x-2",children:[i.jsx(Nn,{className:"h-4 w-4"}),i.jsx("span",{children:"Download Template"})]}),i.jsxs("button",{onClick:()=>g(!0),className:"btn-primary px-4 py-2 flex items-center space-x-2",children:[i.jsx(Vu,{className:"h-4 w-4"}),i.jsx("span",{children:"Bulk Upload"})]})]})]}),i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Search Questions"}),i.jsxs("div",{className:"relative",children:[i.jsx(Wf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-secondary-400"}),i.jsx("input",{type:"text",className:"input pl-10 w-full",placeholder:"Search by question text...",value:a,onChange:C=>l(C.target.value)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Question Type"}),i.jsx("select",{className:"input w-full",value:c,onChange:C=>o(C.target.value),children:W.map(C=>i.jsx("option",{value:C.value,children:C.label},C.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Source Exam"}),i.jsxs("select",{className:"input w-full",value:u,onChange:C=>d(C.target.value),children:[i.jsx("option",{value:"all",children:"All Exams"}),n.map(C=>i.jsx("option",{value:C.id,children:C.title},C.id))]})]})]})}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"px-6 py-4 border-b border-secondary-200",children:i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("h3",{className:"text-lg font-medium text-secondary-900",children:["Questions (",F.length,")"]})})}),F.length>0?i.jsx("div",{className:"divide-y divide-secondary-200",children:F.map(C=>i.jsx("div",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C.type==="multiple_choice"?"bg-blue-100 text-blue-800":C.type==="true_false"?"bg-green-100 text-green-800":C.type==="fill_blank"?"bg-yellow-100 text-yellow-800":"bg-purple-100 text-purple-800"}`,children:C.type.replace("_"," ")}),i.jsxs("span",{className:"text-sm text-secondary-500",children:[C.points," points"]})]}),i.jsx("h4",{className:"text-sm font-medium text-secondary-900 mb-2",children:C.question_text}),C.options&&C.options.length>0&&i.jsxs("div",{className:"text-sm text-secondary-600 mb-2",children:[i.jsx("strong",{children:"Options:"})," ",C.options.join(", ")]}),i.jsxs("div",{className:"text-sm text-secondary-600 mb-2",children:[i.jsx("strong",{children:"Correct Answer(s):"})," ",C.correct_answers.join(", ")]}),i.jsxs("div",{className:"text-xs text-secondary-500",children:["From: ",C.subjects.exams.title,"  ",C.subjects.name]})]}),i.jsx("div",{className:"flex items-center space-x-2 ml-4",children:i.jsxs("button",{onClick:()=>{v(C.id),f(!0)},className:"btn-outline px-3 py-1 text-sm flex items-center space-x-1",children:[i.jsx(Bf,{className:"h-3 w-3"}),i.jsx("span",{children:"Copy"})]})})]})},C.id))}):i.jsxs("div",{className:"px-6 py-8 text-center",children:[i.jsx(Tr,{className:"h-12 w-12 text-secondary-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-2",children:e.length===0?"No questions yet":"No questions match your filters"}),i.jsx("p",{className:"text-secondary-500",children:e.length===0?"Questions will appear here as you create exams":"Try adjusting your search criteria"})]})]}),h&&w&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-secondary-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-secondary-900",children:"Copy Question"}),i.jsx("button",{onClick:()=>{f(!1),v(null)},className:"text-secondary-400 hover:text-secondary-600",children:i.jsx(Vi,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("p",{className:"text-sm text-secondary-600 mb-4",children:"Select the subject where you want to copy this question:"}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Ae().map(C=>i.jsxs("button",{onClick:()=>G(w,C.id),className:"w-full text-left p-3 border border-secondary-200 rounded-lg hover:bg-secondary-50 transition-colors",children:[i.jsx("div",{className:"font-medium text-secondary-900",children:C.name}),i.jsx("div",{className:"text-sm text-secondary-500",children:C.examTitle})]},C.id))}),Ae().length===0&&i.jsx("p",{className:"text-sm text-secondary-500 text-center py-4",children:"No subjects available. Create an exam with subjects first."})]})]})}),y&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-secondary-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-secondary-900",children:"Bulk Upload Questions"}),i.jsx("button",{onClick:()=>{g(!1),S(null),O(null),m(""),_("")},className:"text-secondary-400 hover:text-secondary-600",children:i.jsx(Vi,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6",children:[b&&i.jsx("div",{className:"mb-4 rounded-md bg-green-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(ke,{className:"h-5 w-5 text-green-400"}),i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm font-medium text-green-800",children:b})})]})}),k&&i.jsx("div",{className:"mb-4 rounded-md bg-red-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(yt,{className:"h-5 w-5 text-red-400"}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-red-800",children:"Upload Error"}),i.jsx("pre",{className:"text-sm text-red-700 mt-1 whitespace-pre-wrap",children:k})]})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-secondary-600 mb-2",children:"Upload questions in CSV format. Download the template to see the required format."}),i.jsxs("button",{onClick:Y,className:"btn-outline px-3 py-1 text-sm flex items-center space-x-1",children:[i.jsx(Nn,{className:"h-4 w-4"}),i.jsx("span",{children:"Download Template"})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Select Subject *"}),i.jsxs("select",{className:"input w-full",value:p,onChange:C=>_(C.target.value),disabled:N,children:[i.jsx("option",{value:"",children:"Choose a subject for the questions..."}),Ae().map(C=>i.jsxs("option",{value:C.id,children:[C.examTitle,"  ",C.name]},C.id))]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"CSV Data *"}),i.jsx("textarea",{className:"input w-full h-48 resize-none font-mono text-xs",placeholder:"Paste your CSV data here...",value:x,onChange:C=>m(C.target.value),disabled:N}),i.jsx("p",{className:"text-xs text-secondary-500 mt-1",children:"Format: Question Type, Question Text, Option 1, Option 2, Option 3, Option 4, Correct Answer(s), Points"})]}),i.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"CSV Format Guidelines:"}),i.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[i.jsx("li",{children:" Question Type: multiple_choice, true_false, fill_blank, or short_answer"}),i.jsx("li",{children:" Use quotes around text containing commas"}),i.jsx("li",{children:" For multiple correct answers, separate with semicolons (;)"}),i.jsx("li",{children:" True/False questions automatically get True/False options"}),i.jsx("li",{children:" Fill blank and short answer questions don't need options"})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{onClick:()=>{g(!1),S(null),O(null),m(""),_("")},className:"btn-outline px-4 py-2",disabled:N,children:"Cancel"}),i.jsx("button",{onClick:ye,disabled:N||!x.trim()||!p,className:"btn-primary px-4 py-2 flex items-center space-x-2",children:N?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),i.jsx("span",{children:"Uploading..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Vu,{className:"h-4 w-4"}),i.jsx("span",{children:"Upload Questions"})]})})]})]})]})})]})}function bv(){const{user:e}=Ee(),[t,r]=j.useState([]),[s,n]=j.useState(!0),[a,l]=j.useState(null),c=async()=>{if(e)try{n(!0);const{data:h,error:f}=await D.from("profiles").select("*").order("created_at",{ascending:!1});if(f)throw f;r(h||[])}catch(h){l(h instanceof Error?h.message:"Failed to fetch users")}finally{n(!1)}},o=async(h,f)=>{if(!e)throw new Error("User not authenticated");try{const{data:y,error:g}=await D.from("profiles").update({role:f}).eq("id",h).select().single();if(g)throw g;return await c(),y}catch(y){throw y instanceof Error?y:new Error("Failed to update user role")}},u=async h=>{if(!e)throw new Error("User not authenticated");try{const{data:f,error:y}=await D.from("profiles").update({approved:!0,approved_at:new Date().toISOString(),approved_by:e.id}).eq("id",h).select().single();if(y)throw y;return await c(),f}catch(f){throw f instanceof Error?f:new Error("Failed to approve user")}},d=async h=>{if(!e)throw new Error("User not authenticated");try{const{data:f,error:y}=await D.from("profiles").update({approved:!1,approved_at:null,approved_by:null}).eq("id",h).select().single();if(y)throw y;return await c(),f}catch(f){throw f instanceof Error?f:new Error("Failed to reject user")}};return j.useEffect(()=>{c()},[e]),{users:t,loading:s,error:a,updateUserRole:o,approveUser:u,rejectUser:d,refetch:c}}function kv(){const{users:e,loading:t,error:r,updateUserRole:s,approveUser:n,rejectUser:a}=bv(),[l,c]=j.useState(""),[o,u]=j.useState("all"),[d,h]=j.useState("all"),[f,y]=j.useState(null),[g,w]=j.useState(null),v=[{value:"all",label:"All Roles"},{value:"user",label:"User"},{value:"editor",label:"Editor"},{value:"admin",label:"Admin"},{value:"creator",label:"Creator"}],x=e.filter(b=>{const O=b.email.toLowerCase().includes(l.toLowerCase())||b.full_name&&b.full_name.toLowerCase().includes(l.toLowerCase()),k=o==="all"||b.role===o,S=d==="all"||d==="approved"&&b.approved||d==="pending"&&!b.approved;return O&&k&&S}),m=async(b,O)=>{if(confirm(`Are you sure you want to change this user's role to ${O}?`))try{y(b),await s(b,O)}catch(k){alert(k instanceof Error?k.message:"Failed to update user role")}finally{y(null)}},p=async b=>{if(confirm("Are you sure you want to approve this user?"))try{w(b),await n(b)}catch(O){alert(O instanceof Error?O.message:"Failed to approve user")}finally{w(null)}},_=async b=>{if(confirm("Are you sure you want to revoke approval for this user?"))try{w(b),await a(b)}catch(O){alert(O instanceof Error?O.message:"Failed to reject user")}finally{w(null)}},N=b=>{switch(b){case"admin":return"bg-red-100 text-red-800";case"creator":return"bg-blue-100 text-blue-800";case"editor":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},E=b=>{switch(b){case"admin":return"Full system access and user management";case"creator":return"Can create and manage exams";case"editor":return"Can edit existing exams";case"user":return"Can take exams only";default:return"Standard user access"}};return t?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"User Management"}),i.jsx("p",{className:"text-secondary-600",children:"Manage user roles and permissions"})]}),i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})]}):r?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"User Management"}),i.jsx("p",{className:"text-secondary-600",children:"Manage user roles and permissions"})]}),i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(yt,{className:"h-5 w-5 text-red-400"}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-sm font-medium text-red-800",children:"Error loading users"}),i.jsx("p",{className:"text-sm text-red-700 mt-1",children:r})]})]})})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"User Management"}),i.jsx("p",{className:"text-secondary-600",children:"Manage user roles and permissions"})]}),i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Search Users"}),i.jsxs("div",{className:"relative",children:[i.jsx(Wf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-secondary-400"}),i.jsx("input",{type:"text",className:"input pl-10 w-full",placeholder:"Search by name or email...",value:l,onChange:b=>c(b.target.value)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Filter by Role"}),i.jsx("select",{className:"input w-full",value:o,onChange:b=>u(b.target.value),children:v.map(b=>i.jsx("option",{value:b.value,children:b.label},b.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Filter by Status"}),i.jsxs("select",{className:"input w-full",value:d,onChange:b=>h(b.target.value),children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"approved",children:"Approved"}),i.jsx("option",{value:"pending",children:"Pending Approval"})]})]})]})}),i.jsxs("div",{className:"card p-6",children:[i.jsxs("h3",{className:"text-lg font-medium text-secondary-900 mb-4 flex items-center",children:[i.jsx(sv,{className:"h-5 w-5 mr-2"}),"Role Permissions"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Admin"}),i.jsx("p",{className:"text-sm text-red-700",children:"Full system access, user management, all exam operations"})]}),i.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Creator"}),i.jsx("p",{className:"text-sm text-blue-700",children:"Create, edit, publish exams, manage questions"})]}),i.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Editor"}),i.jsx("p",{className:"text-sm text-green-700",children:"Edit existing exams, manage questions"})]}),i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"User"}),i.jsx("p",{className:"text-sm text-gray-700",children:"Take exams, view results"})]})]})]}),i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"px-6 py-4 border-b border-secondary-200",children:i.jsxs("h3",{className:"text-lg font-medium text-secondary-900",children:["Users (",x.length,")"]})}),x.length>0?i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-secondary-200",children:[i.jsx("thead",{className:"bg-secondary-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"User"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Current Role"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Joined"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-secondary-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-secondary-200",children:x.map(b=>i.jsxs("tr",{className:"hover:bg-secondary-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:i.jsx("span",{className:"text-sm font-medium text-primary-600",children:b.email.charAt(0).toUpperCase()})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-secondary-900",children:b.full_name||"No name provided"}),i.jsx("div",{className:"text-sm text-secondary-500",children:b.email})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.approved?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(ke,{className:"h-3 w-3 mr-1"}),"Approved"]}):i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[i.jsx(bt,{className:"h-3 w-3 mr-1"}),"Pending"]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${N(b.role)}`,children:b.role}),i.jsx("div",{className:"text-xs text-secondary-500 mt-1",children:E(b.role)})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-secondary-500",children:new Date(b.created_at).toLocaleDateString()}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsx("div",{className:"flex items-center space-x-2",children:b.approved?i.jsxs(i.Fragment,{children:[i.jsxs("select",{value:b.role,onChange:O=>m(b.id,O.target.value),disabled:f===b.id,className:"text-sm border border-secondary-300 rounded px-2 py-1 focus:ring-primary-500 focus:border-primary-500",children:[i.jsx("option",{value:"user",children:"User"}),i.jsx("option",{value:"editor",children:"Editor"}),i.jsx("option",{value:"admin",children:"Admin"}),i.jsx("option",{value:"creator",children:"Creator"})]}),i.jsx("button",{onClick:()=>_(b.id),disabled:g===b.id,className:"inline-flex items-center px-2 py-1 border border-red-300 text-xs font-medium rounded text-red-700 bg-white hover:bg-red-50 disabled:opacity-50",title:"Revoke approval",children:i.jsx(br,{className:"h-3 w-3"})}),(f===b.id||g===b.id)&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>p(b.id),disabled:g===b.id,className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-white bg-green-600 hover:bg-green-700 disabled:opacity-50",children:[i.jsx(ke,{className:"h-3 w-3 mr-1"}),"Approve"]}),g===b.id&&i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"})]})})})]},b.id))})]})}):i.jsxs("div",{className:"px-6 py-8 text-center",children:[i.jsx(Lt,{className:"h-12 w-12 text-secondary-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-2",children:e.length===0?"No users yet":"No users match your filters"}),i.jsx("p",{className:"text-secondary-500",children:e.length===0?"Users will appear here as they sign up":"Try adjusting your search criteria"})]})]})]})}function Sv(){const{user:e}=Ee(),[t,r]=j.useState("profile"),[s,n]=j.useState(!1),[a,l]=j.useState(null),[c,o]=j.useState(null),[u,d]=j.useState(!0),[h,f]=j.useState({fullName:"",email:(e==null?void 0:e.email)||"",bio:"",timezone:"UTC"}),[y,g]=j.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[w,v]=j.useState({emailNotifications:!0,examReminders:!0,resultNotifications:!0,systemUpdates:!1}),[x,m]=j.useState({defaultTimeLimit:60,autoSaveInterval:30,maxAttempts:3,showResultsImmediately:!0}),p=[{id:"profile",name:"Profile",icon:ys},{id:"security",name:"Security",icon:ev},{id:"notifications",name:"Notifications",icon:Qg},{id:"system",name:"System",icon:Jg}],_=(k,S)=>{S==="success"?(l(k),o(null)):(o(k),l(null)),setTimeout(()=>{l(null),o(null)},5e3)};j.useEffect(()=>{(async()=>{if(e)try{d(!0);const{data:S,error:W}=await D.from("profiles").select("full_name, email").eq("id",e.id).single();W?(console.error("Error loading profile:",W),f(F=>{var G;return{...F,fullName:((G=e.user_metadata)==null?void 0:G.full_name)||"",email:e.email||""}})):f(F=>({...F,fullName:S.full_name||"",email:S.email||e.email||""}))}catch(S){console.error("Error loading user profile:",S),f(W=>{var F;return{...W,fullName:((F=e.user_metadata)==null?void 0:F.full_name)||"",email:e.email||""}})}finally{d(!1)}})()},[e]);const N=async()=>{if(!e){_("User not authenticated","error");return}if(!h.fullName.trim()){_("Full name is required","error");return}try{n(!0);const{error:k}=await D.auth.updateUser({data:{full_name:h.fullName.trim()}});if(k)throw k;const{error:S}=await D.from("profiles").update({full_name:h.fullName.trim(),updated_at:new Date().toISOString()}).eq("id",e.id);if(S)throw S;_("Profile updated successfully!","success")}catch(k){const S=k instanceof Error?k.message:"Failed to update profile";_(S,"error")}finally{n(!1)}},E=async()=>{if(y.newPassword!==y.confirmPassword){_("New passwords do not match","error");return}if(y.newPassword.length<6){_("Password must be at least 6 characters long","error");return}if(!y.currentPassword.trim()){_("Please enter your current password","error");return}try{n(!0);const{error:k}=await D.auth.signInWithPassword({email:e.email,password:y.currentPassword});if(k)throw new Error("Current password is incorrect");const{error:S}=await D.auth.updateUser({password:y.newPassword});if(S)throw S;g({currentPassword:"",newPassword:"",confirmPassword:""}),_("Password updated successfully!","success")}catch(k){const S=k instanceof Error?k.message:"Failed to update password";_(S,"error")}finally{n(!1)}},b=async()=>{try{n(!0),await new Promise(k=>setTimeout(k,1e3)),_("Notification settings updated successfully!","success")}catch{_("Failed to update notification settings","error")}finally{n(!1)}},O=async()=>{try{n(!0),await new Promise(k=>setTimeout(k,1e3)),_("System settings updated successfully!","success")}catch{_("Failed to update system settings","error")}finally{n(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-secondary-900",children:"Settings"}),i.jsx("p",{className:"text-secondary-600",children:"Manage your account and system preferences"})]}),a&&i.jsx("div",{className:"rounded-md bg-green-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(ke,{className:"h-5 w-5 text-green-400"}),i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm font-medium text-green-800",children:a})})]})}),c&&i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(yt,{className:"h-5 w-5 text-red-400"}),i.jsx("div",{className:"ml-3",children:i.jsx("p",{className:"text-sm font-medium text-red-800",children:c})})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsx("nav",{className:"space-y-1",children:p.map(k=>{const S=k.icon;return i.jsxs("button",{onClick:()=>r(k.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${t===k.id?"bg-primary-100 text-primary-900":"text-secondary-600 hover:bg-secondary-50 hover:text-secondary-900"}`,children:[i.jsx(S,{className:`mr-3 h-5 w-5 ${t===k.id?"text-primary-500":"text-secondary-400"}`}),k.name]},k.id)})})}),i.jsx("div",{className:"lg:col-span-3",children:i.jsx("div",{className:"card p-6",children:u?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),i.jsx("span",{className:"ml-3 text-secondary-600",children:"Loading settings..."})]}):i.jsxs(i.Fragment,{children:[t==="profile"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Profile Information"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Full Name"}),i.jsx("input",{type:"text",className:"input w-full",value:h.fullName,onChange:k=>f({...h,fullName:k.target.value}),placeholder:"Enter your full name",disabled:s})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Email Address"}),i.jsx("input",{type:"email",className:"input w-full",value:h.email,disabled:!0,placeholder:"Email cannot be changed"}),i.jsx("p",{className:"text-xs text-secondary-500 mt-1",children:"Contact support to change your email address"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Bio (Coming Soon)"}),i.jsx("textarea",{className:"input w-full h-24 resize-none",value:h.bio,onChange:k=>f({...h,bio:k.target.value}),placeholder:"Tell us about yourself",disabled:!0}),i.jsx("p",{className:"text-xs text-secondary-500 mt-1",children:"Bio field will be available after database schema update"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Timezone (Coming Soon)"}),i.jsxs("select",{className:"input w-full",value:h.timezone,onChange:k=>f({...h,timezone:k.target.value}),disabled:!0,children:[i.jsx("option",{value:"UTC",children:"UTC"}),i.jsx("option",{value:"America/New_York",children:"Eastern Time"}),i.jsx("option",{value:"America/Chicago",children:"Central Time"}),i.jsx("option",{value:"America/Denver",children:"Mountain Time"}),i.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"})]}),i.jsx("p",{className:"text-xs text-secondary-500 mt-1",children:"Timezone field will be available after database schema update"})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:N,disabled:s,className:"btn-primary px-4 py-2 flex items-center space-x-2",children:[s?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):i.jsx(Bs,{className:"h-4 w-4"}),i.jsx("span",{children:"Save Changes"})]})})]}),t==="security"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Change Password"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Current Password"}),i.jsx("input",{type:"password",className:"input w-full",value:y.currentPassword,onChange:k=>g({...y,currentPassword:k.target.value}),placeholder:"Enter current password"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"New Password"}),i.jsx("input",{type:"password",className:"input w-full",value:y.newPassword,onChange:k=>g({...y,newPassword:k.target.value}),placeholder:"Enter new password"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Confirm New Password"}),i.jsx("input",{type:"password",className:"input w-full",value:y.confirmPassword,onChange:k=>g({...y,confirmPassword:k.target.value}),placeholder:"Confirm new password"})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:E,disabled:s,className:"btn-primary px-4 py-2 flex items-center space-x-2",children:[s?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):i.jsx(Bs,{className:"h-4 w-4"}),i.jsx("span",{children:"Update Password"})]})})]}),t==="notifications"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-4",children:"Notification Preferences"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-secondary-700",children:"Email Notifications"}),i.jsx("p",{className:"text-xs text-secondary-500",children:"Receive general notifications via email"})]}),i.jsx("input",{type:"checkbox",className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500",checked:w.emailNotifications,onChange:k=>v({...w,emailNotifications:k.target.checked})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-secondary-700",children:"Exam Reminders"}),i.jsx("p",{className:"text-xs text-secondary-500",children:"Get reminded about upcoming exams"})]}),i.jsx("input",{type:"checkbox",className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500",checked:w.examReminders,onChange:k=>v({...w,examReminders:k.target.checked})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-secondary-700",children:"Result Notifications"}),i.jsx("p",{className:"text-xs text-secondary-500",children:"Be notified when exam results are available"})]}),i.jsx("input",{type:"checkbox",className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500",checked:w.resultNotifications,onChange:k=>v({...w,resultNotifications:k.target.checked})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-secondary-700",children:"System Updates"}),i.jsx("p",{className:"text-xs text-secondary-500",children:"Receive notifications about system updates"})]}),i.jsx("input",{type:"checkbox",className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500",checked:w.systemUpdates,onChange:k=>v({...w,systemUpdates:k.target.checked})})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:b,disabled:s,className:"btn-primary px-4 py-2 flex items-center space-x-2",children:[s?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):i.jsx(Bs,{className:"h-4 w-4"}),i.jsx("span",{children:"Save Preferences"})]})})]}),t==="system"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-secondary-900 mb-4",children:"System Defaults"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Default Time Limit (minutes)"}),i.jsx("input",{type:"number",className:"input w-full",value:x.defaultTimeLimit,onChange:k=>m({...x,defaultTimeLimit:parseInt(k.target.value)||60}),min:"1"}),i.jsx("p",{className:"text-xs text-secondary-500 mt-1",children:"Default time limit for new exams"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Auto-save Interval (seconds)"}),i.jsx("input",{type:"number",className:"input w-full",value:x.autoSaveInterval,onChange:k=>m({...x,autoSaveInterval:parseInt(k.target.value)||30}),min:"10"}),i.jsx("p",{className:"text-xs text-secondary-500 mt-1",children:"How often to auto-save exam progress"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-1",children:"Maximum Attempts"}),i.jsx("input",{type:"number",className:"input w-full",value:x.maxAttempts,onChange:k=>m({...x,maxAttempts:parseInt(k.target.value)||1}),min:"1"}),i.jsx("p",{className:"text-xs text-secondary-500 mt-1",children:"Default maximum attempts per exam"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-secondary-700",children:"Show Results Immediately"}),i.jsx("p",{className:"text-xs text-secondary-500",children:"Default setting for showing results after exam completion"})]}),i.jsx("input",{type:"checkbox",className:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500",checked:x.showResultsImmediately,onChange:k=>m({...x,showResultsImmediately:k.target.checked})})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:O,disabled:s,className:"btn-primary px-4 py-2 flex items-center space-x-2",children:[s?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):i.jsx(Bs,{className:"h-4 w-4"}),i.jsx("span",{children:"Save Settings"})]})})]})]})})})]})]})}function Ev(){return i.jsx(qg,{children:i.jsx("div",{className:"min-h-screen bg-secondary-50",children:i.jsxs(wu,{children:[i.jsx(_e,{path:"/login",element:i.jsx(lv,{})}),i.jsx(_e,{path:"/forgot-password",element:i.jsx(ov,{})}),i.jsx(_e,{path:"/reset-password",element:i.jsx(cv,{})}),i.jsx(_e,{path:"/exam/:examId/take",element:i.jsx(yv,{})}),i.jsx(_e,{path:"/exam/:examId/result",element:i.jsx(gv,{})}),i.jsx(_e,{path:"/*",element:i.jsx(Is,{children:i.jsx(av,{children:i.jsxs(wu,{children:[i.jsx(_e,{path:"/",element:i.jsx(Fi,{to:"/dashboard",replace:!0})}),i.jsx(_e,{path:"/dashboard",element:i.jsx(dv,{})}),i.jsx(_e,{path:"/available-exams",element:i.jsx(fv,{})}),i.jsx(_e,{path:"/exam-history",element:i.jsx(vv,{})}),i.jsx(_e,{path:"/exams/create",element:i.jsx(Is,{requireRole:["admin","creator"],children:i.jsx(Wu,{})})}),i.jsx(_e,{path:"/exams/:examId/edit",element:i.jsx(Is,{requireRole:["admin","creator"],children:i.jsx(Wu,{})})}),i.jsx(_e,{path:"/exams/:examId/results",element:i.jsx(jv,{})}),i.jsx(_e,{path:"/questions",element:i.jsx(Is,{requireRole:["admin","creator"],children:i.jsx(Nv,{})})}),i.jsx(_e,{path:"/users",element:i.jsx(Is,{requireRole:["admin","creator"],children:i.jsx(kv,{})})}),i.jsx(_e,{path:"/settings",element:i.jsx(Sv,{})})]})})})})]})})})}Ga.createRoot(document.getElementById("root")).render(i.jsx(rd.StrictMode,{children:i.jsx(j0,{children:i.jsx(Ev,{})})}));
